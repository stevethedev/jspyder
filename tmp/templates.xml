<?xml version="1.0" ?> 
<templates>
    <!-- Main System Layout -->
    <template name="main-page">
        <div class="bank-banner">
            <h1 class="bank-header" id="bank-header">Budget Analysis Kit</h1>
            <ul id="bank-navigation" class="bank-navigation">
                @each("bank_navigation", "button", "@insert_template(`bank-navigation-link`)")
            </ul>
        </div>
        <div class="bank-viewport">
            <div class="bank-subnavigation-container">
                <ul id="bank-subnavigation-nodelete" class="bank-subnavigation-list list-1">
                    @each("bank_subnav_constant", "button", "@insert_template(`bank-subnavigation-link`)")
                </ul>
                <ul id="bank-subnavigation" class="bank-subnavigation-list list-2">
                    @each("bank_subnav_volatile", "button", "@insert_template(`bank-subnavigation-link`)")
                </ul>
            </div>
            <div id="bank-content-panel" class="bank-content">
                <!-- DATA GOES HERE -->
            </div>
        </div>
    </template>
    
    <!-- ================================================================== -->
    <!-- MAIN SYSTEM LINKS ================================================ -->
    <!-- ================================================================== -->
    <template name="bank-navigation-link">
        @var("page", `@map_item("button","page")`)
        @var("text", `@map_item("button","text")`)
        <li data-page="${page}" class="link link-${page}">${text}</li>
    </template>
    
    <!-- ================================================================== -->
    <!-- SUBNAV LINKS ===================================================== -->
    <!-- ================================================================== -->
    <template name="bank-subnavigation-link">
        @var("subnav", `@map_item("button", "subnav")`)
        @var("text", `@map_item("button", "text")`)
        @var("icon", `@map_item("button","icon")`)
        @var("gt", `@html("&gt;")`)
        @var("lt", `@html("&lt;")`)
        @js_log(${gt})
        <li data-subnav="${subnav}" class="subnav subnav-${subnav}">
            <span>${text}</span>
        </li> 
    </template>
    
    <!-- Requires: table_class, table_columns, table_header, divisions -->
    <template name="overview-table">
        <div class="bank-overview-container display inline-block">
            <table class="${table_class} table-banded table-hover bank-overview-table">
                <thead>
                    <tr>
                        <th colspan="@size(`table_columns`)">
                            <h3>${table_header}</h3>
                        </th>
                    </tr>
                    <tr>@each("table_columns", "header", "<td>@map_item(`header`, `text`)</td>")</tr>
                </thead>
                <tbody>
                    @each("table_rows", "table_row", "@insert_template(`overview-table-row`)")
                </tbody>
                <tfoot></tfoot>
            </table>
        </div>
    </template>
    
    <!-- param: row_column -->
    <template name="overview-table-cell">
        <!-- Get whether this is an overspent amount -->
        @var("column_tag", `@map_item("row_column", "tag")`)
        @var("os_tag", `@concat(${column_tag}, "_class")`)
        @var("cell_class", `@map_item("table_row", ${os_tag})`)
        
        <!-- Get whether this has a tooltip -->
        @var("tooltip_tag", `@concat(${column_tag}, "_tooltip")`)
        @var("tooltip", `@map_item("table_row", ${tooltip_tag})`)
        
        <!-- Get whether this has a class associated -->
        @var("col_class", `@map_item("row_column", "class")`)
        @var("row_class", `@map_item("row_column", "class")`)
        @var("default", `@map_item("row_column", "default")`)
        
        @var("data", `@map_item("table_row", ${column_tag})`)
        
        <td>
            <div class="position relative ${col_class} ${cell_class}" data-tooltip="${tooltip}" title="${tooltip}">
                @iif(${data}, ${data}, ${default})
            </div>
        </td>
    </template>
    
    <!-- -->
    <template name="overview-table-row">
        @var("division", `@map_item("table_row", "division")`)
        <tr>@each("table_columns", "row_column", "@insert_template(`overview-table-cell`)")</tr>
    </template>
    
    <!-- Requires: row_header, table_columns -->
    <template name="overview-table-row-header">
        <tr>
            @each("table_columns", "content", "<td>${content}</td>")
        </tr>
    </template>
    
    <!-- Tooltip Template -->
    <template name="js-tooltip">
        <span class="tooltip">${tooltip}</span>
    </template>
</templates>