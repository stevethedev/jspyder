var $jscomp={scope:{},getGlobal:function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global?global:c}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return"jscomp_symbol_"+c+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};
$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();if(c[$jscomp.global.Symbol.iterator])return c[$jscomp.global.Symbol.iterator]();if(!(c instanceof Array||"string"==typeof c||c instanceof String))throw new TypeError(c+" is not iterable");var d=0;return{next:function(){return d==c.length?{done:!0}:{done:!1,value:c[d++]}}}};$jscomp.arrayFromIterator=function(c){for(var d,b=[];!(d=c.next()).done;)b.push(d.value);return b};
$jscomp.arrayFromIterable=function(c){return c instanceof Array?c:$jscomp.arrayFromIterator($jscomp.makeIterator(c))};$jscomp.arrayFromArguments=function(c){for(var d=[],b=0;b<c.length;b++)d.push(c[b]);return d};$jscomp.inherits=function(c,d){function b(){}b.prototype=d.prototype;c.prototype=new b;c.prototype.constructor=c;for(var a in d)if($jscomp.global.Object.defineProperties){var e=$jscomp.global.Object.getOwnPropertyDescriptor(d,a);$jscomp.global.Object.defineProperty(c,a,e)}else c[a]=d[a]};
$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};$jscomp.array.arrayIterator_=function(c,d){c instanceof String&&(c=String(c));var b=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={},e=(a.next=function(){if(b<c.length){var a=b++;return{value:d(a,c[a]),done:!1}}e.next=$jscomp.array.done_;return $jscomp.array.done_()},a[Symbol.iterator]=function(){return e},a);return e};
$jscomp.array.findInternal_=function(c,d,b){c instanceof String&&(c=String(c));for(var a=c.length,e=0;e<a;e++){var f=c[e];if(d.call(b,f,e,c))return{i:e,v:f}}return{i:-1,v:void 0}};
$jscomp.array.from=function(c,d,b){d=void 0===d?function(a){return a}:d;var a=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(c[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();c=c[Symbol.iterator]();for(var e;!(e=c.next()).done;)a.push(d.call(b,e.value))}else{e=c.length;for(var f=0;f<e;f++)a.push(d.call(b,c[f]))}return a};$jscomp.array.of=function(c){for(var d=[],b=0;b<arguments.length;++b)d[b-0]=arguments[b];return $jscomp.array.from(d)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(c,d){return[c,d]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(c){return c})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(c,d){return d})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(c,d,b){var a=this.length;c=Number(c);d=Number(d);b=Number(null!=b?b:a);if(c<d)for(b=Math.min(b,a);d<b;)d in this?this[c++]=this[d++]:(delete this[c++],d++);else for(b=Math.min(b,a+d-c),c+=b-d;b>d;)--b in this?this[--c]=this[b]:delete this[c];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(c,d,b){null!=b&&c.length||(b=this.length||0);b=Number(b);for(d=Number((void 0===d?0:d)||0);d<b;d++)this[d]=c;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(c,d){return $jscomp.array.findInternal_(this,c,d).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(c,d){return $jscomp.array.findInternal_(this,c,d).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(c){c=void 0===c?[]:c;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(c){c=$jscomp.makeIterator(c);for(var d=c.next();!d.done;d=c.next())d=d.value,this.set(d[0],d[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var c=$jscomp.global.Map;if(!c||!c.prototype.entries||!Object.seal)return!1;try{var d=Object.seal({x:4}),b=new c($jscomp.makeIterator([[d,"s"]]));if("s"!=b.get(d)||1!=b.size||b.get({x:4})||b.set({x:4},"t")!=b||2!=b.size)return!1;var a=b.entries(),e=a.next();if(e.done||e.value[0]!=d||"s"!=e.value[1])return!1;e=a.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!a.next().done?!1:!0}catch(f){return!1}};
$jscomp.Map.createHead_=function(){var c={};return c.previous=c.next=c.head=c};$jscomp.Map.getId_=function(c){if(!(c instanceof Object))return String(c);$jscomp.Map.key_ in c||c instanceof Object&&Object.isExtensible&&Object.isExtensible(c)&&$jscomp.Map.defineProperty_(c,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in c?c[$jscomp.Map.key_]:" "+c};
$jscomp.Map.prototype.set=function(c,d){var b=this.maybeGetEntry_(c),a=b.id,e=b.list,b=b.entry;e||(e=this.data_[a]=[]);b?b.value=d:(b={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,value:d},e.push(b),this.head_.previous.next=b,this.head_.previous=b,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(c){var d=this.maybeGetEntry_(c);c=d.id;var b=d.list,a=d.index;return(d=d.entry)&&b?(b.splice(a,1),b.length||delete this.data_[c],d.previous.next=d.next,d.next.previous=d.previous,d.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(c){return!!this.maybeGetEntry_(c).entry};
$jscomp.Map.prototype.get=function(c){return(c=this.maybeGetEntry_(c).entry)&&c.value};$jscomp.Map.prototype.maybeGetEntry_=function(c){var d=$jscomp.Map.getId_(c),b=this.data_[d];if(b)for(var a=0;a<b.length;a++){var e=b[a];if(c!==c&&e.key!==e.key||c===e.key)return{id:d,list:b,index:a,entry:e}}return{id:d,list:b,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(c){return[c.key,c.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(c){return c.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(c){return c.value})};$jscomp.Map.prototype.forEach=function(c,d){for(var b=$jscomp.makeIterator(this.entries()),a=b.next();!a.done;a=b.next())a=a.value,c.call(d,a[1],a[0],this)};
$jscomp.Map.prototype.iter_=function(c){var d=this,b=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={};return a.next=function(){if(b){for(;b.head!=d.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:c(b)};b=null}return{done:!0,value:void 0}},a[Symbol.iterator]=function(){return this},a};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(c,d,b){Object.defineProperty(c,d,{value:String(b)})}:function(c,d,b){c[d]=String(b)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(c){c=Number(c)>>>0;if(0===c)return 32;var d=0;0===(c&4294901760)&&(c<<=16,d+=16);0===(c&4278190080)&&(c<<=8,d+=8);0===(c&4026531840)&&(c<<=4,d+=4);0===(c&3221225472)&&(c<<=2,d+=2);0===(c&2147483648)&&d++;return d};$jscomp.math.imul=function(c,d){c=Number(c);d=Number(d);var b=c&65535,a=d&65535;return b*a+((c>>>16&65535)*a+b*(d>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(c){c=Number(c);return 0===c||isNaN(c)?c:0<c?1:-1};
$jscomp.math.log10=function(c){return Math.log(c)/Math.LN10};$jscomp.math.log2=function(c){return Math.log(c)/Math.LN2};$jscomp.math.log1p=function(c){c=Number(c);if(.25>c&&-.25<c){for(var d=c,b=1,a=c,e=0,f=1;e!=a;)d*=c,f*=-1,a=(e=a)+f*d/++b;return a}return Math.log(1+c)};$jscomp.math.expm1=function(c){c=Number(c);if(.25>c&&-.25<c){for(var d=c,b=1,a=c,e=0;e!=a;)d*=c/++b,a=(e=a)+d;return a}return Math.exp(c)-1};$jscomp.math.cosh=function(c){c=Number(c);return(Math.exp(c)+Math.exp(-c))/2};
$jscomp.math.sinh=function(c){c=Number(c);return 0===c?c:(Math.exp(c)-Math.exp(-c))/2};$jscomp.math.tanh=function(c){c=Number(c);if(0===c)return c;var d=Math.exp(2*-Math.abs(c)),d=(1-d)/(1+d);return 0>c?-d:d};$jscomp.math.acosh=function(c){c=Number(c);return Math.log(c+Math.sqrt(c*c-1))};$jscomp.math.asinh=function(c){c=Number(c);if(0===c)return c;var d=Math.log(Math.abs(c)+Math.sqrt(c*c+1));return 0>c?-d:d};
$jscomp.math.atanh=function(c){c=Number(c);return($jscomp.math.log1p(c)-$jscomp.math.log1p(-c))/2};
$jscomp.math.hypot=function(c,d,b){for(var a=[],e=2;e<arguments.length;++e)a[e-2]=arguments[e];c=Number(c);d=Number(d);for(var f=Math.max(Math.abs(c),Math.abs(d)),g=$jscomp.makeIterator(a),e=g.next();!e.done;e=g.next())f=Math.max(f,Math.abs(e.value));if(1E100<f||1E-100>f){c/=f;d/=f;g=c*c+d*d;a=$jscomp.makeIterator(a);for(e=a.next();!e.done;e=a.next())e=e.value,e=Number(e)/f,g+=e*e;return Math.sqrt(g)*f}f=c*c+d*d;a=$jscomp.makeIterator(a);for(e=a.next();!e.done;e=a.next())e=e.value,f+=e*e;return Math.sqrt(f)};
$jscomp.math.trunc=function(c){c=Number(c);if(isNaN(c)||Infinity===c||-Infinity===c||0===c)return c;var d=Math.floor(Math.abs(c));return 0>c?-d:d};$jscomp.math.cbrt=function(c){if(0===c)return c;c=Number(c);var d=Math.pow(Math.abs(c),1/3);return 0>c?-d:d};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(c){return"number"!==typeof c?!1:!isNaN(c)&&Infinity!==c&&-Infinity!==c};$jscomp.number.isInteger=function(c){return $jscomp.number.isFinite(c)?c===Math.floor(c):!1};
$jscomp.number.isNaN=function(c){return"number"===typeof c&&isNaN(c)};$jscomp.number.isSafeInteger=function(c){return $jscomp.number.isInteger(c)&&Math.abs(c)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(c,d){for(var b=[],a=1;a<arguments.length;++a)b[a-1]=arguments[a];b=$jscomp.makeIterator(b);for(a=b.next();!a.done;a=b.next()){var a=a.value,e;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(c[e]=a[e])}return c};$jscomp.object.is=function(c,d){return c===d?0!==c||1/c===1/d:c!==c&&d!==d};$jscomp.Set=function(c){c=void 0===c?[]:c;this.map_=new $jscomp.Map;if(c){c=$jscomp.makeIterator(c);for(var d=c.next();!d.done;d=c.next())this.add(d.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var c=$jscomp.global.Set;if(!c||!c.prototype.entries||!Object.seal)return!1;var d=Object.seal({x:4}),c=new c($jscomp.makeIterator([d]));if(c.has(d)||1!=c.size||c.add(d)!=c||1!=c.size||c.add({x:4})!=c||2!=c.size)return!1;var c=c.entries(),b=c.next();if(b.done||b.value[0]!=d||b.value[1]!=d)return!1;b=c.next();return b.done||b.value[0]==d||4!=b.value[0].x||b.value[1]!=b.value[0]?!1:c.next().done};
$jscomp.Set.prototype.add=function(c){this.map_.set(c,c);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(c){c=this.map_["delete"](c);this.size=this.map_.size;return c};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(c){return this.map_.has(c)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(c,d){var b=this;this.map_.forEach(function(a){return c.call(d,a,a,b)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(c,d){if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(c){for(var d=[],b=0;b<arguments.length;++b)d[b-0]=arguments[b];for(var b="",d=$jscomp.makeIterator(d),a=d.next();!a.done;a=d.next()){a=a.value;a=+a;if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?b+=String.fromCharCode(a):(a-=65536,b+=String.fromCharCode(a>>>10&1023|55296),b+=String.fromCharCode(a&1023|56320))}return b};
$jscomp.string.repeat=function(c){var d=this.toString();if(0>c||1342177279<c)throw new RangeError("Invalid count value");c|=0;for(var b="";c;)if(c&1&&(b+=d),c>>>=1)d+=d;return b};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(c){var d=this.toString(),b=d.length;c=Number(c)||0;if(0<=c&&c<b){c|=0;var a=d.charCodeAt(c);if(55296>a||56319<a||c+1===b)return a;c=d.charCodeAt(c+1);return 56320>c||57343<c?a:1024*(a-55296)+c+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(c,d){d=void 0===d?0:d;$jscomp.string.noRegExp_(c,"includes");return-1!==this.toString().indexOf(c,d)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(c,d){d=void 0===d?0:d;$jscomp.string.noRegExp_(c,"startsWith");var b=this.toString();c+="";for(var a=b.length,e=c.length,f=Math.max(0,Math.min(d|0,b.length)),g=0;g<e&&f<a;)if(b[f++]!=c[g++])return!1;return g>=e};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(c,d){$jscomp.string.noRegExp_(c,"endsWith");var b=this.toString();c+="";void 0===d&&(d=b.length);for(var a=Math.max(0,Math.min(d|0,b.length)),e=c.length;0<e&&0<a;)if(b[--a]!=c[--e])return!1;return 0>=e};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(c,d){function b(b){var d=b.jspyder=function(){};d.extend=function(a,b){Object.defineProperty(this,a,{value:b});return this};d.extend.fn=function(a,b,c){d.extend(a,b.apply(d,c));return this};d.createRegistry=h;d.registry=h();a(d);e(d);l(d);f(d);g(d);d.loadScript=function(a){d.ajax(a).get(function(a){(new Function(a.responseText))()})};return d}function a(a){function b(d,c){var e=a.alg.sliceArray(arguments,1<arguments.length?1:0),r,q,u;if(1===arguments.length||arguments)d=0;console&&(u=console.log||
function(){},q=console.warn||u,r=console.error||r,2===d?a.alg.use(console,r,e):1===d?a.alg.use(console,q,e):a.alg.use(console,u,e));return this}b.err=function(d){a.alg.use(a,b,[2].concat(a.alg.sliceArray(arguments,0)));return this};b.warn=function(d){a.alg.use(a,b,[1].concat(a.alg.sliceArray(arguments,0)));return this};a.extend("log",b)}function e(a){var b="",d=0;(function(){k.documentMode?(b="IE",d=window.attachEvent?eval("/*@cc_on (document.documentMode == 10)!=@*/false")?10:window.requestAnimationFrame?
window.addEventListener?7:8:9:11):"undefined"!==typeof window.InstallTrigger?(b="Firefox",d=Int8Array&&Int8Array.prototype.sort?7:Node.innerText?45:Document.charset?44:Array.prototype.includes?43:"undefined"!==typeof window.Reflect?42:41):window.opera||0<=navigator.userAgent.indexOf(" OPR/")?(b="Opera",d=1):window.chrome?(b="Chrome",d=45):0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")?(b="Safari",window.CSS.supports?d=9:window.CSS.supports||(d=8)):window.MSInputMethodContext?
(b="Edge",$jscomp.initSymbol(),d="{}"===JSON.stringify({foo:Symbol()})?13:window.RTCIceGatherOptions?11:12):/iP(ad|hone|od)/.test(navigator.userAgent)?(b="iOS Safari",d=8.4):window.operamini?(b="Opera Mini",d=8):/Android.*Mozilla\/5.0.*AppleWebKit/.test(navigator.userAgent)?(b="Android Browser",d=4.3):/Android.*Chrome/.test(navigator.userAgent)&&(b="Chrome for Android",d=47)})();var c={name:b,version:d,toString:function(){return this.name+this.version}};Object.freeze(c);c={version:"0.0.0",versionNo:0,
browser:c};Object.freeze(c);a.extend("env",c)}function f(a){var b;if(a.alg)return a.alg;b={each:function(b,d,c){var e={stop:function(){q=!0;return this},drop:function(a){return this}},q=!1;if(b&&"object"===typeof b)for(var u in b)if(d.apply(e,[b[u],u,b,c]),q)break;return a},arrEach:function(b,d,c){var e={stop:function(){q=!0;return this},drop:function(d){b instanceof Array&&b.splice(u--,a.alg.number(d,1));return this}},q=!1;if(b&&"object"===typeof b)for(var u=0;u<b.length&&(d.apply(e,[b[u],u,b,c]),
!q);u++);return a},iterate:function(b,d,c,e){b=a.alg.number(b);d=a.alg.number(d);for(var q={stop:function(){u=!0;return this},drop:function(a){return this}},u=!1,f=d<b?-1:1;b!==d&&(c.apply(q,[b,e]),!u);b+=f);return a},magnitude:function(b){b=a.alg.number(b);var d=Math.pow(10,(b|0).toString().length-1);return Math.ceil(b/d)*d},escapeString:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},use:function(a,b,d){a||(a=null);return"function"===typeof b?b.apply(a,d):void 0},run:function(a){"function"===
typeof a&&a();return this},bool:function(a,b){switch(typeof a){case "undefined":return b||!1;case "string":return/true/i.test(a)}return a?!0:!1},number:function(a,b){var d=+a;return d==a||d===d?d:b||0},string:function(a,b){return"string"===typeof a?a:a||0===a?""+a:b||""},object:function(a,b){return a&&"object"===typeof a?a:b||{}},date:function(a,b){return input instanceof Date||"[object Date]"===Object.prototype.toString.call(input)?a:new Date},byte:function(a){if("undefined"===typeof Int8Array){a=
+a;for(a=(a===a?a:0)&255;-128>a;)a+=256;for(;127<a;)a-=256;return a}var b=new ArrayBuffer(1),b=new Int8Array(b);b[0]=a;return b[0]},ubyte:function(a){if("undefined"===typeof Uint8Array)return a=+a,(a===a?a:0)&255;var b=new ArrayBuffer(1),b=new Uint8Array(b);b[0]=a;return b[0]},short:function(a){if("undefined"===typeof Int16Array){a=+a;for(a=(a===a?a:0)&65535;-32768>a;)a+=65536;for(;32767<a;)a-=65536;return a}var b=new ArrayBuffer(2),b=new Int16Array(b);b[0]=a;return b[0]},ushort:function(a){if("undefined"===
typeof Uint16Array)return a=+a,(a===a?a:0)&65535;var b=new ArrayBuffer(2),b=new Uint16Array(b);b[0]=a;return b[0]},int:function(a){if("undefined"===typeof Int32Array){a=+a;for(a=(a===a?a:0)&4294967295;-2147483648>a;)a+=4294967296;for(;2147483647<a;)a-=4294967296;return a}var b=new ArrayBuffer(4),b=new Int32Array(b);b[0]=a;return b[0]},uint:function(a){if("undefined"===typeof Int32Array)return a=+a,a=(a===a?a:0)%4294967296,0>a?-1*a:a;var b=new ArrayBuffer(4),b=new Uint32Array(b);b[0]=a;return b[0]},
float:function(a){if("undefined"===typeof Float32Array)return a=+(+a).toPrecision(8),a==a?a:0;var b=new ArrayBuffer(4),b=new Float32Array(b);b[0]=a;return+b[0].toPrecision(8)},double:function(a){if("undefined"===typeof Float64Array)return a=+(+a).toPrecision(16),a==a?a:0;var b=new ArrayBuffer(8),b=new Float64Array(b);b[0]=a;return b[0]},makeEnum:function(b,d){d=d||{};var c=1;a.alg.arrEach(b,function(a,b){d[a]=c;c*=2});return d},rad2deg:function(b,d){return 180*a.alg.number(b,d)/Math.PI},deg2rad:function(b,
d){return a.alg.number(b,d)*Math.PI/180},sliceArray:function(a,b){var d=a;try{d=Array.prototype.slice.call(a||[],b||0)}catch(c){d=[]}return d},sortArrayObj:function(b,d,c){var e=a.alg.sliceArray(arguments,2);b.sort(a.alg.__sortArrayObj(d,e));return b},__sortArrayObj:function(b,d){var c;switch(a.env.browser.name){case "IE":case "Edge":c=function(a,c){for(var e=0;a&&c&&e<d.length;e++)a=a[d[e]],c=c[d[e]];var e=b?a:c,p=b?c:a;return e>p?1:e<p?-1:0};break;default:c=function(a,c){for(var e=0;a&&c&&e<d.length;e++)a=
a[d[e]],c=c[d[e]];return b?a>=c:a<=c}}return c},sortArrayNum:function(b,d){b.sort(function(b,c){return d?a.alg.number(b)-a.alg.number(c):a.alg.number(c)-a.alg.number(b)});return b},joinArray:function(b,d){var c,e,q;for(c=1;c<arguments.length;c++)for(d=a.alg.sliceArray(arguments[c]),q=0;q<d.length;q+=8192)e=d.slice(q,q+8192),Array.prototype.push.apply(b,e);return b},bindFn:function(b,d,c){c=c&&c.length?a.alg.sliceArray(c):c?[c]:[];return function(){var e=null;"function"===typeof d&&(e=d.apply(b,c.concat(a.alg.sliceArray(arguments))));
return e}},mergeObj:function(b){function d(a,b,c,e){c.hasOwnProperty(b)&&(e[b]=a)}var c=b,e=a.alg.sliceArray(arguments,1);a.alg.each(e,function(b,c,e,r){b&&r&&a.alg.each(b,d,r)},c);return b},cloneObj:function(b){return b&&"object"===typeof b?a.alg.mergeObj(b.constructor(),b):b},deepCloneObj:function(b){if(!b||"object"!==typeof b)return b;b=this.cloneObj(b);a.alg.each(b,function(b,d,c){c[d]=a.alg.deepCloneObj(b)});return b},keycodes:{KC_Backspace:8,KC_Tab:9,KC_Enter:13,KC_Shift:16,KC_Ctrl:17,KC_Alt:18,
KC_Pause:19,KC_Break:19,KC_CapsLock:20,KC_Escape:27,KC_Space:32,KC_PageUp:33,KC_PageDown:34,KC_End:35,KC_Home:36,KC_LeftArrow:37,KC_UpArrow:38,KC_RightArrow:39,KC_DownArrow:40,KC_Insert:45,KC_Delete:46,KC_0:48,KC_1:49,KC_2:50,KC_3:51,KC_4:52,KC_5:53,KC_6:54,KC_7:55,KC_8:56,KC_9:57,KC_A:65,KC_B:66,KC_C:67,KC_D:68,KC_E:69,KC_F:70,KC_G:71,KC_H:72,KC_I:73,KC_J:74,KC_K:75,KC_L:76,KC_M:77,KC_N:78,KC_O:79,KC_P:80,KC_Q:81,KC_R:82,KC_S:83,KC_T:84,KC_U:85,KC_V:86,KC_W:87,KC_X:88,KC_Y:89,KC_Z:90,KC_LWin:91,
KC_RWin:92,KC_Select:93,KC_Num0:96,KC_Num1:97,KC_Num2:98,KC_Num3:99,KC_Num4:100,KC_Num5:101,KC_Num6:102,KC_Num7:103,KC_Num8:104,KC_Num9:105,KC_NumAsterisk:106,KC_NumPlus:107,KC_NumMinus:109,KC_NumPeriod:110,KC_NumSlash:111,KC_F1:112,KC_F2:113,KC_F3:114,KC_F4:115,KC_F5:116,KC_F6:117,KC_F7:118,KC_F8:119,KC_F9:120,KC_F10:121,KC_F11:122,KC_F12:123,KC_NumLock:144,KC_ScrollLock:145,KC_SemiColon:186,KC_Equal:187,KC_Comma:188,KC_Dash:189,KC_Period:190,KC_FSlash:191,KC_BSlash:220,KC_Grave:192,KC_LBracket:219,
KC_RBracket:221,KC_Apos:222},min:function(b,d){var c=b;a.alg.each(arguments,function(a){c="undefined"===typeof c?a:c;c=c>a?a:c});return c},max:function(b,d){var c=b;a.alg.each(arguments,function(a){c="undefined"===typeof c?a:c;c=c<a?a:c});return c}};a&&Object.defineProperty(a,"alg",{value:b});return b}function g(a){function b(a,c,u){var f=a=a||[];b.fn.isPrototypeOf(a)||("string"===typeof f&&(a=-1===(f.match(/(^\\\<|\<)/g)||[]).indexOf("<")?k.querySelectorAll(f):e(f)),d(a)&&(a=[a]),a=Array.prototype.slice.call(a,
0),a=Object.create(b.fn,{_element:{value:a}}),a.each(function(a){a.__jspyder||(a.__jspyder=h())}));a.use(c,u);return a}function d(b){return a.alg.bool("object"===typeof HTMLElement&&b instanceof HTMLElement||b&&"object"===typeof b&&1===b.nodeType&&"string"===typeof b.nodeName)}function c(a){return d(a)?a.className.replace(/(^\s+)|(\s(?=\s))|(\s+$)/g,"").split(" "):[]}function e(a){var b=k.createElement("div"),d=[];b.innerHTML=a;for(a=0;a<b.children.length;a++)d.push(b.children[a]);return d}if(a.dom)return a.dom;
b.fn={_element:[],get count(){return this._element.length},each:function(b,d){a.alg.arrEach(this._element,b,d);return this},use:function(b,d){a.alg.use(this,b,d);return this},setCss:function(d,c){if(d&&"object"===typeof d){var e=a.alg.each;this.each(function(a,d,p,r){e(r,function(a,b,d,c){c.style[b]=a},a);"function"===typeof c&&b(a,c,[r])},d)}return this},getCss:function(d,c){if(d&&"object"===typeof d){var e=Object.create(d),p=a.alg.each;this.each(function(a,d,e,r){e=getComputedStyle(a);var u=a.style;
r=+d?r.others:r.first;p(r,function(a,b,d,c){d[b]=c.style[b]||c.cStyle[b]},{style:u,cStyle:e});"function"===typeof c&&b(a,c,[r])},{first:d,others:e})}return this},getPosition:function(a){this.each(function(d){var c=d.getBoundingClientRect();b(d).use(a,[c])});return this},exportPosition:function(){var a=null;this.at(0).use(function(){a=this._element[0].getBoundingClientRect()});return a},getOffsetPosition:function(d){this.each(function(){for(var c=this.parentNode,e={top:0,left:0,bottom:0,right:0,x:0,
y:0,height:0,width:0};c&&"static"===getComputedStyle(c).position;)c=c.parentNode;if(c){var p=this.getBoundingClientRect(),f=c.getBoundingClientRect();a.each(e,function(a,b,d){d[b]=f[b]-p[b]})}b(this).use(d,[e])});return this},getAttrs:function(d,c){if(d&&"object"===typeof d){var e=Object.create(d),p=a.alg.each;this.each(function(a,d,e,r){r=d?r.others:r.first;p(r,function(b,d,c){c[d]=a.getAttribute(d)});"function"===typeof c&&b(a,c,[r])},{first:d,others:e})}return this},setAttrs:function(d,c){if(d&&
"object"===typeof d){var e=Object.create(d),p=a.alg.each;this.each(function(a,d,e,r){r=+d?r.others:r.first;p(r,function(a,b,d,c){null===a||"undefined"===typeof a?c.removeAttribute(b):c.setAttribute(b,a)},a);"function"===typeof c&&b(a,c,[r])},{first:d,others:e})}return this},parents:function(a){this.each(function(d,c,e){b(d.parentNode,a,[d])});return this},children:function(a,d){this.each(function(c,e,p){for(c=c.firstElementChild;c;)b(c,a,[c,d]),c=c.nextElementSibling});return this},at:function(d,
c){d=a.alg.uint(d);return b(this._element[d]||null,c)},element:function(a,b){this.at(a,function(){var a=this._element[0];a&&"function"===typeof b&&b.apply(a,[this])});return this},attach:function(a,d){var c=this;b(a).element(0,function(a){var e=k.createDocumentFragment();c.each(b.fn._append,e);this.appendChild(e);a.use(d,c)});return this},attachBefore:function(a,d){var c=this;b(a).element(0,function(a){var e=k.createDocumentFragment();c.each(b.fn._append,e);this.parentNode&&this.parentNode.insertBefore(e,
a);a.use(d,c)});return this},attachAfter:function(a,d){var c=this;b(a).element(0,function(a){var e=k.createDocumentFragment();c.each(b.fn._append,e);this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling);a.use(d,c)});return this},append:function(a){this.element(0,function(){var d=k.createDocumentFragment();b(a).each(b.fn._append,d);this.appendChild(d)});return this},_append:function(a,b,d,c){c.appendChild(a)},insertBefore:function(a){this.element(0,function(){var d=k.createDocumentFragment();
b(a).each(b.fn._append,d);this.parentNode&&this.parentNode.insertBefore(d,this)});return this},insertAfter:function(a){this.element(0,function(){var d=k.createDocumentFragment();b(a).each(b.fn._append,d);this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling)});return this},prepend:function(a){this.element(0,function(){var d=k.createDocumentFragment();b(a).each(function(a,b,d,c){c.appendChild(a)},d);this.insertBefore(d,this.firstChild)});return this},remove:function(){this.each(function(a){a.parentNode&&
a.parentNode.removeChild(a)});return this},setClasses:function(b){this.each(function(b,d,e,p){a.alg.each(p,function(a,b,d,e){"toggle"===a&&(a=-1===c(e).indexOf(b));d=c(e);var p=d.indexOf(b),f=!1;a&&-1===p?(d.push(b),f=!0):a||-1===p||(d.splice(p,1),f=!0);f&&(e.className=d.join(" "))},b)},b);return this},getClasses:function(d,e){this.each(function(d,p,f,r){r=a.alg.number(p)?r.second:r.first;a.alg.each(r,function(a,b,d,e){a=e.classes;e=-1!==c(e.el).indexOf(b);a[b]=e},{el:d,classes:r});b(d,e,[r])},{first:d,
second:Object.create(d)});return this},on:function(b,d){b=(b||"").split(/\s+/);a.alg.each(b,function(b,c,e,p){a.alg.each(p._element,function(a){a.addEventListener(b,d);a.__jspyder.fetch("js-events-"+b)?a.__jspyder.fetch("js-events-"+b).push(d):a.__jspyder.stash("js-events-"+b,[d])})},this);return this},off:function(b,d){b=(b||"").split(/\s+/);var c=this;a.alg.each(b,function(b){a.alg.each(c._element,function(a){var c=a.__jspyder.fetch("js-events-"+b),e=-1;a.removeEventListener(b,d);if(c){for(;0<=
(e=c.indexOf(d));)c[e]=null;c.sort().splice(0,c.indexOf(null))}})})},trigger:function(a){a=(a||"").toString().split(/\s+/);for(var b,d=0;d<a.length;d++)a[d]&&(b=this._eventConstructor(a[d],!0,!0),this.each(function(a){a.dispatchEvent(b)}));return this},_eventConstructor:function(a,d,c){b.fn._eventConstructor="function"===typeof window.Event?function(a,b,d){return new Event(a,{bubbles:b,cancelable:d})}:function(a,b,d){var c=window.document.createEvent("Event");c.initEvent(a,b,d);return c};return b.fn._eventConstructor.apply(this,
arguments)},setHtml:function(a){this.each(function(b){b.innerHTML=a||""});return this},getHtml:function(a){"function"===typeof a&&this.each(function(b){a.call(b,b.innerHTML||"")});return this},getText:function(a){"function"===typeof a&&this.each(function(b){a.call(b,b.textContent||"")});return this},setText:function(a){this.each(function(b){b.textContent=a||""});return this},find:function(d){var c=b(),e=c._element;this.each(function(c){d&&(c=c.querySelectorAll(d),a.alg.joinArray(e,b(c)._element))});
return c},filter:function(a){var d=b(),c=d._element;this.each(function(d){b.fn._matches(d,a)&&c.push(d)});return d},_matches:function(a,d){var c="";a.matches?c="matches":a.matchesSelector?c="matchesSelector":a.msMatchesSelector?c="msMatchesSelector":a.mozMatchesSelector?c="mozMatchesSelector":a.webkitMatchesSelector?c="webkitMatchesSelector":a.oMatchesSelector?c="oMatchesSelector":b.fn._matches=function(a,b){for(var d=(a.document||a.ownerDocument).querySelectorAll(b),c=d.length;0<=--c&&d.item(c)!==
a;);return-1<c};b.fn._matches=function(a,b){return c&&a[c](b)};return this._matches(a,d)},and:function(a){b(a,this._and,[this._element]);return this},_and:function(b){a.alg.joinArray(b,this._element)},template:function(a){this.each(this._template,{self:this,fields:a});return this},_template:function(a,b,d,c){c.self._template_parse(a,c.fields)},_template_parse:function(a,b){var d=Object.keys(b),c,e,p;for(c=0;c<d.length;c++)e=d[c],p=b[e],this._template_insert(a,"${"+e+"}",p);return a},_template_insert:function(a,
b,d){a=a.childNodes;var c,e;for(e=0;e<a.length;e++)c=a[e],3===c.nodeType?this._template_replace(c,b,d):this._template_insert(c,b,d);return!0},_template_replace:function(a,d,c){var e=a.data.indexOf(d),p=a.parentNode,f;if(-1===e)return!1;f=a.splitText(e);f.data=f.data.substr(d.length);b(c).each(function(a){p.insertBefore(a,f)});return!0},setValue:function(a,b){return this.each(function(b){"undefined"!==typeof b.value&&"LI"!==b.tagName?b.value=a:b.setAttribute("value",a)}).use(b)},setOverride:function(a,
b){this.each(function(d){d.__jspyder.override=d.__jspyder.override||{};d.__jspyder.override[a]=b});return this},getOverride:function(a){var b=null;this.each(function(d){d.__jspyder.override&&d.__jspyder.override[a]&&(b=d.__jspyder.override[a],this.stop())});return b},getValue:function(a){var d=this;return d.each(function(c){var e=b(c),p=e.getOverride("getValue");p?e.use(p,[a]):(e="undefined"!==typeof c.value?c.value:c.getAttribute("value"),"LI"===c.tagName&&(e=c.getAttribute("value")),"undefined"!==
e&&d.use(a,[e]))})},exportValue:function(){var a=null;this.getValue(function(b){a=b});return a},getProps:function(b,d){this.each(function(d){a.alg.each(b,function(a,b,c){c[b]=d[b]})});this.use(d,[b]);return this},setProps:function(b){this.each(function(d){a.alg.each(b,function(a,b){d[b]=a})});return this}};b.doc=b(k.documentElement);a&&Object.defineProperty(a,"dom",{value:b});return b}function l(a){function b(c,e,f){c=d.fetch(c);var g=null;c&&"function"===typeof c&&(g=c.apply(a,e));"function"===typeof f&&
f.call(this,g);return this}var d=h();b.register=function(a,b){"string"==typeof a&&("function"!==typeof b&&null!==b||d.stash(a,b));return this};b.registerSet=function(d){d&&"object"===typeof d&&a.alg.each(d,function(a,d){b.register(d,a)});return this};a.extend("lib",b)}function h(){var a={};return{fetch:function(b,d){var c={key:b,value:a[b]};"function"===typeof d&&d(c);return c.value},stash:function(b,d){return a[b]=d}}}var m=c.jspyder,k=c.document||window.document;m||(m=b(c));c[d]||(c[d]=m);return m})(window,
"js");jspyder.extend.fn("ajax",function(){function c(a,b,d){var g=Object.create(c.fn);g.data="object"===typeof b&&b?b:{};g.url="string"===typeof a?a:g.url;g.fn="function"===typeof d?d:g.fn;"function"===typeof d&&d.apply(g);return g}function d(a,d,c,g,l){if(!d)return this;var h=new XMLHttpRequest;h.onreadystatechange=function(){4===this.readyState&&"function"===typeof g&&b.alg.use(b,g,[this,l]);return null};h.open(a,d,!0);c||(c={});c.contentType&&h.setRequestHeader("Content-Type",c.contentType);c.cache||
h.setRequestHeader("Cache-Control","no-cache");h.send();return this}var b=this;c.fn={data:{},url:"",fn:function(){},get:function(a,b){a="function"===typeof a?a:this.fn;d("GET",this.url,this.data,a,b);return this},head:function(a,b){a="function"===typeof a?a:this.fn;d("HEAD",this.url,this.data,a,b);return this},post:function(a,b){a="function"===typeof a?a:this.fn;d("POST",this.url,this.data,a,b);return this}};return c});jspyder.extend.fn("canvas",function(){function c(a){a=a||{};var d=b.dom("<canvas></canvas>"),f={height:b.alg.number(a.height,150),width:b.alg.number(a.width,300)},g=a.css;a=a.alt;d.setAttrs(f);d.setCss(g);d.setHtml(a);return Object.create(c.fn,{canvas:{value:d},queue:{value:[]},context:{value:d._element[0]&&d._element[0].getContext&&d._element[0].getContext("2d")}})}function d(a){a=a||{};a.fill=b.alg.string(a.fill,"#FFF");a.border=b.alg.string(a.border,"transparent");a.borderWidth=b.alg.number(a.borderWidth,
0);a.borderTopWidth=b.alg.number(a.borderTopWidth,a.borderWidth);a.borderRightWidth=b.alg.number(a.borderRightWidth,a.borderWidth);a.borderBottomWidth=b.alg.number(a.borderBottomWidth,a.borderWidth);a.borderLeftWidth=b.alg.number(a.borderLeftWidth,a.borderWidth);a.x=b.alg.number(a.x,0);a.y=b.alg.number(a.y,0);a.height=b.alg.number(a.height,0);a.width=b.alg.number(a.width,0);return a}var b=this;c.fn={canvas:null,context:null,queue:null,attach:function(){this.canvas&&this.canvas.attach(arguments);return this},
remove:function(){this.canvas&&this.canvas.remove();return this},getSize:function(a,d){a=a||{};var c=this.canvas&&this.canvas._element&&this.canvas._element[0],g;c&&(g=c.getBoundingClientRect(),a.width=c.width,a.height=c.height,a.x=g.x,a.y=g.y,b.alg.use(this,d,[a]));return this},exportSize:function(){var a={};this.getSize(a);return a},clear:function(){var a=this;this.getSize({},function(b){a.context.clearRect(0,0,b.width,b.height)});return this},render:function(){this.clear();if(this.context){var a=
this;b.alg.each(this.queue,function(d){b.alg.use(a,d)})}return this},draw:function(a,d){var c=this.cmd[a],g;c&&(g=function(){b.alg.use(this,c,[d])},"function"===typeof g&&(g.settings=d,g.type=a,this.queue&&this.queue.push(g)));return this},cmd:{rectangle:function(a){a=d(a);this.context.fillStyle=a.border;this.context.fillRect(a.x,a.y,a.width,a.height);this.context.fillStyle=a.fill;this.context.fillRect(a.x+a.borderLeftWidth,a.y+a.borderTopWidth,a.width-(a.borderRightWidth+a.borderLeftWidth),a.height-
(a.borderBottomWidth+a.borderTopWidth))},arc:function(a){a=d(a);a.radius=b.alg.number(a.radius,0);a.anticlockwise=b.alg.bool(a.anticlockwise,!1);var c=b.alg.deg2rad(a.angle,0),f=b.alg.deg2rad(a.degrees,360)+c;this.context.beginPath();this.context.arc(a.x,a.y,a.radius,c,f,a.anticlockwise);a.fromcenter&&this.context.lineTo(a.x,a.y);a.closepath&&this.context.closePath();this.context.strokeStyle=a.border;this.context.stroke();this.context.fillStyle=a.fill;this.context.fill()},circle:function(a){a=d(a);
a.degrees=360;this.cmd.arc.call(this,a)},pie:function(a){a=d(a);a.radius=b.alg.number(a.radius,0);a.angle=b.alg.number(a.angle,-90);a.anticlockwise=b.alg.bool(a.anticlockwise,!1);a.closepath=!0;var c=this,f=0,g=0;a.degrees=360;b.alg.use(c,c.cmd.arc,[a]);b.alg.each(a.sections,function(a){f+=b.alg.number(a.value,0)});b.alg.each(a.sections,function(d){var h=b.alg.number(d.value,0)/f*360;d=b.alg.mergeObj({},a,{angle:g+a.angle,degrees:h,fill:d.fill,fromcenter:!0,closepath:!0});g+=h;b.alg.use(c,c.cmd.arc,
[d])})},text:function(a){a=a||{};a.size=b.alg.number(a.size,16);a.font=b.alg.string(a.font,"Arial");a.text=b.alg.string(a.text,"");a.x=b.alg.string(a.x,0);a.y=b.alg.string(a.y,0);a.outline=b.alg.string(a.outline,"transparent");a.fill=b.alg.string(a.fill,"black");a.textalign=b.alg.string(a.textalign,"start");this.context.textAlign=a.textalign;this.context.font=a.size+"px "+a.font;this.context.fillStyle=a.fill;this.context.fillText(a.text,a.x,a.y);this.context.strokeStyle=a.outline;this.context.strokeText(a.text,
a.x,a.y)},line:function(a){a=a||{};a.x=b.alg.number(a.x,0);a.y=b.alg.number(a.y,0);a.width=b.alg.number(a.width,0);a.height=b.alg.number(a.height,0);a.color=b.alg.string(a.color,"black");a.thickness=b.alg.number(a.thickness,1);this.context.strokeStyle=a.color;this.context.lineWidth=a.thickness;this.context.beginPath();this.context.moveTo(a.x,a.y);this.context.lineTo(a.x+a.width,a.y+a.height);this.context.stroke()},barchart:function(a){a=a||{};var d=b.alg.sliceArray(a.sections)||[],c=this.exportSize(),
g=b.alg.number(a.borderWidth,1),l=b.alg.number(a.width,c.width),h=b.alg.number(a.height,c.height),m=b.alg.number(a.x,0),c=b.alg.number(a.y,0),k=b.alg.string(a.fill,"white"),n=b.alg.string(a.border,"black"),w=b.alg.string(a.lineColor,"rgba(0, 0, 0, 0.3)"),v=a.labels||[],t=b.alg.number(a.labelSize,16),p=this,r=b.alg.number(a.min,Infinity),q=b.alg.number(a.max,-Infinity),u,y;a=1.2*t;p.cmd.rectangle.call(this,{width:l,height:h,x:m,y:c,fill:k,borderWidth:g,border:n});l-=2*g;h-=2*g;m+=g;c+=g;h-=a;b.alg.arrEach(d,
function(a){var d=-1;b.alg.arrEach(a.values,function(a){d++;r=b.alg.min(r,a);q=b.alg.max(q,a)});u=b.alg.max(++d,u)});q=1.1*b.alg.magnitude(q);b.alg.iterate(0,5,function(a){p.cmd.line.call(p,{x:m,y:h*(5-a)/5,width:l+m,height:0,color:w});p.cmd.text.call(p,{x:t/3,y:h*(5-a)/5-t/3,size:t,font:"Arial",text:a/5*q|0,textalign:"left"});p.cmd.text.call(p,{x:l-t/3,y:h*(5-a)/5-t/3,size:t,font:"Arial",text:a/5*q|0,textalign:"right"})});l-=50;m+=50;y=l/((d.length+1)*u);var z=m,A=c,x=h-c,B=(l-m)/u;b.alg.iterate(0,
u+1,function(a){p.cmd.line.call(p,{x:z+B*a,y:A,width:0,height:x,color:w});p.cmd.text.call(p,{text:v[a],font:"Arial",size:t,x:z+B*(a+a+1)/2,y:x+t,textalign:"center"})});b.alg.arrEach(d,function(a,c){var f=b.alg.string(a.fill,"black"),n=b.alg.string(a.border,f),g=b.alg.number(a.borderWidth,1);b.alg.arrEach(a&&a.values,function(a,t){var u=h*(b.alg.number(a)/(q||1));p.cmd.rectangle.call(p,{x:z+(y/d.length+c*y+t*B),y:A+(x-A-u),width:y,height:u,fill:f,border:n,borderWidth:g})})})},linechart:function(a){a=
a||{};var d=b.alg.sliceArray(a.sections)||[],c=this.exportSize(),g=b.alg.number(a.borderWidth,1),l=b.alg.number(a.width,c.width),h=b.alg.number(a.height,c.height),m=b.alg.number(a.x,0),c=b.alg.number(a.y,0),k=b.alg.string(a.fill,"white"),n=b.alg.string(a.border,"black"),w=a.labels||[],v=b.alg.number(a.labelSize,16),t=b.alg.string(a.linecolor,"rgba(0, 0, 0, 0.3)"),p=this,r=b.alg.number(a.min,Infinity),q=b.alg.number(a.max,-Infinity),u;a=1.2*v;p.cmd.rectangle.call(this,{width:l,height:h,x:m,y:c,fill:k,
borderWidth:g,border:n});l-=2*g;h-=2*g;m+=g;c+=g;h-=a;b.alg.arrEach(d,function(a){var d=-1;b.alg.arrEach(a.values,function(a){d++;r=b.alg.min(r,a);q=b.alg.max(q,a)});u=b.alg.max(++d,u)});q=1.1*b.alg.magnitude(q);b.alg.iterate(0,5,function(a){p.cmd.line.call(p,{x:m,y:h*(5-a)/5,width:l+m,height:0,color:t});p.cmd.text.call(p,{x:v/3,y:h*(5-a)/5-v/3,size:v,font:"Arial",text:a/5*q|0,textalign:"left"});p.cmd.text.call(p,{x:l-v/3,y:h*(5-a)/5-v/3,size:v,font:"Arial",text:a/5*q|0,textalign:"right"})});var l=
l-50,y=m+=50,z=c,A=h-c,x=(l-m)/(u-1);b.alg.iterate(0,u,function(a){var b=y+x*a;p.cmd.line.call(p,{x:b,y:z,width:0,height:A,color:t});p.cmd.text.call(p,{text:w[a],font:"Arial",size:v,x:b,y:A+v,textalign:"center"})});b.alg.arrEach(d,function(a,d){var c=b.alg.string(a.fill,"transparent"),e=b.alg.string(a.border,"black"),f=b.alg.number(a.borderWidth,1),n=b.alg.string(a.dotfill,c),g=b.alg.string(a.dotBorder,e),u=b.alg.string(a.dotBorderWidth,f);b.alg.number(a.dotRadius,4);b.alg.arrEach(a&&a.values,function(a,
d,c){c=A-(z+A*b.alg.number(c[d-1])/(q||1));a=A-(z+A*b.alg.number(a)/(q||1));var t=y+x*(d-1),r=y+x*d;d&&p.cmd.line.call(p,{x:t,y:c,width:x,height:a-c,color:e,thickness:f});p.cmd.circle.call(p,{y:a,x:r,radius:4,fill:n,border:g,thickness:u});p.cmd.circle.call(p,{y:c,x:t,radius:4,fill:n,border:g,thickness:u})})})}}};return c});jspyder.extend.fn("date",function(){function c(a,b,d){return Object.create(c.fn).setDate(a,b,d)}function d(a,b){var d=[],c=null,f=null,n={},g={};e.alg.arrEach(a,function(a,c){var e=a[b];e&&(d.push(e),n[e]=c,g[c]=e)});d.sort(function(a,b){return b.length-a.length});c="("+d.join("|")+")";f=new RegExp(c,"g");return{string:c,regexp:f,values:n,lookup:g}}function b(a,b){a=e.alg.string(a,"");var d=e.alg.string(b),c={y:0,m:0,d:1,h:0,n:0,s:0,x:0,a:0};e.alg.arrEach(d.match(f),function(b){var d=t[b];if(!d)return b;
var f=d.values,d=(a.match(d.regexp)||[0])[0],n=d.length,g=a.indexOf(d);a=a.substring(g+n);switch(b){case "yy":case "YY":d="20"+d;case "yyyy":case "YYYY":c.y=e.alg.number(d);break;case "MMMM":case "MMM":case "mmmm":case "mmm":d=f[d]+1;case "MM":case "mm":case "M":case "m":c.m=e.alg.number(d)-1;break;case "ddth":case "dth":d=d.substr(0,d.length-2);case "dd":case "d":c.d=e.alg.number(d)||1;break;case "hh":case "h":case "HH":case "H":c.h=e.alg.number(d,0);break;case "am":case "AM":c.a="pm"===d||"PM"===
d?12:0;break;case "nn":case "n":c.n=e.alg.number(d,0);break;case "ss":case "s":c.s=e.alg.number(d,0);break;case "xxx":c.x=e.alg.number(d,0);break;case "xx":c.x=10*e.alg.number(d,0);break;case "x":c.x=100*e.alg.number(d,0)}});return new Date(c.y,c.m,c.d,c.h+c.a,c.n,c.s,c.x)}function a(a,b,d){var c=d?a.getUTCFullYear():a.getFullYear(),n=d?a.getUTCMonth():a.getMonth(),g=d?a.getUTCDate():a.getDate(),l=d?a.getUTCHours():a.getHours(),h=d?a.getUTCMinutes():a.getMinutes(),k=d?a.getUTCSeconds():a.getSeconds(),
m=d?a.getUTCDay():a.getDay(),v=d?a.getUTCMilliseconds():a.getMilliseconds(),w="",C=b;e.alg.arrEach(b.match(f),function(a){var b=t[a]||/\[[^\\]*\]/g.test(a);if(!b)return a;var d=a.length,p=C.indexOf(a),f="";w+=C.substring(0,p);C=C.substring(p+d);switch(a){case "YY":case "yy":f=e.alg.string(c%100);break;case "YYYY":case "yyyy":f=e.alg.string(c,"");break;case "MMMM":case "mmmm":case "MMM":case "mmm":case "MM":case "mm":case "M":case "m":f=b.lookup[n];break;case "dth":case "ddth":case "dd":case "d":f=
b.lookup[g-1];break;case "DDDD":case "dddd":case "DDD":case "ddd":case "DD":case "D":f=b.lookup[m];break;case "am":case "AM":f=b.lookup[l];break;case "HH":case "H":case "hh":case "h":f=b.lookup[l];break;case "nn":case "n":f=b.lookup[h];break;case "ss":case "s":f=b.lookup[k];break;case "xxx":f=(e.alg.string(v)+"00").substr(0,3);break;case "xx":f=(e.alg.string(v)+"0").substr(0,2);break;case "x":f=e.alg.string(v).substr(0,1);break;default:f=a.substring(1,a.length-1)}w+=e.alg.string(f,"")});return w+
C}var e=this;c.fn=c.prototype={_value:null,_format:"",_useUTC:!1,clone:function(){return c(new Date(this._value),this._format,this._useUTC)},utcOffset:function(){return this._value.getTimezoneOffset()},isDst:function(){var a=this.utcOffset(),b=this.clone();return a>b.setMonth(1).utcOffset()||a>b.setMonth(6).utcOffset()},useUTC:function(a){this._useUTC=e.alg.bool(a,!0);return this},isUTC:function(){return this._useUTC},useLocal:function(a){this._useUTC=!e.alg.bool(a,!0);return this},setDate:function(a,
d,f){this._value="undefined"===typeof a?new Date:c.fn.isPrototypeOf(a)?a._value:a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)?new Date(a):"string"===typeof a?b(a,d):"number"===typeof a?new Date(a):new Date(NaN);this._format=e.alg.string(d,"");this._useUTC=e.alg.bool(f,!1);return this},asDate:function(){return this._value},asString:function(b,d,c){return this.isValid()?(b=e.alg.string(b,this._format||g),d=e.alg.bool(d,this._useUTC),a(this._value,b,d)):e.alg.string(c,"")},toString:function(){return Date.prototype.toString.apply(this._value,
arguments)},getTime:function(a,b,d,c,f,n,g){var t=this._value;a=e.alg.bool(a,!0)*t.getFullYear();b=e.alg.bool(b,!0)*t.getMonth();d=e.alg.bool(d,!0)*t.getDate();c=e.alg.bool(c,!0)*t.getHours();f=e.alg.bool(f,!0)*t.getMinutes();n=e.alg.bool(n,!0)*t.getSeconds();g=e.alg.bool(g,!0)*t.getMilliseconds();return Date.prototype.getTime.call(new Date(a,b,d,c,f,n,g))},isValid:function(){return this._value&&!isNaN(this._value.getYear())},addDays:function(a){this._value.setDate(this._value.getDate()+e.alg.number(a));
return this},setDay:function(a){this._value.setDate(e.alg.number(a));return this},getDay:function(){return this._value.getDate()},getDayList:function(a){a=e.alg.string(a,"d");for(var b=this.getDayCount(),d=this.clone(),c=1,f=[];c<=b;)d.setDay(c),f.push(d.asString(a)),c++;return f},getDayCount:function(){return e.alg.number(this.clone().addMonths(1).setDay(0).asString("d"))},getWeekdayList:function(a){a=e.alg.string(a,"dddd");for(var b=this.getWeekdayCount(),d=0,c=null,f=[];d<b;)c=k[d],f.push("undefined"===
typeof c[a]?a:c[a]),d++;return f},getWeekdayCount:function(){return e.alg.number(k.length,0)},getWeekdayOffset:function(){var a={str:this.clone().setDay(1).asString("dddd"),found:0};e.alg.arrEach(this.getWeekdayList(),this._getWeekdayOffset,a);return e.alg.number(a.found,0)},_getWeekdayOffset:function(a,b,d,c){a===c.str&&(c.found=b,this.stop())},addMonths:function(a){this._value.setMonth(this._value.getMonth()+e.alg.number(a));return this},setMonth:function(a){this._value.setMonth(e.alg.number(a)-
1);return this},getMonth:function(){return this._value.getMonth()+1},getMonthList:function(a){a={a:[],f:e.alg.string(a,"mmmm"),c:this.clone()};e.alg.arrEach(h,this._getMonthList_each,a);return a.a},_getMonthList_each:function(a,b,d,c){c.c.setMonth(b+1);c.a.push(c.c.asString(c.f))},getMonthCount:function(){return h.length},addYears:function(a){this._value.setFullYear(this._value.getFullYear()+e.alg.number(a));return this},setYear:function(a){this._value.setFullYear(e.alg.number(a));return this},getYear:function(){return this._value.getFullYear()},
addSeconds:function(a){this._value.setSeconds(this._value.getSeconds()+e.alg.number(a));return this},setSecond:function(a){this._value.setSeconds(e.alg.number(a));return this},getSecond:function(){return this._value.getSeconds()},addMinutes:function(a){this._value.setMinutes(this._value.getMinutes()+e.alg.number(a));return this},setMinute:function(a){this._value.setMinutes(e.alg.number(a));return this},getMinute:function(){return this._value.getMinutes()},addHours:function(a){this._value.setHours(this._value.getHours()+
e.alg.number(a));return this},setHour:function(a){this._value.setHours(e.alg.number(a));return this},getHour:function(){return this._value.getHours()}};var f=/(\[[^\]]*\]|YYYY|YY|yyyy|yy|MMMM|MMM|MM|M|mmmm|mmm|mm|m|dddd|ddd|ddth|dth|dd|d|DDDD|DDD|DD|D|AM|am|HH|H|hh|h|nn|n|ss|s|xxx|xx|x)/g,g="ddd mmm d yyyy hh:mm:ss",l=[{YY:"\\d{2}",YYYY:"\\d{4}",yy:"\\d{2}",yyyy:"\\d{4}"}],h=[{m:"1",mm:"01",mmm:"Jan",mmmm:"January",M:"1",MM:"01",MMM:"JAN",MMMM:"JANUARY"},{m:"2",mm:"02",mmm:"Feb",mmmm:"February",M:"2",
MM:"02",MMM:"FEB",MMMM:"FEBRUARY"},{m:"3",mm:"03",mmm:"Mar",mmmm:"March",M:"3",MM:"03",MMM:"MAR",MMMM:"MARCH"},{m:"4",mm:"04",mmm:"Apr",mmmm:"April",M:"4",MM:"04",MMM:"APR",MMMM:"APRIL"},{m:"5",mm:"05",mmm:"May",mmmm:"May",M:"5",MM:"05",MMM:"MAY",MMMM:"MAY"},{m:"6",mm:"06",mmm:"Jun",mmmm:"June",M:"6",MM:"06",MMM:"JUN",MMMM:"JUNE"},{m:"7",mm:"07",mmm:"Jul",mmmm:"July",M:"7",MM:"07",MMM:"JUL",MMMM:"JULY"},{m:"8",mm:"08",mmm:"Aug",mmmm:"August",M:"8",MM:"08",MMM:"AUG",MMMM:"AUGUST"},{m:"9",mm:"09",mmm:"Sep",
mmmm:"September",M:"9",MM:"09",MMM:"SEP",MMMM:"SEPTEMBER"},{m:"10",mm:"10",mmm:"Oct",mmmm:"October",M:"10",MM:"10",MMM:"OCT",MMMM:"OCTOBER"},{m:"11",mm:"11",mmm:"Nov",mmmm:"November",M:"11",MM:"11",MMM:"NOV",MMMM:"NOVEMBER"},{m:"12",mm:"12",mmm:"Dec",mmmm:"December",M:"12",MM:"12",MMM:"DEC",MMMM:"DECEMBER"}],m=[{d:"1",dd:"01",dth:"1st",ddth:"01st"},{d:"2",dd:"02",dth:"2nd",ddth:"02nd"},{d:"3",dd:"03",dth:"3rd",ddth:"03th"},{d:"4",dd:"04",dth:"4th",ddth:"04th"},{d:"5",dd:"05",dth:"5th",ddth:"05th"},
{d:"6",dd:"06",dth:"6th",ddth:"06th"},{d:"7",dd:"07",dth:"7th",ddth:"07th"},{d:"8",dd:"08",dth:"8th",ddth:"08th"},{d:"9",dd:"09",dth:"9th",ddth:"09rd"},{d:"10",dd:"10",dth:"10th",ddth:"10th"},{d:"11",dd:"11",dth:"11th",ddth:"11st"},{d:"12",dd:"12",dth:"12th",ddth:"12th"},{d:"13",dd:"13",dth:"13th",ddth:"13th"},{d:"14",dd:"14",dth:"14th",ddth:"14th"},{d:"15",dd:"15",dth:"15th",ddth:"15th"},{d:"16",dd:"16",dth:"16th",ddth:"16th"},{d:"17",dd:"17",dth:"17th",ddth:"17th"},{d:"18",dd:"18",dth:"18th",ddth:"18th"},
{d:"19",dd:"19",dth:"19th",ddth:"19th"},{d:"20",dd:"20",dth:"20th",ddth:"20th"},{d:"21",dd:"21",dth:"21st",ddth:"21th"},{d:"22",dd:"22",dth:"22nd",ddth:"22nd"},{d:"23",dd:"23",dth:"23rd",ddth:"23th"},{d:"24",dd:"24",dth:"24th",ddth:"24th"},{d:"25",dd:"25",dth:"25th",ddth:"25th"},{d:"26",dd:"26",dth:"26th",ddth:"26th"},{d:"27",dd:"27",dth:"27th",ddth:"27th"},{d:"28",dd:"28",dth:"28th",ddth:"28th"},{d:"29",dd:"29",dth:"29th",ddth:"29rd"},{d:"30",dd:"30",dth:"30th",ddth:"30th"},{d:"31",dd:"31",dth:"31st",
ddth:"31st"}],k=[{D:"S",DD:"Su",DDD:"SUN",DDDD:"SUNDAY",ddd:"Sun",dddd:"Sunday"},{D:"M",DD:"Mo",DDD:"MON",DDDD:"MONDAY",ddd:"Mon",dddd:"Monday"},{D:"T",DD:"Tu",DDD:"TUE",DDDD:"TUESDAY",ddd:"Tue",dddd:"Tuesday"},{D:"W",DD:"We",DDD:"WED",DDDD:"WEDNESDAY",ddd:"Wed",dddd:"Wednesday"},{D:"T",DD:"Th",DDD:"THU",DDDD:"THURSDAY",ddd:"Thu",dddd:"Thursday"},{D:"F",DD:"Fr",DDD:"FRI",DDDD:"FRIDAY",ddd:"Fri",dddd:"Friday"},{D:"S",DD:"Sa",DDD:"SAT",DDDD:"SATURDAY",ddd:"Sat",dddd:"Saturday"}],n=[{h:"12",hh:"12",
H:"0",HH:"00",AM:"AM",am:"am"},{h:"1",hh:"01",H:"1",HH:"01",AM:"AM",am:"am"},{h:"2",hh:"02",H:"2",HH:"02",AM:"AM",am:"am"},{h:"3",hh:"03",H:"3",HH:"03",AM:"AM",am:"am"},{h:"4",hh:"04",H:"4",HH:"04",AM:"AM",am:"am"},{h:"5",hh:"05",H:"5",HH:"05",AM:"AM",am:"am"},{h:"6",hh:"06",H:"6",HH:"06",AM:"AM",am:"am"},{h:"7",hh:"07",H:"7",HH:"07",AM:"AM",am:"am"},{h:"8",hh:"08",H:"8",HH:"08",AM:"AM",am:"am"},{h:"9",hh:"09",H:"9",HH:"09",AM:"AM",am:"am"},{h:"10",hh:"10",H:"10",HH:"10",AM:"AM",am:"am"},{h:"11",
hh:"11",H:"11",HH:"11",AM:"AM",am:"am"},{h:"12",hh:"12",H:"12",HH:"12",AM:"PM",am:"pm"},{h:"1",hh:"01",H:"13",HH:"13",AM:"PM",am:"pm"},{h:"2",hh:"02",H:"14",HH:"14",AM:"PM",am:"pm"},{h:"3",hh:"03",H:"15",HH:"15",AM:"PM",am:"pm"},{h:"4",hh:"04",H:"16",HH:"16",AM:"PM",am:"pm"},{h:"5",hh:"05",H:"17",HH:"17",AM:"PM",am:"pm"},{h:"6",hh:"06",H:"18",HH:"18",AM:"PM",am:"pm"},{h:"7",hh:"07",H:"19",HH:"19",AM:"PM",am:"pm"},{h:"8",hh:"08",H:"20",HH:"20",AM:"PM",am:"pm"},{h:"9",hh:"09",H:"21",HH:"21",AM:"PM",
am:"pm"},{h:"10",hh:"10",H:"22",HH:"22",AM:"PM",am:"pm"},{h:"11",hh:"11",H:"23",HH:"23",AM:"PM",am:"pm"}],w=[{n:"0",nn:"00"},{n:"1",nn:"01"},{n:"2",nn:"02"},{n:"3",nn:"03"},{n:"4",nn:"04"},{n:"5",nn:"05"},{n:"6",nn:"06"},{n:"7",nn:"07"},{n:"8",nn:"08"},{n:"9",nn:"09"},{n:"10",nn:"10"},{n:"11",nn:"11"},{n:"12",nn:"12"},{n:"13",nn:"13"},{n:"14",nn:"14"},{n:"15",nn:"15"},{n:"16",nn:"16"},{n:"17",nn:"17"},{n:"18",nn:"18"},{n:"19",nn:"19"},{n:"20",nn:"20"},{n:"21",nn:"21"},{n:"22",nn:"22"},{n:"23",nn:"23"},
{n:"24",nn:"24"},{n:"25",nn:"25"},{n:"26",nn:"26"},{n:"27",nn:"27"},{n:"28",nn:"28"},{n:"29",nn:"29"},{n:"30",nn:"30"},{n:"31",nn:"31"},{n:"32",nn:"32"},{n:"33",nn:"33"},{n:"34",nn:"34"},{n:"35",nn:"35"},{n:"36",nn:"36"},{n:"37",nn:"37"},{n:"38",nn:"38"},{n:"39",nn:"39"},{n:"40",nn:"40"},{n:"41",nn:"41"},{n:"42",nn:"42"},{n:"43",nn:"43"},{n:"44",nn:"44"},{n:"45",nn:"45"},{n:"46",nn:"46"},{n:"47",nn:"47"},{n:"48",nn:"48"},{n:"49",nn:"49"},{n:"50",nn:"50"},{n:"51",nn:"51"},{n:"52",nn:"52"},{n:"53",
nn:"53"},{n:"54",nn:"54"},{n:"55",nn:"55"},{n:"56",nn:"56"},{n:"57",nn:"57"},{n:"58",nn:"58"},{n:"59",nn:"59"}],v=[{s:"0",ss:"00"},{s:"1",ss:"01"},{s:"2",ss:"02"},{s:"3",ss:"03"},{s:"4",ss:"04"},{s:"5",ss:"05"},{s:"6",ss:"06"},{s:"7",ss:"07"},{s:"8",ss:"08"},{s:"9",ss:"09"},{s:"10",ss:"10"},{s:"11",ss:"11"},{s:"12",ss:"12"},{s:"13",ss:"13"},{s:"14",ss:"14"},{s:"15",ss:"15"},{s:"16",ss:"16"},{s:"17",ss:"17"},{s:"18",ss:"18"},{s:"19",ss:"19"},{s:"20",ss:"20"},{s:"21",ss:"21"},{s:"22",ss:"22"},{s:"23",
ss:"23"},{s:"24",ss:"24"},{s:"25",ss:"25"},{s:"26",ss:"26"},{s:"27",ss:"27"},{s:"28",ss:"28"},{s:"29",ss:"29"},{s:"30",ss:"30"},{s:"31",ss:"31"},{s:"32",ss:"32"},{s:"33",ss:"33"},{s:"34",ss:"34"},{s:"35",ss:"35"},{s:"36",ss:"36"},{s:"37",ss:"37"},{s:"38",ss:"38"},{s:"39",ss:"39"},{s:"40",ss:"40"},{s:"41",ss:"41"},{s:"42",ss:"42"},{s:"43",ss:"43"},{s:"44",ss:"44"},{s:"45",ss:"45"},{s:"46",ss:"46"},{s:"47",ss:"47"},{s:"48",ss:"48"},{s:"49",ss:"49"},{s:"50",ss:"50"},{s:"51",ss:"51"},{s:"52",ss:"52"},
{s:"53",ss:"53"},{s:"54",ss:"54"},{s:"55",ss:"55"},{s:"56",ss:"56"},{s:"57",ss:"57"},{s:"58",ss:"58"},{s:"59",ss:"59"}],t={yy:d(l,"yy"),yyyy:d(l,"yyyy"),YY:d(l,"YY"),YYYY:d(l,"YYYY"),m:d(h,"m"),mm:d(h,"mm"),mmm:d(h,"mmm"),mmmm:d(h,"mmmm"),M:d(h,"M"),MM:d(h,"MM"),MMM:d(h,"MMM"),MMMM:d(h,"MMMM"),d:d(m,"d"),dd:d(m,"dd"),dth:d(m,"dth"),ddth:d(m,"ddth"),D:d(k,"D"),DD:d(k,"DD"),DDD:d(k,"DDD"),DDDD:d(k,"DDDD"),ddd:d(k,"ddd"),dddd:d(k,"dddd"),am:d(n,"am"),AM:d(n,"AM"),h:d(n,"h"),hh:d(n,"hh"),H:d(n,"H"),HH:d(n,
"HH"),n:d(w,"n"),nn:d(w,"nn"),s:d(v,"s"),ss:d(v,"ss"),xxx:!0,xx:!0,x:!0};return c});jspyder.extend.fn("dialog",function(){function c(b){b=b||{};var a=d.dom(c.fn._template),e=Object.create(c.fn,{_element:{value:a},_buttonDefs:{value:[]}});e.setDimensions(b.width,b.height);a.find("i.button-close").on("click",function(a){e.remove()});b.noclose&&a.find("i.button-close").remove();b.title?e.setTitle(b.title):b.titleHtml&&e.setTitleHtml(b.titleHtml);b.body?e.setBody(b.body):b.bodyHtml&&e.setBodyHtml(b.bodyHtml);b.buttons&&e.setButtons(b.buttons);b.parent&&e.attach(b.parent);return e}var d=
this;c.alert=function(b){var a=c({titleHtml:d.alg.string(b.title,"Alert"),bodyHtml:d.alg.string(b.message,""),noclose:!0,parent:b.parent||document.body,height:b.height,width:b.width,buttons:[{text:"OK",value:"OK",click:function(d){a.remove();"function"===typeof b.callback&&b.callback()}}]});return a};c.confirm=function(b){var a=c({titleHtml:d.alg.string(b.title,"Alert"),bodyHtml:d.alg.string(b.message,""),noclose:!0,parent:b.parent||document.body,height:b.height,width:b.width,buttons:[{text:"OK",
value:"OK",click:function(d){a.remove();"function"===typeof b.callback&&b.callback(!0)}},{text:"Cancel",value:"Cancel",click:function(d){a.remove();"function"===typeof b.callback&&b.callback(!1)}}]});return a};c.query=function(b){var a=c({titleHtml:d.alg.string(b.title,"Alert"),bodyHtml:d.alg.string(b.message,""),noclose:!0,parent:b.parent||document.body,height:b.height,width:b.width,buttons:[{text:"Yes",value:"Yes",click:function(d){a.remove();"function"===typeof b.callback&&b.callback(!0)}},{text:"No",
value:"No",click:function(d){a.remove();"function"===typeof b.callback&&b.callback(!1)}}]});return a};c.fn={_element:null,_buttonDefs:null,_template:'<div class="js-dialog-background"><div class="js-dialog"><div class="js-dialog-header"><span class="title-container"></span><span class="dialog-buttons"><i class="button-close close"></i></span></div><div class="js-dialog-body"><div class="body-container"></div></div><div class="js-dialog-footer"><div class="footer-container"></div></div></div></div>',
_height:237.2,_width:498,_buttonFactory:function(b){b=["<div>",b,"</div>"].join("");return d.dom(b)},setBody:function(b){this._element&&this._element.find(".body-container").setHtml("").append(b);return this},setBodyHtml:function(b){this._element&&this._element.find(".body-container").setHtml(b);return this},setTitle:function(b){this._element&&this._element.find(".title-container").setHtml("").append(b);return this},setTitleHtml:function(b){this._element&&this._element.find(".title-container").setHtml(b);
return this},setButtons:function(b){if(this._element){var a=this._element.find(".footer-container").setHtml(""),c=d.form();d.alg.each(b,function(b,g){b=d.alg.mergeObj({},b,{type:"button"});c.addField("button-"+g,b);a.append(c.exportField("button-"+g))})}return this},setDimensions:function(b,a){return this.setHeight(a).setWidth(b)},setHeight:function(b){this._element&&(b=d.alg.number(b,this._height)+"px",this._element.find(".js-dialog-body").setCss({"max-height":b}));return this},setWidth:function(b){this._element&&
(b=d.alg.number(b,this._width)+"px",this._element.find(".js-dialog-body").setCss({width:b}));return this},attach:function(b){this._element&&this._element.attach(b);return this},remove:function(){this._element&&this._element.remove();return this}};return c});js.extend.fn("download",function(){function c(a){var b=Object.create(c.fn);a=a||{};b.setName(a.name).setType(a.type).setData(a.data).setCharset(a.charset);return b}function d(d,c,e){c=a.alg.string(c,f);d=a.alg.string(d,"download.txt");if(k.test(e))return n?n(v(e),d):b(e);e=e instanceof h?e:new h([e],{type:c});if(n)return n(e,d);if(g)return"Chrome"===a.env.browser.name&&c!==f&&(e=m.call(e,0,e.size,f)),b(d,g.createObjectURL(e));if("string"===typeof e||e instanceof String)return b("data:"+c+w(e));d=
new FileReader;d.onload=function(a){b(this.result)};d.readAsDataURL(e);return!0}function b(b,d){var c={download:null},e={href:d,download:b},n=a.dom("<a></a>").getProps(c),g="data:"+d.replace(t,f);null!==c.download?n.setAttrs(e).on("send-click",function(a){this.click();n.remove();l(d)}).attach(document.body).trigger("send-click"):"Safari"===a.env.browser.name?window.open(g)||(location.href=g,l(d)):a.dom("<iframe></iframe>").setCss({position:"fixed",left:"-9000000px",width:"1em",height:"1em"}).setProps({src:g}).on("load",
function(a){this.remove();l(d)}).attach(document.body);return!0}var a=window.jspyder;c.fn={save:function(a){a=a||{};d(a.name||this._name,a.type||this._type,a.data||this._data);return this},saveText:function(a){a=a||{};q(a.data||this._data,a.name||this._name,a.charset||this._charset);return this},saveMime:function(a){a=a||{};var b=(a.name||this._name).split("."),d=a.data||this._data,c=a.type||this._type;a=a.charset||this._charset;var e=".txt";1<b.length&&(e=b.pop());b=b.join("");r(d,b,e,c,a);return this},
setName:function(b){this._name=a.alg.string(b,"download");return this},getName:function(){return this._name},setType:function(b){this._type=a.alg.string(b,f);return this},getType:function(){return this._type},setData:function(a){this._data=a||"";return this},getData:function(){return this._data},setCharset:function(a){this._charset=a||"UTF-8";return this},getCharset:function(){return this._charset}};var e=window,f="application/octet-stream",g=window.URL||window.webkitURL||window,l=function(b){setTimeout(a.alg.bindFn(g,
g.revokeObjectURL,[b]),3E5)},h=e.Blob||e.MozBlob||e.WebKitBlob||null,m=h&&(h.prototype.slice||h.prototype.webkitSlice),k=/^data\:[\w+\-]+\/[\w+\-]+[,;]/,n=e.navigator.msSaveOrOpenBlob||e.navigator.msSaveBlob?function(){var b=e.navigator;return a.alg.use(b,b.msSaveOrOpenBlob||b.msSaveBlob,arguments)}:null,w=function(a){var b=e.btoa;w=e.btoa?function(a){return";base64,"+b(a)}:function(a){return","+encodeURIComponent(a)};return w(a)},v=function(b,d){var c=b.split(/[:;,]/),e=c[1],f=("base64"===c[2]?atob:
decodeURIComponent)(c.pop()),c=f.length,n=new Uint8Array(c);a.alg.iterate(0,c,function(a){n[a]=f.charCodeAt(a)});return new h([n],{type:e})},t=/^data:([\w\/\-\+]+)/,p={"UTF-8":"","UTF-16":"\ufeff","UTF-32":"\x00\ufeff","UTF-7":"+/v8","UTF-1":"\u00f7dL"},r=function(b,c,e,f,n){r=window.Blob?function(b,c,e,f,n){n=a.alg.string(n,"UTF-8");c=a.alg.string(c,"download");b=b||"";(e=a.alg.string(e,""))&&(c+="."+e);b=new window.Blob([(p[n]||"")+b],{type:f+";charset="+n});d(c,f,b)}:"IE"===a.env.browser&&9>=a.env.browserVersion?
function(b,d,c,e,f){f=a.alg.string(f,"UTF-8");d=a.alg.string(d,"download");b=b||"";a.dialog.alert({title:"Alert",message:["Because you are using Internet Explorer ",a.env.browserVersion,', your download "',d,".",c,'" has been changed to "',d,'.txt".  It is recommended that this value be changed in the save menu, or after the file has been downloaded.'].join("")});q(b,d,f)}:function(b,d,c,e,f){f=a.alg.string(f,"UTF-8");d=a.alg.string(d,"download");q(b||"",d+"."+c,f)};return r.apply(this,arguments)},
q=function(b,c,e){b=b.replace(/\r?\n/g,"\r\n");q=window.Blob?function(b,c,e){e=a.alg.string(e,"UTF-8");c=a.alg.string(c,"download");b=new h([b||""],{type:"text/plain;charset="+e});d(c,"text/text",b)}:function(b,d,c){c=a.alg.string(c,"UTF-8");d=a.alg.string(d,"download");b=b||"";var e="",f=window.frames.saveTxtWindow;if(!f&&(f=document.createElement("iframe"),f.id="saveTxtWindow",f.style.display="none",document.body.insertBefore(f,null),f=window.frames.saveTxtWindow,!f&&(f=window.open("","_temp","width=100,height=100"),
!f)))return window.alert("Sorry, download file could not be created."),!1;e=f.document;e.open("text/html","replace");e.charset=c;/\.htm(l)?$/i.test(d)?(e.close(),e.body.innerHTML="\r\n"+b+"\r\n"):(/\.txt$/i.test(d)||(d+=".txt"),e.write(b),e.close());e=e.execCommand("SaveAs",null,d);f.close();return e};return q.apply(this,arguments)};return c});jspyder.extend.fn("dtype",function(){function c(a,b){var d=Object.create(c);d.obj=a;js.alg.use(d,a);return d}function d(a,b,d){return new TypeError("Attempted to assign "+typeof b+"("+b+") to "+d+' "'+a+'"')}function b(a,b){return new TypeError("Attempted to set a value to a constant "+b+' "'+a+'"')}c.ubyte=function(a,c,f,g){var l=new Uint8Array(new ArrayBuffer(1)),h=!1,m=this.obj,k={get:function(){return l[0]},set:function(c){if(h)throw b(a,"unsigned byte");if(f&&("number"!==typeof c||c!==c))throw d(a,
c,"unsigned byte");l[0]=c;return l[0]},enumerable:!0};k.set(c);h=g;Object.defineProperty(m,a,k);return this};c.string=function(a,c,f,g){var l=String(c),h=!1,m=this.obj,k={get:function(){return l},set:function(c){if(h)throw b(a,"string");if(f&&"string"!==typeof c)throw d(a,c,"string");return l=String(c)},enumerable:!0};k.set(c);h=g;Object.defineProperty(m,a,k);return this};c.uchar=function(a,c,f,g){var l=new Uint16Array(new ArrayBuffer(2)),h=!1,m=this.obj,k={get:function(){return String.fromCharCode(l[0])},
set:function(c){if(h)throw b(a,"uchar");var e="string"===typeof c&&1===c.length;if(f&&!e&&("number"!==typeof c||c!==c))throw d(a,c,"uchar");l[0]="string"===typeof c?c.charCodeAt(0):+c},enumerable:!0};k.set(c);h=g;Object.defineProperty(m,a,k);return this};c.jsstring=function(a,c,f,g){var l="",h=!1,m=this.obj,k={get:function(){return l.join("")},set:function(c){if(h)throw b(a,"jsstring");if(f&&"string"!==typeof c)throw d(a,c,"jsstring");if("undefined"===typeof c||null===c)c="";l=c},enumerable:!0};k.set(c);
h=g;Object.defineProperty(m,a,k);return this};return c});jspyder.extend.fn("form",function(){function c(b,a){var e=Object.create(c.fn,{_dom:{value:d.dom("<form></form>")},_template:{value:{}}});b&&(b.success&&(e._success=b.success),b.failure&&(e._failure=b.failure),b.reset&&(e._reset=b.reset),b.fields&&e.addFields(b.fields));"function"===typeof a&&a.apply(this);return e}var d=this;c.fn={_success:function(b,a){return this},_failure:function(b,a){return this},_reset:function(){return this},_dom:null,_fields:null,each:function(b,a){d.alg.each(this._fields,
b,a);return this},addFields:function(b){for(var a in b)this.addField(a,b[a]);return this},addField:function(b,a){b=d.alg.string(b,"");a=d.alg.object(a,{});var e=Object.create(c.fn.fieldTemplate),f;d.alg.mergeObj(e,a,{name:b,"default":a.default,value:a.value,values:d.alg.sliceArray(a.values)});f=this.buildControl(e);this._fields||(this._fields={});this._fields[b]={type:e.type,field:f,validate:e.validate,exportValue:e.exportValue,getValue:e.getValue,setValue:e.setValue,ignore:e.ignore,config:e};this.resetFieldValue(b);
return this},registerControl:function(b,a){c.fn.templates[b]=a;return this},registerControlFn:function(b,a){this.registerControl(b,d.alg.use(this,a));return this},buildControl:function(b,a){var c=(this.templates[b.type]||this.templates.input).apply(this,[b]),f=d.alg.string(b.name),g=d.alg.string(b.text),l=!d.alg.bool(b.nolabel,a),f=this.buildLabel(l&&f,l&&g,b.class,b.tooltip),h=this;d.alg.each(b.events,function(a,b){c.on(b,function(b){d.alg.use(this,a,[b,h])})});return f.and(c)},buildLabel:function(b,
a,c,f){b=b&&a?["<label ",b?'for="'+b+'" ':"",c?'class="'+c+'"':"",f?'title="'+f+'"':"",">",a,"</label>"].join(""):"";return d.dom(b)},getField:function(b,a){var c=this.exportField(b);d.alg.use(this,a,[c]);return this},exportField:function(b){return(b=this.exportFieldData(b))?b.field:null},getFieldData:function(b,a){var c=this.exportFieldData(b);d.alg.use(this,a,[c]);return this},exportFieldData:function(b){return this._fields[b]||null},resetFieldValue:function(b){var a=this.exportFieldData(b),d=a.config.default,
a=a.config.value;this.setFieldValue(b,"undefined"!==typeof a?a:d);return this},resetFieldValues:function(){this.each(this._resetFieldValues,this)},_resetFieldValues:function(b,a,d,c){c.resetFieldValue(a)},setFieldValue:function(b,a){var c=this.exportFieldData(b),f=this.exportField(b);f&&(c&&c.setValue?d.alg.use(f,c.setValue,[c,a]):f.setValue(a));return this},getFieldValue:function(b,a){var c=[this.exportFieldValue(b)];d.alg.use(this,a,c);return this},exportFieldValue:function(b){var a=this.exportFieldData(b);
b=this.exportField(b);var c=null;b&&(a&&a.exportValue?c=d.alg.use(b,a.exportValue,[a]):a&&a.getValue?d.alg.use(b,a.getValue,[a,function(a){c=a}]):c=b.exportValue());return c},templates:{},values:function(b){var a={},d,c,g=function(b){a[c]=d};for(c in this._fields)d=this._fields[c].field,a[c]=null,d.getValue(g);b.apply(this,[a]);return this},fieldTemplate:{type:"input",values:[]},submit:function(b,a){b="function"===typeof b?b:this._success;a="function"===typeof a?a:this._failure;this.validate(function(c,
f){d.alg.use(this,f?a:b,[c,f])});return this},reset:function(b){this.resetFieldValues();d.alg.use(this,"function"===typeof b?b:this._reset);return this},validate:function(b){var a=this,d={},c=null;this.each(function(b,l){var h=!0,m=a.exportFieldValue(l);if(!b.ignore){switch(typeof b.validate){case "function":h=b.validate(a);break;case "boolean":h=b.validate}b.config.required&&!m&&(h=!1);(h?d:c||(c={}))[l]=m}});b.apply(this,[d,c]);return this},attach:function(b,a){var d=this._dom,c=this._fields,g;
for(g in c);"function"===typeof b&&b.apply(d,[this,d,a]);return this},compile:function(b,a,d){return this._compiler(b,a,d,"compile")},compileExplicit:function(b,a,d){return this._compiler(b,a,d,"compileExplicit")},compileDom:function(b,a,c){if((b=d.dom(b))&&b.getHtml){var f=this;b.getHtml(function(d){f._compiler(d,a,c,b)})}return b},_compiler:function(b,a,c,f){var g=null;if("string"!==typeof f)g=f;else d.template(a)[f](b,null,function(a){g=d.dom(a)});this._dom=g;var l={};d.alg.each(this._fields,function(a,
b){l[b]=a.field});g.template(l||{});"function"===typeof c&&c.apply(this,[g]);return g}};c.registerControl=c.fn.registerControl;c.registerControlFn=c.fn.registerControlFn;c.registerControlFn("input",function(){function b(a,b){this.setValue(d.alg.string(b))}return function(a){var c=d.alg.string(a.name),f=d.alg.string(a.class),g=d.alg.string(a.type,"text"),c=['<input class="',f,'" name="',c,'"',a.readonly?' readonly="readonly"':"",' data-type="',g,'"></input>'].join("");a.setValue=b;return d.dom(c)}}).registerControlFn("date",
function(){function b(a){var c=Object.create(b.fn);c.today=d.date();c.date=d.date(a.value,a.format);c.format=d.alg.string(a.format,c.format);return c}b.fn={dom:null,title:null,tiles:null,prev:null,next:null,input:null,today:null,date:null,DOCDOM:d.dom(document.documentElement),navMonth:!1,titleMonth:"mmm yyyy",titleYear:"yyyy",format:"yyyy-mm-dd",clear:function(){this.dom&&this.dom.remove();this.input=this.next=this.prev=this.tiles=this.title=this.dom=null;this.navMonth=!1;this.today=d.date();return this},
load:function(){var a=d.dom(this.calendarHtml),b=this;this.today=d.date();this.dom=a;this.title=a.find(".date-picker-title");this.tiles=a.find(".calendar-tiles");this.prev=a.find(".date-picker-prev");this.next=a.find(".date-picker-next");this.prev.on("click",function(a){b.prevNextClick(-1)});this.next.on("click",function(a){b.prevNextClick(1)});this.setTitle();this.monthlistInit();a.on("click",this.preventClose);return this},setTitle:function(a){var b=this;b.title.setHtml(this.date.asString(this.navMonth?
this.titleMonth:this.titleYear));this.input.getValue(function(d){(a||d)&&this.setValue(b.date.asString(this.format))});return this},setTiles:function(a){this.tiles.setHtml(a);return this},enableClose:function(){this.pause=!1},preventClose:function(){this.pause=!0},prevNextClick:function(a){this.date[this.navMonth?"addMonths":"addYears"](a);this.setTitle();this.navMonth?this.monthClick(this):this.monthlistInit();this.preventClose()},monthlistInit:function(){function a(d){b.date.setMonth(d);b.monthClick(b)}
var b=this;this.months="";d.alg.arrEach(this.date.getMonthList("mmm"),this.monthlistBuilder,this);this.setTiles(b.months);this.tiles.find(".month").on("click",function(b){d.dom(this).getValue(a)})},monthlistBuilder:function(a,b,d,c){d=c.today.getYear()===c.date.getYear();var h=b+1===c.today.getMonth();c.months+=['<div class="month ',d&&h?"today":"",'" value="',b+1,'">',a,"</div>"].join("")},monthClick:function(){var a=this;a.today=d.date();var b=a.date.getWeekdayList("DD"),c=a.date.getDayList("d"),
l=0,h={html:"",wlen:b.length,offset:a.date.getWeekdayOffset(),calStruct:a,today:a.today.getMonth()===a.date.getMonth()&&d.date().getDay()};for(d.alg.arrEach(b,a.buildWeekdays,h);l<h.offset;)this.buildNumberedDays("",l-h.offset,null,h),l++;d.alg.arrEach(c,this.buildNumberedDays,h);a.navMonth=!0;a.setTiles(h.html);a.tiles.find(".date").on("click",function(b){d.dom(this).getValue(function(b){a.date.setDay(b);a.setTitle(!0)});a.enableClose()});a.setTitle();a.preventClose()},buildWeekdays:function(a,b,
d,c){c.html+=['<div class="date-title date-title-index-',b+1,'" style="width:',100/c.wlen,'%">',a,"</div>"].join("")},buildNumberedDays:function(a,b,c,l){var h=l.calStruct.today.getYear()===l.calStruct.date.getYear(),m=l.calStruct.today.getMonth()===l.calStruct.date.getMonth(),k=l.calStruct.today.getDay()===b+1;l.html+=['<div class="date ',h&&m&&k?"today":"",'" value="',b+1,'" style="width:',100/l.wlen,"%;",d.alg.bool(c)?"":"visibility: hidden;",'">',a,"</div>"].join("")},calendarHtml:'<div class="js-control js-control-date-picker"><div class="date-picker-header"><i class="chevron-left date-picker-prev"></i><h4 class="date-picker-title">${YEAR}</h4><i class="chevron-right date-picker-next"></i></div><div class="calendar-tiles"></div></div>'};
var a={type:"input"};return function(c){var f=this.buildControl(d.alg.mergeObj({},c,a),!0),g=b(c);f.filter("input").on("click",function(a){a={readonly:null};d.dom(this).getAttrs(a);a.readonly||(a=this.value||c.value||c.default||new Date,g.clear(),g.input=d.dom(this),g.date.setDate(a,g.format),g.load().preventClose(),d.dom(this.parentNode).append(g.dom),g.DOCDOM.on("click",function m(a){if(g.pause)return g.enableClose();g.clear();g.DOCDOM.off("click",m)}))});c.exportValue=function(){return f.exportValue()?
g.date.asDate():null};c.setValue=function(a,b){g.date.setDate(b||NaN,g.format);this.setValue(g.date.asString(g.format))};return f}}).registerControlFn("button",function(){function b(a,b){return function(c){var g={readonly:null};d.dom(this).getAttrs(g);g.readonly||d.alg.use(this,b,[c,a])}}return function(a){a.nolabel=!0;var c=d.alg.string(a.class,""),f=d.alg.string(a.icon,""),g=d.alg.string(a.text,""),l=d.alg.string(a.name,""),h=d.alg.string(a.value,""),c=['<div class="js-control js-control-button ',
c,'"',a.readonly?' readonly="true"':"",' name="',l,'">','<i class="'+f+'"></i>','<span class="button-text" data-buttontext="'+g+'"></span>',"</div>"].join("");return d.dom(c).setValue(h).on("click",b(this,a.click))}}).registerControlFn("buttonset",function(){var b={type:"button"};return function(a){for(var c=d.dom(),f=0;f<a.buttons.length;f++){var g=d.alg.mergeObj({readonly:a.readonly},a.buttons[f],b);g.class+=" js-buttonset";c.and(this.buildControl(g,!0))}return c}}).registerControlFn("submit",function(){function b(a){return function(b){b=
{readonly:null};d.dom(this).getAttrs(b);b.readonly||a.submit()}}var a={type:"button",nolabel:!0};return function(c){c=this.buildControl(d.alg.mergeObj(c,a),!0);c.on("click",b(this));return c}}).registerControlFn("reset",function(){function b(a){return function(b){b={readonly:null};d.dom(this).getAttrs(b);b.readonly||a.reset()}}var a={type:"button",nolabel:!0};return function(c){c=this.buildControl(d.alg.mergeObj(c,a),!0);c.on("click",b(this));return c}}).registerControlFn("dropdown",function(){function b(b){return function(c){c=
d.dom(this);var e={readonly:null};c.getAttrs(e);e.readonly||a(c,b)}}function a(a,b){function c(b){a.setValue(b)}function e(b){a.find(".dropdown-text").setHtml(b)}for(var k=b.values,n=d.dom('<ul class="dropdown-selection"></ul>'),w=null,v=w="",v="",t=!0,p=0;p<k.length;)w=k[p],v=d.alg.string(w.text,w.value),w=d.alg.string(w.value,w.text),v=['<li class="item" value="',w,'" title="',v,'">',v,"</li>"].join(""),n.append(v),p++;n.on("click",function(a){a.target.parentNode===this&&d.dom(a.target).getValue(c).getHtml(e);
f.trigger("click");a.stopPropagation&&a.stopPropagation();a.stopImmediatePropagation&&a.stopImmediatePropagation()}).attach(a);f.on("click",function q(b){if(t)return t=!1;n&&n.remove();a=n=null;f.off("click",q)})}function c(a,b){b=d.alg.string(b);var e=this;d.alg.each(a.config.values,function(a){var c=d.alg.string(a.value,a.text);a=d.alg.string(a.text,a.value);b===c&&(e.setValue(c).find(".dropdown-text").setHtml(a),this.stop())})}var f=d.dom(document.documentElement);return function(a){var f=d.alg.string(a.name,
""),h=d.alg.string(a.class,""),m=d.alg.string(a.value,""),k=d.alg.string(a.default,""),f=['<div name="',f,'" tabindex="0"',a.readonly?' readonly="true"':"",' class="input js-control js-control-dropdown ',h,'"><i class="dropdown-arrow arrow-drop-down"></i><span class="dropdown-text">',m||k||"&nbsp;","</span></div>"].join(""),f=d.dom(f);f.on("click",b(a));a.setValue=c;return f}}).registerControlFn("textarea",function(){function b(a,b){b=d.alg.string(b,"");this.setValue(b)}return function(a){var c=d.alg.string(a.name,
""),f=d.alg.string(a.class,""),c=['<textarea name="',c,'"',a.readonly?' readonly="true"':"",' class="input ',f,'"></textarea>'].join("");a.setValue=b;return d.dom(c)}}).registerControlFn("textarea-autosize",function(){function b(a,b){b=d.alg.string(b,"");this.setValue(b)}function a(a){a={readonly:null};d.dom(this).getAttrs(a);if(!a.readonly){div=document.createElement("div");a={"font-family":null,"font-size":null,"font-weight":null,"padding-left":null,"padding-right":null,"padding-bottom":null,"padding-top":null,
"border-left":null,"border-right":null,"border-top":null,"border-bottom":null,"line-height":null,"word-wrap":null};div.style.position="fixed";div.style.left="-65535px";div.style["white-space"]="pre-wrap";div.style["white-space"]="-moz-pre-wrap";div.style["white-space"]="-pre-wrap";div.style["white-space"]="-o-pre-wrap";div.style.width=div.style["min-width"]=div.style["max-width"]=this.clientWidth+"px";document.body.appendChild(div);var b=d.dom(this).getCss(a);d.dom(div).setText(this.value).setCss(a).getPosition(function(a){b.setCss({height:a.height+
20+"px"})}).remove()}}return function(c){var f=d.alg.string(c.name,""),g=d.alg.string(c.class,""),f=['<textarea name="',f,'" class="input js-control js-control-autosize ',g,'"></textarea>'].join("");c.setValue=b;c=d.dom(f);c.on("input",a);return c}}).registerControlFn("radio",function(){function b(a){var b=d.alg.string(a.text,""),c=d.alg.string(a.value,""),e=d.alg.string(a.name,""),m=d.alg.string(a.class,"");a=['<input value="',c,'" name="',e,'" type="radio"',a.readonly?' readonly="true"':"",' class="',
m,'"></input>'].join("");return d.dom(a).and(d.form.fn.buildLabel(e,b,m))}function a(a){return a.config["data-value"]||null}function c(a,b){this.find("input[type=radio]").each(function(a){var c={checked:null},e=null;d.dom(a).getProps(c).getAttrs({value:""},function(a){e=c.checked;b&&b.indexOf&&(c.checked=-1<b.indexOf(a.value))}).setProps(c).trigger(c.checked!==e?"change":"")});return this}return function(f){var g=d.alg.string(f.name,""),l=d.alg.string(f.class,""),h=f.values||[],m=null,m=null,k=d.dom(),
n;f["data-values"]={};for(n=0;n<h.length;n++)m=d.alg.mergeObj({name:g,"class":l,readonly:f.readonly},h[n]),m.class=l+d.alg.string(h[n].class),m=d.dom("<div></div>").append(b(m)),k.and(m);var w=this;k.find("input").on("change",function(a){a={readonly:null};var b=d.dom(this);b.getAttrs(a);a.readonly?w.setFieldValue(g,w.exportFieldValue(g)):b.getValue(function(a){f["data-value"]=a})});f.exportValue=a;f.setValue=c;return k}}).registerControlFn("checkbox",function(){function b(a){var b=[],c;a=a.config["data-values"]=
a.config["data-values"]||{};for(c in a)a[c]&&b.push(c.substring(4));return b}function a(a,b){this.find("input[type=checkbox]").each(function(a){var c={checked:null},e=null;d.dom(a).getProps(c).getAttrs({value:""},function(a){e=c.checked;b&&b.indexOf&&(c.checked=-1<b.indexOf(a.value))}).setProps(c).trigger(c.checked!==e?"change":"")});return this}function c(a){var b=d.alg.string(a.text,""),e=d.alg.string(a.value,""),h=d.alg.string(a.name,""),m=d.alg.string(a.class,"");a=['<input value="',e,'" name="',
h,'" type="checkbox"',a.readonly?' readonly="true"':"",' class="',m,'"></input>'].join("");return d.dom(a).and(d.form.fn.buildLabel(h,b,m))}return function(f){var g=d.alg.string(f.name,""),l=d.alg.string(f.class,""),h=f.values||[],m=null,m=null,k=d.dom(),n;f["data-values"]={};for(n=0;n<h.length;n++)m=d.alg.mergeObj({name:g,readonly:f.readonly},h[n]),m.class=l+d.alg.string(h[n].class),m=d.dom("<div></div>").append(c(m)),k.and(m);k.find("input").on("change",function(a){var b=this.checked;a=d.dom(this);
var c={readonly:null};a.getAttrs(c);c.readonly?this.checked=!b:a.getValue(function(a){f["data-values"]["val-"+d.alg.string(a)]=b})});f.exportValue=b;f.setValue=a;return k}}).registerControlFn("toggles",function(){function b(a){var b=[];this.filter(".js-buttonset").each(function(a){d.dom(a).getAttrs({"data-value":null,"data-checked":null},function(a){a["data-checked"]&&b.push(a["data-value"])})});return b}function a(a,b){this.filter(".js-buttonset").each(function(a){var c={"data-value":"","data-checked":null},
e=null;d.dom(a).getAttrs(c,function(a){e=a["data-checked"];b&&b.indexOf&&(a["data-checked"]=-1<b.indexOf(a["data-value"])?!0:null)}).setAttrs(c).trigger(c["data-checked"]!==e?"change":"")});return this}function c(a){var b=d.alg.string(a.text,""),e=d.alg.string(a.value,""),h=d.alg.string(a.class,"");return d.form.fn.buildControl({type:"button",text:b,class:h+" js-buttonset",readonly:a.readonly,click:function(a,b){d.dom(this).getAttrs({"data-checked":!1,readonly:!1},function(a){a.readonly||(a["data-checked"]=
d.alg.bool(a["data-checked"])?null:!0,this.setAttrs(a))})}}).setAttrs({"data-checked":null,"data-value":e})}return function(f){var g=d.alg.string(f.name,""),l=d.alg.string(f.class,""),h=f.values||[],m=null,m=null,k=d.dom(),n;f["data-values"]={};for(n=0;n<h.length;n++)m=d.alg.mergeObj({name:g,readonly:f.readonly},h[n]),m.class=l+" "+d.alg.string(h[n].class),m=d.dom(c(m)),k.and(m);f.exportValue=b;f.setValue=a;return k}}).registerControlFn("toggles-radio",function(){function b(a){var b=null;this.filter(".js-buttonset[data-checked]").at(0).getAttrs({"data-value":null,
"data-checked":null},function(a){b=a["data-value"]});return b}function a(a,b){this.filter('.js-buttonset[data-checked]:not([data-value="'+b+'"])').setAttrs({"data-checked":null}).trigger("change");this.filter('.js-buttonset[data-value="'+b+'"]:not([data-checked])').setAttrs({"data-checked":!0}).trigger("change");return this}var c={type:"toggles",nolabel:!0};return function(f){var g=d.alg.mergeObj({},f,c),g=this.buildControl(g,!0),l=this;g.on("click",function(a){var b=d.dom(this);d.alg.each(f.values,
function(a){b.getAttrs({"data-value":null,readonly:null},function(a){a.readonly||l.setFieldValue(f.name,a["data-value"])})})});f.exportValue=b;f.setValue=a;return g}}).registerControlFn("toggles-bitwise",function(){function b(a){var b=d.alg.use(this,c,arguments),f=0;d.alg.each(b,function(a){f|=d.alg.number(a)});return f}function a(a,b){b=d.alg.number(b,0);this.filter(".js-buttonset").each(function(a){var c={"data-value":"","data-checked":null},e=null;d.dom(a).getAttrs(c,function(a){e=a["data-checked"];
a["data-value"]=d.alg.number(a["data-value"],0);a["data-checked"]=b===a["data-value"]||b&a["data-value"]?!0:null}).setAttrs(c).trigger(c["data-checked"]!==e?"change":"")});return this}var c=null,f={type:"toggles",nolabel:!0};return function(g){var l=d.alg.mergeObj({},g,f),h=this.buildControl(l,!0);g["data-values"]=l["data-values"];c=c||l.exportValue;g.exportValue=b;g.setValue=a;return h}}).registerControlFn("checkbox-bitwise",function(){function b(a){var b=d.alg.use(this,c,arguments),f=0;d.alg.each(b,
function(a){f|=d.alg.number(a)});return f}function a(a,b){b=d.alg.number(b,0);this.find("input[type=checkbox]").each(function(a){var c={checked:null},e=null;d.dom(a).getProps(c).getAttrs({value:""},function(a){e=c.checked;a.value=d.alg.number(a.value,0);c.checked=b===a.value||b&a.value}).setProps(c).trigger(c.checked!==e?"change":"")});return this}var c=null,f={type:"checkbox",nolabel:!0};return function(g){var l=d.alg.mergeObj({},g,f),h=this.buildControl(l,!0);g["data-values"]=l["data-values"];c=
c||l.exportValue;g.exportValue=b;g.setValue=a;return h}}).registerControlFn("hidden",function(){var b={nolabel:!0,type:"input"},a={display:"none"};return function(c){var f=d.alg.mergeObj({},c,b),g=this.buildControl(f,!0).setCss(a);c.setValue=f.setValue;return g}}).registerControlFn("autocomplete",function(){function b(b,c,e){function g(a){d.dom(this).getAttrs({"data-value":null},function(a){b.setFieldValue(e.name,a["data-value"])})}var v=d.dom('<ul class="js-control js-autocomplete-search"></ul>');
c.on("keydown",function(a){var b={readonly:null};d.dom(this).getAttrs(b);if(!b.readonly)switch(b=!1,a.keyCode){case d.alg.keycodes.KC_UpArrow:b=!0;case d.alg.keycodes.KC_DownArrow:var c=-1;v.find(".search-item").each(function(a,b){var e={selected:!1};d.dom(a).getClasses(e);e.selected&&(c=b)});v.find(".search-item").setClasses({selected:!1}).at(c+(b?-1:1)).setClasses({selected:!0});break;case d.alg.keycodes.KC_Tab:case d.alg.keycodes.KC_Enter:v.find(".search-item.selected").trigger("mousedown")}}).on("blur",
function(a){a={readonly:null};d.dom(this).getAttrs(a);a.readonly||(""===this.value?d.dom(this).setAttrs({"data-value":""}):e.strict&&((a=f(e,this.value,!0))?(this.value=a.text,d.dom(this).setAttrs({"data-value":a.value})):(this.value="",d.dom(this).setAttrs({"data-value":""}))),t.hide())});var t={show:function(b){var c=e.values||[],f=d.alg.number(e.minlen,3),t={match:[],regexp:new RegExp(d.alg.escapeString(b),"i"),depth:d.alg.number(e.length,5)};b.length>=f?(d.alg.arrEach(c,a,t),b={width:0},this.getCss(b),
v.setHtml(t.match.join("")).attachAfter(this).setCss(b).find(".search-item").on("mousedown",g)):v.remove()},hide:function(){v.remove()},getFirst:function(){}};return t}function a(a,b,c,e){b=d.alg.string(a.value);a=d.alg.string(a.text,b);e.regexp.test(a)&&e.match.push('<li class="search-item" data-value="'+b+'" title="'+a+'">'+a+"</li>");e.match.length>=e.depth&&this.stop()}function c(a,b,e,f){b=d.alg.string(a.value);a=d.alg.string(a.text,b);f.find.test(f.searchText?a:b)&&(f.match={value:b,text:a},
this.stop())}function f(a,b,f){b={match:null,find:new RegExp("^"+b+"$"),searchText:f};d.alg.arrEach(a.values,c,b);return b.match}function g(a,b){var c=a.field,e=d.alg.bool(a.config.strict),g="",t={};(g=f(a.config,b,!1))?(t["data-value"]=g.value,g=g.text):e?g=t["data-value"]="":(t["data-value"]=d.alg.string(b,""),g=d.alg.string(b,""));c.setAttrs(t).setValue(g)}function l(a,b){var c="";a.field.getAttrs({"data-value":null},function(a){c=a["data-value"]});c||a.config.strict||a.field.getProps({value:null},
function(a){c=a.value});return c}var h={type:"input"};return function(a){var c=d.alg.mergeObj({},a,h),e=this.buildControl(c,!0),f=null;a.setValue=g;a.exportValue=l;f=b(this,e,a);e.on("focus input",function(a){a={readonly:null};d.dom(this).getAttrs(a);a.readonly||e.getValue(f.show)});return e}}).registerControlFn("number",function(){function b(a,b){b=d.alg.string(b,"");a.field.filter("input").getAttrs({"data-focus":!1},function(f){if(f["data-focus"])b=c(b,a.config.acc);else{var m=b;f=a.config.tsep;
var k=a.config.dec,n=a.config.acc;""===d.alg.string(m,"")?b=m:(m=d.alg.number(m,0),f=d.alg.string(f,","),k=d.alg.string(k,"."),"undefined"!==typeof n&&(m=m.toFixed(n)),m=d.alg.string(m,"").split("."),n=[],n[0]=(m[0]||"").replace(/\B(?=(\d{3})+(?!\d))/g,f),m[1]&&n.push(m[1]),b=n.join(k))}this.setValue(b)})}function a(a,b){b=this.filter("input").exportValue();b=b.replace(/([^\d\.])/g,"");return c(b)}function c(a,b){a=d.alg.string(a,"");var e=null;a=a.replace(/([^\-\d\.]+)/g,"");(e=a.split("."))?(e[0]=
d.alg.number(e[0],0),e[1]=d.alg.string(e[1],"0"),a=d.alg.number(e[0]+"."+e[1],0)):a=0;"undefined"!==typeof b&&(a=a.toFixed(b));return a}var f={type:"input"};return function(c){var e=d.alg.mergeObj({},c,f,{"class":d.alg.string(c.class,"")+" data-number"}),e=this.buildControl(e,!0),h=this;c.setValue=b;c.exportValue=a;e.filter("input").on("blur",function(a){a=d.dom(this).setAttrs({"data-focus":null});h.setFieldValue(c.name,a.exportValue())}).on("focus",function(a){a={readonly:null};d.dom(this).getAttrs(a);
a.readonly||(a=d.dom(this).setAttrs({"data-focus":!0}),h.setFieldValue(c.name,a.exportValue()))});return e}}).registerControlFn("currency",function(){var b={type:"number"};return function(a){var c=d.alg.mergeObj({},a,b,{"class":d.alg.string(a.class,"")+" data-currency"}),f=this.buildControl(c,!0),g='<div class="js-control js-control-currency-prefix">'+d.alg.string(a.prefix,"$")+"</div>";Object.defineProperty(a,"acc",{get:function(){return c.acc},set:function(a){c.acc=a}});a.setValue=c.setValue;a.exportValue=
c.exportValue;a.acc=d.alg.number(a.acc,2);return d.dom(g).and(f)}});return c});js.extend.fn("sp",function(){function c(){}function d(a,b,c,d){for(k.alg.use(this,b,[c,d,a]);this._dirtyRows.pop(););this.pull()}function b(a,b,c,d){k.alg.use(this,b,[c,d,a])}function a(a,b,c,d){a=a.getEnumerator();var f=k.alg.each,g=this._columns,q=null,h=q=null;for(this.clearData();a.moveNext();)h={},q=a.get_current(),q={item:q,id:q.get_id(),_row:h},f(g,e,q),this._rows.push(h);b(c,d)}function e(a,b,c,d){b=d.id;var e=d._row,g=!1;c=Object.create(a,{rowID:{value:b},dirty:{get:function(){return g}},
value:{get:function(){return"function"===typeof this.macro?this.macro(e):q},set:function(b){a.internal&&(q=b,g=!0,0>a.list._dirtyRows.indexOf(e)&&a.list._dirtyRows.push(e))}}});var q=a.default;if(a.internal)try{q=d.item.get_item(a.internal),a.rowIDs[b]=q,a.values[q]||(a.values[q]=[]),a.values[q].push(b)}catch(h){k.log.warn("Could not load data from column name "+a.internal)}q=f(a,q);e[a.name]=c}function f(a,b){switch(a.type){case "bitflag":case "number":b=k.alg.number(b);break;case "string":case "text":b=
k.alg.string(b)}return b}function g(a,b,c,d){b(c,d)}function l(a,b,c,d){if(a&&d&&d.filterArray&&d.filterArray.length){b=d.filterArray;d=d.exclude;var e,f,g,h;f=!1;for(c=0;!f&&c<b.length;c++)(e=b[c])&&e.column&&"undefined"!==typeof a[e.column]&&(g=a[e.column].value,h=!0,f||"undefined"===typeof e.gt||(e.gt&&"object"===typeof e.gt?(k.alg.each(e.gt,function(a){(h=h&&!(g>a))||this.stop()}),f=h):f=!(g>e.gt)),f||"undefined"===typeof e.geq||(e.geq&&"object"===typeof e.geq?(k.alg.each(e.geq,function(a){(h=
h&&!(g>=a))||this.stop()}),f=h):f=!(g>=e.geq)),f||"undefined"===typeof e.leq||(e.leq&&"object"===typeof e.leq?(k.alg.each(e.leq,function(a){(h=h&&!(g<=a))||this.stop()}),f=h):f=!(g<=e.leq)),f||"undefined"===typeof e.lt||(e.lt&&"object"===typeof e.lt?(k.alg.each(e.lt,function(a){(h=h&&!(g<a))||this.stop()}),f=h):f=!(g<e.lt)),f||"undefined"===typeof e.eq||(e.eq&&"object"===typeof e.eq?(k.alg.each(e.eq,function(a){(h=h&&g!=a)||this.stop()}),f=h):f=g!=e.eq),f||"undefined"===typeof e.seq||(e.seq&&"object"===
typeof e.seq?(k.alg.each(e.seq,function(a){(h=h&&g!==a)||this.stop()}),f=h):f=g!==e.seq),f||"undefined"===typeof e.neq||(e.neq&&"object"===typeof e.neq?(k.alg.each(e.neq,function(a){(h=h&&g==a)||this.stop()}),f=h):f=g==e.neq),f||"undefined"===typeof e.snq||(e.snq&&"object"===typeof e.snq?(k.alg.each(e.snq,function(a){(h=h&&g===a)||this.stop()}),f=h):f=g===e.snq),f||"undefined"===typeof e.and||(e.and&&"object"===typeof e.and?(k.alg.each(e.and,function(a){(h=h&&(g&a)!==a)||this.stop()}),f=h):f=(g&e.and)!==
e.and),f||"undefined"===typeof e.not||(e.not&&"object"===typeof e.not?(k.alg.each(e.not,function(a){(h=h&&0!==(g&a))||this.stop()}),f=h):f=0!==(g&e.not)),f||"undefined"===typeof e.test||(e.test instanceof RegExp?f=!e.test.test(g):e.test&&"object"===typeof e.test&&(k.alg.each(e.test,function(a){(h=h&&!a.test(g))||this.stop()}),f=h)));(!d&&f||d&&!f)&&this.drop();return this}}function h(a,b,c,d,e){return['<?xml version="1.0"?><?mso-application progid="Excel.Sheet"?>',['<ss:Workbook xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"><ss:Styles><ss:Style ss:ID="1"><ss:Font ss:Bold="1" /></ss:Style></ss:Styles>',
['<ss:Worksheet ss:Name="',a,'"><ss:Table>',function(a,b){function c(b,e,f,g){d.push(['<ss:Cell><ss:Data ss:Type="String">',a[b][g],"</ss:Data></ss:Cell>"].join(""))}var d=[];d.push('<ss:Row ss:StyleID="1">');k.alg.arrEach(b,c,"text");d.push("</ss:Row>");k.alg.arrEach(a,function(a,e){d.push("<ss:Row>");k.alg.arrEach(b,c,"value");d.push("</ss:Row>")});return d.join("")}(c,d),"</ss:Table></ss:Worksheet>"].join(""),"</ss:Workbook>"].join("")].join("")}function m(a,b,c){return["\ufeff",function(a,b){var c=
[];k.alg.arrEach(b,function(b){c.push(['"',a.getColumn(b).text||" ",'"'].join(""))});return c.join(",")}(a,c),"\r\n",function(a,b){function c(a,b,d,f){f.row&&e.push(['"',(f.row[a]||{})[f.type]||"",'"'].join(""))}var d=[],e=null;k.alg.arrEach(a,function(a,f){e=[];k.alg.arrEach(b,c,{row:a,type:"value",r:[]});d.push(e.join(","))});return d.join("\r\n")}(b,c)].join("")}var k=window.jspyder;c.list=function(a,b){window.SP||k.log.warn("Ensure that MicrosoftAjax.js, sp.runtime.js, and sp.js have been loaded before using JSpyder SharePoint Interface");
var d=Object.create(c.list.fn);a&&(a.url&&(d._url=a.url),a.name&&(d._name=a.name),"function"===typeof a.success&&(d._success=a.success),"function"===typeof a.failure&&(d._failure=a.failure),a.caml&&(d._caml=a.caml));d._columns={};d._rows=[];d._dirtyRows=[];k.alg.use(d,b);return d};c.list.fn={_url:"",_name:"",_success:function(){},_failure:function(){},_caml:"<View><Query><Where><Geq><FieldRef Name='ID' /><Value Type='Number'>1</Value></Geq></Where></Query><RowLimit>10000</RowLimit></View>",_columns:{},
_rows:[],_dirtyRows:[],get length(){return this._rows.length},addColumn:function(a,b){var d=Object.create(c.column.fn,{list:{value:this},name:{value:a}});k.alg.mergeObj(d,b);"undefined"===typeof b["default"]&&"number"===d.type&&(d["default"]=0);this._columns[a]=d;return this},addColumns:function(a){k.alg.each(a,function(a,b,c,d){d.addColumn(b,a)},this);return this},getColumn:function(a){return this._columns[a]?this._columns[a]:Object.create(c.column.fn,{list:{value:this},name:{value:a}})},getRow:function(a){return this._rows[k.alg.number(a,
0)]||null},getRowById:function(a){for(var b=null,c=null,d=0;c=this.getRow(d++);)if(c.ID.value===a){b=c;break}return b},eachDirtyRow:function(a,b){var c=this._dirtyRows;"function"===typeof a&&k.alg.each(c,a,b);return this},_createListItem:function(){},getRowCount:function(a){return this._rows.length},pull:function(b,c){var d=new window.SP.ClientContext(this._url),e=d.get_web().get_lists().getByTitle(this._name),f=new window.SP.CamlQuery,h="function"===typeof b?b:this._success,q="function"===typeof c?
c:this._failure;f.set_viewXml(this.caml);e=e.getItems(f);d.load(e);d.executeQueryAsync(k.alg.bindFn(this,a,[e,h]),k.alg.bindFn(this,g,[e,q]));return this},query:function(a){var b=c.query(this).reset();return a instanceof Array?b.filters(a):b.filter(a)},clearData:function(){for(this._rows=[];this._dirtyRows.pop(););k.alg.each(this._columns,function(a){a.rowIDs={};a.values={}});return this},push:function(a,c){var e=new window.SP.ClientContext(this._url),f=e.get_web().get_lists().getByTitle(this._name),
f={clientContext:e,items:[],list:f,self:this};this.eachDirtyRow(this._pushLoopDirtyRows,f);e.executeQueryAsync(k.alg.bindFn(this,d,[f.items,a]),k.alg.bindFn(this,b,[f.items,c]));return this},_pushLoopDirtyRows:function(a,b,c,d){b=a.ID.value;c=c=null;0>a.ID.value?(c=new SP.ListItemCreationInformation,c=d.list.addItem(c),d.newrow=!0):(c=d.list.getItemById(b),d.newrow=!1);d.listItem=c;k.alg.each(a,d.self._pushLoopDirtyRowColumns,d);d.items.push(c);c.update();d.clientContext.load(c)},_pushLoopDirtyRowColumns:function(a,
b,c,d){a.internal&&a.dirty&&"ID"!==a.internal&&d.listItem.set_item(a.internal,a.value)},updateRow:function(a,b){var c=this.getRowById(a),d=k.alg.mergeObj({},b);c&&k.alg.each(c,this._updateRowEach,d);return this},_updateRowEach:function(a,b,c,d){b=d[a.name];c=b!==a.value;"undefined"!==typeof b&&c&&(a.value=b)},createRow:function(a){var b=this._columns;a={row:{},rowID:-1,values:k.alg.mergeObj({},a)};k.alg.each(b,this._createRowEach,a);a.row.ID.value=a.rowID;this._dirtyRows.push(a.row);return this},
_createRowEach:function(a,b,c,d){var e=d.row;b=d.values[a.name];d=Object.create(a,{rowID:{value:d.rowID},dirty:{get:function(){return null!==f}},value:{get:function(){return"function"===typeof this.macro?this.macro(e):f},set:function(b){a.internal&&(f=b)}}});var f="undefined"!==typeof b?b:a.default||null;e[a.name]=d},getPermissions:function(a,b){var c=new window.SP.ClientContext(this._url),d=c.get_web(),e={currentUser:d.get_currentUser(),web:d};c.load(e.currentUser);c.load(d,"EffectiveBasePermissions");
c.executeQueryAsync(k.alg.bindFn(this,this._getPermissionsSuccess,[e,a]),k.alg.bindFn(this,this._getPermissionsSuccess,[null,b]));return this},_getPermissionsSuccess:function(a,b,c,d){var e=this._permissions={};if(a){var f=a.web.get_effectiveBasePermissions();k.alg.each(new window.SP.PermissionKind,function(a,b){e[b]=k.alg.bool(f.has(a))});k.alg.use(this,b,[this._permissions])}else k.alg.use(this,b,[c,d])}};c.query=function(a){return Object.create(c.query.fn,{_list:{value:a}})};c.query.fn={_list:null,
_rows:null,get length(){return this._rows.length},row:function(a){return this._rows[k.alg.number(a)]},reset:function(){this._rows=this._list._rows.slice(0);return this},filter:function(a){a&&k.alg.arrEach(this._rows,l,{filterArray:[a],exclude:!1});return this},filters:function(a){k.alg.arrEach(this._rows,l,{filterArray:a,exclude:!1});return this},excludes:function(a){k.alg.arrEach(this._rows,l,{filterArray:a,exclude:!0});return this},_cleanRows:function(){this._rows.sort();var a=this._rows.indexOf(null);
-1<a&&this._rows.splice(a);return this},data:function(a){k.alg.use(this,a,[this._rows]);return this},sort:function(a,b){k.alg.sortArrayObj(this._rows,b,a,"value");return this},each:function(a){k.alg.arrEach(this._rows,a,this);return this},sum:function(a,b){this.data(function(d){k.alg.each(a,c.query.fn._sum).alg.each(d,c.query.fn._sumRows,a).alg.use(this,b,[a])});return this},_sum:function(a,b,c){c[b]=a.value||a.default},_sumRows:function(a,b,d,e){k.alg.each(a,c.query.fn._sumColumns,e)},_sumColumns:function(a,
b,c,d){switch(a.type){case "number":d[b]=k.alg.number(d[b])+k.alg.number(a.value);break;default:d[b]=a.value}},getValues:function(a,b){function c(a,b,d,e){a[e[b].value]=!0}k.alg.each(a,function(a,b,c){c[b]={}});this.each(function(b){k.alg.each(a,c,b)});k.alg.each(a,function(a,b,c){c[b]=Object.keys(a).sort()});k.alg.use(this,b,[a]);return this},clone:function(){var a=c.query(this._list);a._rows=this._rows.slice(0);return a},toExcelString:function(a,b){return h(a,this._list,this._rows,b)},toCsvString:function(a){return m(this._list,
this._rows,a)}};c.column=function(){};c.column.fn={internal:"",text:"",type:"string",default:"",valueOf:function(){return this.value}};return c});jspyder.extend.fn("template",function(){function c(a){a&&"object"===typeof a||(a={});var b="";return Object.create(c.fn,{_data:{get:function(){return a}},_compiled:{get:function(){return b}},_setData:{value:function(b,c){b===f&&(a=c)}},_setCompiled:{value:function(a,c){a===f&&(b=c)}}})}function d(a,b){for(var c={data:b,tmp:a,lib:e},f=null,u="",y=0,z;f=v.exec(c.tmp);){y=f.index;f=f[0];z=f.length;u+=c.tmp.substring(0,y);c.tmp=c.tmp.substring(y+z);if(w.test(f)){var y=c,A=void 0;z=[];for(var x=void 0,
B=A=void 0,D=void 0,A=f.match(n)[0].substring(1),f=f.substring(f.indexOf("(")+1,f.lastIndexOf(")"));x=g.exec(f);)D=x[0].length,B=x.length,x=x[B-1],f=f.substring(D),x.search(w)?x.search(h)?x.search(l)?x.search(k)?x.search(m)?z.push(d(x,y.data)):z.push(+x):z.push(d(x,y.data)):z.push(x.substring(1,x.length-1)):z.push(d(x.substring(1,x.length-1),y.data)):z.push(d(x,y.data));(x=y.lib.fetch(A))?(A=x.apply(y.data,z),"undefined"!==typeof A&&null!==A&&(f=A)):f="@"+A+"("+z.join(", ")+")"}k.test(f)&&(y=c.data[f.substring(2,
f.length-1)],f="undefined"===typeof y?f:null!==y?y:"");u+=f}return u+=c.tmp}var b=this;if(!b)return console.error("Attempted to load module js-template without loading JSpyder"),null;var a=b.createRegistry(),e=b.createRegistry(),f=(4294967295*Math.random()|0).toString(32),g=/\s*(`(?:[^`\\]|\\.)*`|"(?:[^"\\]|\\.)*"|\d+(?:\.\d+)?|\$\{\D[a-z0-9_]*\})(?:\s*,\s*(?!\)))?/i,l=/"(?:[^"\\]|\\.)*"/i,h=/`(?:[^`\\]|\\.)*`/i,m=/\d+(?:\.\d+)?/,k=/\$\{\D[a-z0-9_]*\}/i,n=/\@\D[a-z0-9_]*/i,w=/\@\D[a-z0-9_]*\((?:\s*(`(?:[^`\\]|\\.)*`|"(?:[^"\\]|\\.)*"|\d+(?:\.\d+)?|\$\{\D[a-z0-9_]*\})(?:\s*,\s*(?!\)))?)*\)/i,
v=/(\@\D[a-z0-9_]*\((?:\s*(`(?:[^`\\]|\\.)*`|"(?:[^"\\]|\\.)*"|\d+(?:\.\d+)?|\$\{\D[a-z0-9_]*\})(?:\s*,\s*(?!\)))?)*\)|\$\{\D[a-z0-9_]*\})/i;c.fn={compile:function(b,c,d){b=a.fetch(b);return this.compileExplicit(b,c,d)},compileExplicit:function(a,c,e){"function"!==typeof c||e||(e=c,c=null);"undefined"===typeof a&&(a="");var g=Object.create(this._data);b.alg.each(c||{},function(a,b,c,d){d[b]=a},g);a=d(a,g);this._setCompiled(f,a);"function"===typeof e&&e.apply(this,[a]);return this},output:function(){return this._compiled},
storeTemplate:function(c,d){d=b.alg.string(d,"");d=d.replace(/\<\!\-\-[^\<]+\-\-\>/g,"").replace(/\<([^\s\>]+)([^\>]+)\/\>/i,"<$1 $2></$1>");a.stash(c,d);return this},storeTemplateXml:function(a,d){a=b.alg.string(a);if(b.ajax){var e={xmls:new XMLSerializer,fn:d};b.ajax(a).get(c.fn._storeTemplateXml_ajax,e)}else b.log.error("Attempted to call jspyder.template.storeTemplateXml() without loading jspyder.ajax module!");return this},_storeTemplateXml_ajax:function(a,d){c.fn._storeTemplateXml_ajax="IE"===
b.env.browser.name&&9>=b.env.browser.version?function(a,d){var e=c.fn._storeTemplateXml_parseXml(a.responseText);b.dom(e.firstChild).children(c.fn._storeTemplateXml_children,d);b.alg.run(d.fn)}:function(a,d){b.dom(a.responseXML.firstChild).children(c.fn._storeTemplateXml_children,d);b.alg.run(d.fn)};return c.fn._storeTemplateXml_ajax.apply(this,arguments)},_storeTemplateXml_parseXml:function(a){try{if("undefined"!=typeof DOMParser){var c=(new DOMParser).parseFromString(a,"text/xml");return c}if("undefined"!=
typeof ActiveXObject)return c=new ActiveXObject("Microsoft.XMLDOM"),c.loadXML(a),c;var d="data:text/xml;charset=utf-8,"+encodeURIComponent(a),e=new XMLHttpRequest;e.open("GET",d,!1);e.send(null);return e.responseXML}catch(f){b.log.error("There was a problem parsing the xml: "+f.message)}return"<templates></templates>"},_storeTemplateXml_children:function(a,b){c.fn.storeTemplate(a.getAttribute("name"),b.xmls.serializeToString(a).replace(/\<[\/]?template[^\>]*\>/g,""))},getTemplate:function(b,c){a.fetch(b,
c);return this},register:function(a,b){"function"===typeof b&&e.stash(a,b);return this},registerSet:function(a){var c=this;b.alg.each(a,function(a,b){c.register(b,a)});return this}};c.storeTemplate=c.fn.storeTempate;c.storeTemplateXml=c.fn.storeTemplateXml;c.getTemplate=c.fn.getTemplate;c.compile=c.fn.compile;c.compileExplicit=c.fn.compileExplicit;c.register=c.fn.register;c.registerSet=c.fn.registerSet;c.registerSet({each:function(a,d,e){a=this[a]||{};var f=Object.create(this),g="",h=c(a);b.alg.each(a,
function(a,b,c,k){f[d]=a;g+=h.compileExplicit(e,f).output()},this);return g},insert_template:function(a){for(var d="",e=Object.create(this),f=1;f<arguments.length;++f)e[arguments[f]]=e[arguments[++f]];e.arguments=b.alg.sliceArray(arguments,1);c(e).compile(a,function(a){d=a});return d},arguments:function(a){a=b.alg.number(a);return this.arguments?this.arguments[a]||"":""},iif:function(a,b,d){var e=c(this);"string"===typeof a&&(a=e.compileExplicit(a).output());return a?e.compileExplicit(b).output():
e.compileExplicit(d).output()},map_size:function(a){return(a=this[a])&&a.length?a.length:"undefined"===typeof a?0:1},add:function(a,c){return b.alg.number(b.alg.number(a)+b.alg.number(c))},"var":function(a,b){if(1===arguments.length)return this[a]||"";this[a]=b;return""},map:function(a){for(var b={},c=1;c<arguments.length;c+=2)b[arguments[c]]=arguments[c+1];this[a]=b;return""},map_item:function(a,b){return(a=this[a])?a[b]:b},js_registry:function(a){a=b.registry.fetch(a);return null===a||"undefined"===
typeof a?"":a},js_log:function(a){console.log(a)},concat:function(a){for(var b=1;b<arguments.length;b++)a+=arguments[b];return a},html:function(a){b.dom("<div>"+a+"</div>").getText(function(b){a=b});return a},escape:function(a){var c=[];a=a.split(/\r?\n/);b.alg.arrEach(a,function(a){var d=[];b.alg.iterate(0,a.length,function(b){d.push("&#",a.charCodeAt(b),";")});c.push(d.join(""))});return c.join("<br />")},tag:function(a,c){a=b.alg.string(a,"br");c=b.alg.string(c,"");var d=/^(area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)\b/i.test(a);
return"<"+a+" "+c+(d?" /":"></"+a)+">"}});return b.template=c});
