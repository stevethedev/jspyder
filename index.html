<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <link type="text/css" rel="stylesheet" href="css/jspyder.css" />
    <link type="text/css" rel="stylesheet" href="css/material-icons.css" />
    <link type="text/css" rel="stylesheet" href="css/gh-pages.css" />
    <script type="text/javascript" src="js/jspyder.js"></script>
</head>

<body><script type="text/javascript">
    js.alg.run(function() {
        var links = [
                { text: "Home", url: "home" },
                { text: "Documentation", url: "docs" },
                { text: "GitHub", url: "github" }
            ],
            data = {
                links: links,
                version: js.env.version
            };
        
        js.lib
            // initializes the main page
            .register("init", function() {
                js.template.storeTemplateXml("./template/templates.xml", function () { 
                    js.template(data).compile("main-page", null, function(html) {
                        js.dom(document.body).append(html);
                        js.lib("init-links");
                    });
                });
            })
            // prepares the links
            .register("init-links", function() {
                js.dom("#main-page-links .main-page-link-item")
                    .on("click", function(event) {
                        var attrs = { "data-link": null };
                        js.dom(this).getAttrs(attrs);
                        js.lib("link-click", [attrs]);
                    });
            })
            // pushes content into the document area
            .register("push-content", function(html) {
                js.dom("#main-page-content").append(html);
            })
            // erases content from the document area
            .register("erase-content", function() {
                js.lib("set-content", [""]);
            })
            // overwrites the current content area
            .register("set-content", function(html) {
                js.dom("#main-page-content").setHtml(html);
            })
            // processes link clicks
            .register("link-click", function(linkAttrs) {
                switch(linkAttrs["data-link"]) {
                    case "github":
                        window.open("https://www.github.com/theorphan/jspyder/");
                        break;
                    case "docs":
                        window.open("http://theorphan.github.io/jspyder/docs/index.html");
                        break;
                }
                return;
            });
            
        js.lib("init");
    });
</script></body>

</html>