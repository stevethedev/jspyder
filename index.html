<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <link type="text/css" rel="stylesheet" href="css/jspyder.css" />
    <link type="text/css" rel="stylesheet" href="css/material-icons.css" />
    <script type="text/javascript" src="js/jspyder.js"></script>
    <script type="text/javascript" src="js/js-ajax.js"></script>
    <script type="text/javascript" src="js/js-dtype.js"></script>
    <script type="text/javascript" src="js/js-template.js"></script>
    <script type="text/javascript" src="js/js-forms.js"></script>
    <script type="text/javascript" src="js/js-sp.js"></script>
    <script type="text/javascript" src="js/js-date.js"></script>
    <script type="text/javascript" src="js/js-canvas.js"></script>
</head>

<body>
    <div id="test">This is a test div.</div>
    <div class="spread-3-1">
        <div>
            <label class="spread-3-1">Input Number</label><!--
         --><input class="spread-3-2" id="input" />
        </div>
        <div>
            <label class="spread-3-1">BYTE</label><!--
         --><input class="spread-3-2" id="out-byte" />
        </div>
        <div>
            <label class="spread-3-1">UBYTE</label><!--
         --><input class="spread-3-2" id="out-ubyte" />
        </div>
        <div>
            <label class="spread-3-1">SHORT</label><!--
         --><input class="spread-3-2" id="out-short" />
        </div>
        <div>
            <label class="spread-3-1">USHORT</label><!--
         --><input class="spread-3-2" id="out-ushort" />
        </div>
        <div>
            <label class="spread-3-1">INT</label><!--
         --><input class="spread-3-2" id="out-int" />
        </div>
        <div>
            <label class="spread-3-1">UINT</label><!--
         --><input class="spread-3-2" id="out-uint" />
        </div>
        <div>
            <label class="spread-3-1">FLOAT</label><!--
         --><input class="spread-3-2" id="out-float" />
        </div>
        <div>
            <label class="spread-3-1">DOUBLE</label><!--
         --><input class="spread-3-2" id="out-double" />
        </div>
    </div>
    <br />
    <br />
    
    <div id="form-print"></div>

    <script id="test-template" type="text/jspyder-template">
        <div class="my-template-div">
            @bold($name)
        </div>
    </script>

    <script type="text/javascript">
        js.dom("#input")
            .on("input", function(evt) {
                var value = this.value;
                
                js.dom("#out-byte").setAttrs({ "value": js.alg.byte(value) });
                js.dom("#out-ubyte").setAttrs({ "value": js.alg.ubyte(value) });
                js.dom("#out-short").setAttrs({ "value": js.alg.short(value) });
                js.dom("#out-ushort").setAttrs({ "value": js.alg.ushort(value) });
                js.dom("#out-int").setAttrs({ "value": js.alg.int(value) });
                js.dom("#out-uint").setAttrs({ "value": js.alg.uint(value) });
                js.dom("#out-float").setAttrs({ "value": js.alg.float(value) });
                js.dom("#out-double").setAttrs({ "value": js.alg.double(value) });
            });
            
        js.dom("#test")
            .on("mousedown", function(evt) { 
                console.log("mousedown"); 
            });
                
        js.dom("<button>Click Me to Click Text</button>")
            .attach(document.body)
            .on("mousedown", function(evt) {
                js.dom("#test").trigger("mousedown");
            });
        
        var o = {};
        js.dtype(o)
            .ubyte("ubyte", 0)
            .ubyte("subyte", 0, true)
            .ubyte("cubyte", 0, false, true)
            .ubyte("scubyte", 0, true, true)
            .uchar("uchar", 63)
            .uchar("suchar", 63, true)
            .uchar("cuchar", 63, false, true)
            .uchar("scuchar", 63, true, true)
            .string("string", "string")
            .string("sstring", "string", true)
            .string("cstring", "string", false, true)
            .string("scstring", "string", true, true);
            
        var $t = js.template({
            divisions: ["J2", "J2X", "J22", "J23", "J25", "J26", "J28", "J29"]
        });
        
        var projectedTravel = {
            table_header: "Projected Travel",
            table_class: "projected travel",
            table_columns: [
                {
                    tag: "division",
                    text: "Division"
                },
                {
                    tag: "fyq1",
                    text: "1<sup>st</sup> Quarter"
                },
                {
                    tag: "fyq2",
                    text: "2<sup>nd</sup> Quarter"
                },
                {
                    tag: "fyq3",
                    text: "3<sup>rd</sup> Quarter"
                },
                {
                    tag: "fyq4",
                    text: "4<sup>th</sup> Quarter"
                },
                {
                    tag: "fyTotal",
                    text: "Total"
                },
                {
                    tag: "fyRemaining",
                    text: "Remaining"
                }
            ],
            // ["Division", "Travel Budget", "1st Quarter", "2nd Quarter", "3rd Quarter", "4th Quarter", "Total", "Remaining"],
            table_rows: [
                { division: "J20", fyq1: 2000 }, 
                { division: "J2X", fyq1: 2100 }, 
                { division: "J22", fyq1: 2200 },
                { division: "J23", fyq1: 2300 }, 
                { division: "J25", fyq1: 2500 }, 
                { division: "J26", fyq1: 2600 }, 
                { division: "J28", fyq1: 2800 }, 
                { division: "J29", fyq1: 2900 }
            ]
        };
        
        var formData = {
                fields: {
                    datefield: {
                        type: "date",
                        text: "Date Field" },
                    checkboxes: { 
                        type: "checkbox", 
                        text: "Checkbox Field",
                        values: [
                            { text: "Checbox #1", value: "cb1" },
                            { text: "Checbox #2", value: "cb2" },
                            { text: "Checbox #3", value: "cb3" }
                        ] },
                    checkboxes_bitwise: { 
                        type: "checkbox-bitwise", 
                        text: "Bitwise Checkbox Field",
                        default: 0x2,
                        values: [
                            { text: "Bitwise #1", value: 0x1 },
                            { text: "Bitwise #2", value: 0x2 },
                            { text: "Bitwise #3", value: 0x4 }
                        ] },
                    dropdown: {
                        type: "dropdown", 
                        text: "Dropdown Field",
                        default: "Dropdown #3",
                        values: [
                            { text: "Dropdown #1", value: "Dropdown #1" },
                            { text: "Dropdown #2", value: "Dropdown #2" },
                            { text: "Dropdown #3", value: "Dropdown #3" }
                        ]},
                    submit: {
                        type: "submit",
                        text: "Submit Button",
                        icon: "save",
                        ignore: true }
                },
                success: function(values) {
                    var $textarea = js.dom("#form-print"),
                        strValues = [];
                        
                    js.alg.each(values, function(value, field) {
                        value = (value instanceof Array ? value.join(', ') : value);
                        if(field === "checkboxes_bitwise") {
                            value = "000" + value.toString(2);
                            value = value.substring(value.length - 3);
                        }
                        strValues.push(
                            "<b>", field, ":</b> ", value, "<br />"
                        );
                    });
                    
                    $textarea.setHtml(strValues.join(''));
                }
            },
            formTemplate = [
                "<div>",
                    "<div class='spread-4-1'>${datefield}</div>",
                    "<div class='spread-4-1'>${checkboxes}</div>",
                    "<div class='spread-4-1'>${checkboxes_bitwise}</div>",
                    "<div class='spread-4-1'>${dropdown}</div>",
                    "<div class='spread-4-1'>${submit}</div>",
                "</div>"
            ].join(''),
            formFn = function(d) {
                js.dom(document.body).append(d);
            };
        
        var $form = js.form(formData);
        $form.compileExplicit(formTemplate, null, formFn);
        
    </script>
</body>

</html>