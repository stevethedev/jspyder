var $jscomp={scope:{},getGlobal:function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global?global:c}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return"jscomp_symbol_"+c+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};
$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();if(c[$jscomp.global.Symbol.iterator])return c[$jscomp.global.Symbol.iterator]();if(!(c instanceof Array||"string"==typeof c||c instanceof String))throw new TypeError(c+" is not iterable");var d=0;return{next:function(){return d==c.length?{done:!0}:{done:!1,value:c[d++]}}}};$jscomp.arrayFromIterator=function(c){for(var d,b=[];!(d=c.next()).done;)b.push(d.value);return b};
$jscomp.arrayFromIterable=function(c){return c instanceof Array?c:$jscomp.arrayFromIterator($jscomp.makeIterator(c))};$jscomp.arrayFromArguments=function(c){for(var d=[],b=0;b<c.length;b++)d.push(c[b]);return d};$jscomp.inherits=function(c,d){function b(){}b.prototype=d.prototype;c.prototype=new b;c.prototype.constructor=c;for(var a in d)if($jscomp.global.Object.defineProperties){var e=$jscomp.global.Object.getOwnPropertyDescriptor(d,a);$jscomp.global.Object.defineProperty(c,a,e)}else c[a]=d[a]};
$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};$jscomp.array.arrayIterator_=function(c,d){c instanceof String&&(c=String(c));var b=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={},e=(a.next=function(){if(b<c.length){var a=b++;return{value:d(a,c[a]),done:!1}}e.next=$jscomp.array.done_;return $jscomp.array.done_()},a[Symbol.iterator]=function(){return e},a);return e};
$jscomp.array.findInternal_=function(c,d,b){c instanceof String&&(c=String(c));for(var a=c.length,e=0;e<a;e++){var f=c[e];if(d.call(b,f,e,c))return{i:e,v:f}}return{i:-1,v:void 0}};
$jscomp.array.from=function(c,d,b){d=void 0===d?function(a){return a}:d;var a=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(c[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();c=c[Symbol.iterator]();for(var e;!(e=c.next()).done;)a.push(d.call(b,e.value))}else{e=c.length;for(var f=0;f<e;f++)a.push(d.call(b,c[f]))}return a};$jscomp.array.of=function(c){for(var d=[],b=0;b<arguments.length;++b)d[b-0]=arguments[b];return $jscomp.array.from(d)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(c,d){return[c,d]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(c){return c})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(c,d){return d})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(c,d,b){var a=this.length;c=Number(c);d=Number(d);b=Number(null!=b?b:a);if(c<d)for(b=Math.min(b,a);d<b;)d in this?this[c++]=this[d++]:(delete this[c++],d++);else for(b=Math.min(b,a+d-c),c+=b-d;b>d;)--b in this?this[--c]=this[b]:delete this[c];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(c,d,b){null!=b&&c.length||(b=this.length||0);b=Number(b);for(d=Number((void 0===d?0:d)||0);d<b;d++)this[d]=c;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(c,d){return $jscomp.array.findInternal_(this,c,d).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(c,d){return $jscomp.array.findInternal_(this,c,d).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(c){c=void 0===c?[]:c;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(c){c=$jscomp.makeIterator(c);for(var d=c.next();!d.done;d=c.next())d=d.value,this.set(d[0],d[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var c=$jscomp.global.Map;if(!c||!c.prototype.entries||!Object.seal)return!1;try{var d=Object.seal({x:4}),b=new c($jscomp.makeIterator([[d,"s"]]));if("s"!=b.get(d)||1!=b.size||b.get({x:4})||b.set({x:4},"t")!=b||2!=b.size)return!1;var a=b.entries(),e=a.next();if(e.done||e.value[0]!=d||"s"!=e.value[1])return!1;e=a.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!a.next().done?!1:!0}catch(f){return!1}};
$jscomp.Map.createHead_=function(){var c={};return c.previous=c.next=c.head=c};$jscomp.Map.getId_=function(c){if(!(c instanceof Object))return String(c);$jscomp.Map.key_ in c||c instanceof Object&&Object.isExtensible&&Object.isExtensible(c)&&$jscomp.Map.defineProperty_(c,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in c?c[$jscomp.Map.key_]:" "+c};
$jscomp.Map.prototype.set=function(c,d){var b=this.maybeGetEntry_(c),a=b.id,e=b.list,b=b.entry;e||(e=this.data_[a]=[]);b?b.value=d:(b={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,value:d},e.push(b),this.head_.previous.next=b,this.head_.previous=b,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(c){var d=this.maybeGetEntry_(c);c=d.id;var b=d.list,a=d.index;return(d=d.entry)&&b?(b.splice(a,1),b.length||delete this.data_[c],d.previous.next=d.next,d.next.previous=d.previous,d.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(c){return!!this.maybeGetEntry_(c).entry};
$jscomp.Map.prototype.get=function(c){return(c=this.maybeGetEntry_(c).entry)&&c.value};$jscomp.Map.prototype.maybeGetEntry_=function(c){var d=$jscomp.Map.getId_(c),b=this.data_[d];if(b)for(var a=0;a<b.length;a++){var e=b[a];if(c!==c&&e.key!==e.key||c===e.key)return{id:d,list:b,index:a,entry:e}}return{id:d,list:b,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(c){return[c.key,c.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(c){return c.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(c){return c.value})};$jscomp.Map.prototype.forEach=function(c,d){for(var b=$jscomp.makeIterator(this.entries()),a=b.next();!a.done;a=b.next())a=a.value,c.call(d,a[1],a[0],this)};
$jscomp.Map.prototype.iter_=function(c){var d=this,b=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={};return a.next=function(){if(b){for(;b.head!=d.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:c(b)};b=null}return{done:!0,value:void 0}},a[Symbol.iterator]=function(){return this},a};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(c,d,b){Object.defineProperty(c,d,{value:String(b)})}:function(c,d,b){c[d]=String(b)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(c){c=Number(c)>>>0;if(0===c)return 32;var d=0;0===(c&4294901760)&&(c<<=16,d+=16);0===(c&4278190080)&&(c<<=8,d+=8);0===(c&4026531840)&&(c<<=4,d+=4);0===(c&3221225472)&&(c<<=2,d+=2);0===(c&2147483648)&&d++;return d};$jscomp.math.imul=function(c,d){c=Number(c);d=Number(d);var b=c&65535,a=d&65535;return b*a+((c>>>16&65535)*a+b*(d>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(c){c=Number(c);return 0===c||isNaN(c)?c:0<c?1:-1};
$jscomp.math.log10=function(c){return Math.log(c)/Math.LN10};$jscomp.math.log2=function(c){return Math.log(c)/Math.LN2};$jscomp.math.log1p=function(c){c=Number(c);if(.25>c&&-.25<c){for(var d=c,b=1,a=c,e=0,f=1;e!=a;)d*=c,f*=-1,a=(e=a)+f*d/++b;return a}return Math.log(1+c)};$jscomp.math.expm1=function(c){c=Number(c);if(.25>c&&-.25<c){for(var d=c,b=1,a=c,e=0;e!=a;)d*=c/++b,a=(e=a)+d;return a}return Math.exp(c)-1};$jscomp.math.cosh=function(c){c=Number(c);return(Math.exp(c)+Math.exp(-c))/2};
$jscomp.math.sinh=function(c){c=Number(c);return 0===c?c:(Math.exp(c)-Math.exp(-c))/2};$jscomp.math.tanh=function(c){c=Number(c);if(0===c)return c;var d=Math.exp(2*-Math.abs(c)),d=(1-d)/(1+d);return 0>c?-d:d};$jscomp.math.acosh=function(c){c=Number(c);return Math.log(c+Math.sqrt(c*c-1))};$jscomp.math.asinh=function(c){c=Number(c);if(0===c)return c;var d=Math.log(Math.abs(c)+Math.sqrt(c*c+1));return 0>c?-d:d};
$jscomp.math.atanh=function(c){c=Number(c);return($jscomp.math.log1p(c)-$jscomp.math.log1p(-c))/2};
$jscomp.math.hypot=function(c,d,b){for(var a=[],e=2;e<arguments.length;++e)a[e-2]=arguments[e];c=Number(c);d=Number(d);for(var f=Math.max(Math.abs(c),Math.abs(d)),g=$jscomp.makeIterator(a),e=g.next();!e.done;e=g.next())f=Math.max(f,Math.abs(e.value));if(1E100<f||1E-100>f){c/=f;d/=f;g=c*c+d*d;a=$jscomp.makeIterator(a);for(e=a.next();!e.done;e=a.next())e=e.value,e=Number(e)/f,g+=e*e;return Math.sqrt(g)*f}f=c*c+d*d;a=$jscomp.makeIterator(a);for(e=a.next();!e.done;e=a.next())e=e.value,f+=e*e;return Math.sqrt(f)};
$jscomp.math.trunc=function(c){c=Number(c);if(isNaN(c)||Infinity===c||-Infinity===c||0===c)return c;var d=Math.floor(Math.abs(c));return 0>c?-d:d};$jscomp.math.cbrt=function(c){if(0===c)return c;c=Number(c);var d=Math.pow(Math.abs(c),1/3);return 0>c?-d:d};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(c){return"number"!==typeof c?!1:!isNaN(c)&&Infinity!==c&&-Infinity!==c};$jscomp.number.isInteger=function(c){return $jscomp.number.isFinite(c)?c===Math.floor(c):!1};
$jscomp.number.isNaN=function(c){return"number"===typeof c&&isNaN(c)};$jscomp.number.isSafeInteger=function(c){return $jscomp.number.isInteger(c)&&Math.abs(c)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(c,d){for(var b=[],a=1;a<arguments.length;++a)b[a-1]=arguments[a];b=$jscomp.makeIterator(b);for(a=b.next();!a.done;a=b.next()){var a=a.value,e;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(c[e]=a[e])}return c};$jscomp.object.is=function(c,d){return c===d?0!==c||1/c===1/d:c!==c&&d!==d};$jscomp.Set=function(c){c=void 0===c?[]:c;this.map_=new $jscomp.Map;if(c){c=$jscomp.makeIterator(c);for(var d=c.next();!d.done;d=c.next())this.add(d.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var c=$jscomp.global.Set;if(!c||!c.prototype.entries||!Object.seal)return!1;var d=Object.seal({x:4}),c=new c($jscomp.makeIterator([d]));if(c.has(d)||1!=c.size||c.add(d)!=c||1!=c.size||c.add({x:4})!=c||2!=c.size)return!1;var c=c.entries(),b=c.next();if(b.done||b.value[0]!=d||b.value[1]!=d)return!1;b=c.next();return b.done||b.value[0]==d||4!=b.value[0].x||b.value[1]!=b.value[0]?!1:c.next().done};
$jscomp.Set.prototype.add=function(c){this.map_.set(c,c);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(c){c=this.map_["delete"](c);this.size=this.map_.size;return c};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(c){return this.map_.has(c)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(c,d){var b=this;this.map_.forEach(function(a){return c.call(d,a,a,b)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(c,d){if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(c){for(var d=[],b=0;b<arguments.length;++b)d[b-0]=arguments[b];for(var b="",d=$jscomp.makeIterator(d),a=d.next();!a.done;a=d.next()){a=a.value;a=+a;if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?b+=String.fromCharCode(a):(a-=65536,b+=String.fromCharCode(a>>>10&1023|55296),b+=String.fromCharCode(a&1023|56320))}return b};
$jscomp.string.repeat=function(c){var d=this.toString();if(0>c||1342177279<c)throw new RangeError("Invalid count value");c|=0;for(var b="";c;)if(c&1&&(b+=d),c>>>=1)d+=d;return b};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(c){var d=this.toString(),b=d.length;c=Number(c)||0;if(0<=c&&c<b){c|=0;var a=d.charCodeAt(c);if(55296>a||56319<a||c+1===b)return a;c=d.charCodeAt(c+1);return 56320>c||57343<c?a:1024*(a-55296)+c+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(c,d){d=void 0===d?0:d;$jscomp.string.noRegExp_(c,"includes");return-1!==this.toString().indexOf(c,d)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(c,d){d=void 0===d?0:d;$jscomp.string.noRegExp_(c,"startsWith");var b=this.toString();c+="";for(var a=b.length,e=c.length,f=Math.max(0,Math.min(d|0,b.length)),g=0;g<e&&f<a;)if(b[f++]!=c[g++])return!1;return g>=e};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(c,d){$jscomp.string.noRegExp_(c,"endsWith");var b=this.toString();c+="";void 0===d&&(d=b.length);for(var a=Math.max(0,Math.min(d|0,b.length)),e=c.length;0<e&&0<a;)if(b[--a]!=c[--e])return!1;return 0>=e};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(c,d){function b(b){var c=b.jspyder=function(){};c.extend=function(a,b){this.hasOwnProperty(a)||Object.defineProperty(this,a,{value:b});return this};c.extend.fn=function(a,b,d){c.extend(a,b.apply(c,d));return this};c.createRegistry=l;c.registry=l();a(c);e(c);n(c);f(c);g(c);c.loadScript=function(a){c.ajax(a).get(function(a){(new Function(a.responseText))()})};return c}function a(a){function b(c,d){var e=a.alg.sliceArray(arguments,1<arguments.length?1:0),k,y,q;if(1===arguments.length||arguments)c=
0;console&&(q=console.log||function(){},y=console.warn||q,k=console.error||k,2===c?a.alg.use(console,k,e):1===c?a.alg.use(console,y,e):a.alg.use(console,q,e));return this}b.err=function(c){a.alg.use(a,b,[2].concat(a.alg.sliceArray(arguments,0)));return this};b.warn=function(c){a.alg.use(a,b,[1].concat(a.alg.sliceArray(arguments,0)));return this};a.extend("log",b)}function e(a){var b="",c=0;(function(){r.documentMode?(b="IE",c=window.attachEvent?eval("/*@cc_on (document.documentMode == 10)!=@*/false")?
10:window.requestAnimationFrame?window.addEventListener?7:8:9:11):"undefined"!==typeof window.InstallTrigger?(b="Firefox",c=Int8Array&&Int8Array.prototype.sort?7:Node.innerText?45:Document.charset?44:Array.prototype.includes?43:"undefined"!==typeof window.Reflect?42:41):window.opera||0<=navigator.userAgent.indexOf(" OPR/")?(b="Opera",c=1):window.chrome?(b="Chrome",c=45):0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")?(b="Safari",window.CSS.supports?c=9:window.CSS.supports||
(c=8)):window.MSInputMethodContext?(b="Edge",$jscomp.initSymbol(),c="{}"===JSON.stringify({foo:Symbol()})?13:window.RTCIceGatherOptions?11:12):/iP(ad|hone|od)/.test(navigator.userAgent)?(b="iOS Safari",c=8.4):window.operamini?(b="Opera Mini",c=8):/Android.*Mozilla\/5.0.*AppleWebKit/.test(navigator.userAgent)?(b="Android Browser",c=4.3):/Android.*Chrome/.test(navigator.userAgent)&&(b="Chrome for Android",c=47)})();var d={name:b,version:c,toString:function(){return this.name+this.version}};Object.freeze(d);
d={version:"0.1.0",versionNo:256,browser:d};Object.freeze(d);a.extend("env",d)}function f(a){var b;if(a.alg)return a.alg;b={each:function(b,c,d){var k={stop:function(){e=!0;return this},drop:function(a){return this}},e=!1;if(b&&"object"===typeof b)for(var q in b)if(c.apply(k,[b[q],q,b,d]),e)break;return a},arrEach:function(b,c,d){var k={stop:function(){e=!0;return this},drop:function(k){b instanceof Array&&b.splice(q--,a.alg.number(k,1));return this}},e=!1;if(b&&"object"===typeof b)for(var q=0;q<
b.length&&(c.apply(k,[b[q],q,b,d]),!e);q++);return a},iterate:function(b,c,d,k){b=a.alg.number(b);c=a.alg.number(c);for(var e={stop:function(){q=!0;return this},drop:function(a){return this}},q=!1,f=c<b?-1:1;b!==c&&(d.apply(e,[b,k]),!q);b+=f);return a},magnitude:function(b){b=a.alg.number(b);var c=Math.pow(10,((0>b?-b:b)|0).toString().length-1);return Math[0>b?"floor":"ceil"](b/c)*c},escapeString:function(b){return a.alg.string(b).replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},use:function(a,
b,c){a||(a=null);return"function"===typeof b?b.apply(a,c):void 0},run:function(a){"function"===typeof a&&a();return this},bool:function(a,b){switch(typeof a){case "undefined":return b||!1;case "string":return/true/i.test(a)}return a?!0:!1},number:function(a,b){var c=+a;return c==a||c===c?c:b||0},string:function(a,b){return"string"===typeof a?a:a&&"function"===typeof a.toString?a.toString():null!==a&&"object"===typeof a&&a.isPrototypeOf(RegExp)?a=(""+a).match(/^\/(.*)\/[a-z]*$/,"$1"):a||0===a?""+a:
b||""},object:function(a,b){return a&&"object"===typeof a?a:b||{}},array:function(a,b){return Array.isArray(a)?a:b||[]},date:function(a,b){return input instanceof Date||"[object Date]"===Object.prototype.toString.call(input)?a:b||new Date},"byte":function(c){b["byte"]="undefined"===typeof Int8Array?function(b){b=a.alg.number(b);for(b=(b===b?b:0)&255;-128>b;)b+=256;for(;127<b;)b-=256;return b}:function(a){var b=new ArrayBuffer(1),b=new Int8Array(b);b[0]=a;return b[0]};return b["byte"](c)},ubyte:function(a){b.ubyte=
"undefined"===typeof Uint8Array?function(a){a=+a;return(a===a?a:0)&255}:function(a){var b=new ArrayBuffer(1),b=new Uint8Array(b);b[0]=a;return b[0]};return b.ubyte(a)},"short":function(a){b["short"]="undefined"===typeof Int16Array?function(a){a=+a;for(a=(a===a?a:0)&65535;-32768>a;)a+=65536;for(;32767<a;)a-=65536;return a}:function(a){var b=new ArrayBuffer(2),b=new Int16Array(b);b[0]=a;return b[0]};return b["short"](a)},ushort:function(a){b.ushort="undefined"===typeof Uint16Array?function(a){a=+a;
return(a===a?a:0)&65535}:function(a){var b=new ArrayBuffer(2),b=new Uint16Array(b);b[0]=a;return b[0]};return b.ushort(a)},"int":function(a){b["int"]="undefined"===typeof Int32Array?function(a){a=+a;for(a=(a===a?a:0)&4294967295;-2147483648>a;)a+=4294967296;for(;2147483647<a;)a-=4294967296;return a}:function(a){var b=new ArrayBuffer(4),b=new Int32Array(b);b[0]=a;return b[0]};return b["int"](a)},uint:function(a){b.uint="undefined"===typeof Int32Array?function(a){a=+a;a=(a===a?a:0)%4294967296;return 0>
a?-1*a:a}:function(a){var b=new ArrayBuffer(4),b=new Uint32Array(b);b[0]=a;return b[0]};return b.uint(a)},"float":function(a){b["float"]="undefined"===typeof window.Float32Array?function(a){a=2*(0<x)-1;for(var b=0,k=x*a,c=0;2<=k||1>k;)2<=k&&(k/=2,b++),1>k&&(k*=2,b--);c=x/Math.pow(2,b)-1;c=1+Math.round(8388608*c)/8388608;return+(a*c*Math.pow(2,b)).toPrecision(8)}:function(a){var b=new ArrayBuffer(4),b=new Float32Array(b);b[0]=a;return+b[0].toPrecision(8)};return b["float"](a)},"double":function(a){b["double"]=
"undefined"===typeof Float64Array?function(a){a=+(+a).toPrecision(16);return a==a?a:0}:function(a){var b=new ArrayBuffer(8),b=new Float64Array(b);b[0]=a;return b[0]};return b["double"](a)},makeEnum:function(b,c){c=c||{};var d=1;a.alg.arrEach(b,function(a,b){c[a]=d;d*=2});return c},rad2deg:function(b,c){return a.alg.number(b,c)*(180/Math.PI)},deg2rad:function(b,c){return a.alg.number(b,c)*(Math.PI/180)},sliceArray:function(a,b){var c=a;try{c=window.Array.prototype.slice.call(a||[],b||0)}catch(k){c=
[]}return c},sortArrayObj:function(b,c,d){var k=a.alg.sliceArray(arguments,2);a.alg.array(b).sort(a.alg.__sortArrayObj(c,k));return b},__sortArrayObj:function(b,c){var d;switch(a.env.browser.name){case "IE":case "Edge":d=function(a,d){for(var e=0;a&&d&&e<c.length;e++)a=a[c[e]],d=d[c[e]];var e=b?a:d,h=b?d:a;return e>h?1:e<h?-1:0};break;default:d=function(a,d){for(var e=0;a&&d&&e<c.length;e++)a=a[c[e]],d=d[c[e]];return b?a>=d:a<=d}}return d},sortArrayNum:function(b,c){a.alg.array(b).sort(function(b,
k){return c?a.alg.number(b)-a.alg.number(k):a.alg.number(k)-a.alg.number(b)});return b},joinArray:function(b,c){var d,k,e;for(d=1;d<arguments.length;d++)for(c=a.alg.sliceArray(arguments[d]),e=0;e<c.length;e+=8192)k=c.slice(e,e+8192),Array.prototype.push.apply(b,k);return b},bindFn:function(b,c,d){d=d&&d.length?a.alg.sliceArray(d):d?[d]:[];return function(){var k=null;"function"===typeof c&&(k=c.apply(b,d.concat(a.alg.sliceArray(arguments))));return k}},mergeObj:function(b){function c(a,b,k,d){k.hasOwnProperty(b)&&
(d[b]=a)}var d=b,k=a.alg.sliceArray(arguments,1);a.alg.each(k,function(b,k,d,e){b&&e&&a.alg.each(b,c,e)},d);return b},cloneObj:function(b){return b&&"object"===typeof b?a.alg.mergeObj(b.constructor(),b):b},deepCloneObj:function(b){if(!b||"object"!==typeof b)return b;b=this.cloneObj(b);a.alg.each(b,function(b,c,k){k[c]=a.alg.deepCloneObj(b)});return b},keycodes:{KC_Backspace:8,KC_Tab:9,KC_Enter:13,KC_Shift:16,KC_Ctrl:17,KC_Alt:18,KC_Pause:19,KC_Break:19,KC_CapsLock:20,KC_Escape:27,KC_Space:32,KC_PageUp:33,
KC_PageDown:34,KC_End:35,KC_Home:36,KC_LeftArrow:37,KC_UpArrow:38,KC_RightArrow:39,KC_DownArrow:40,KC_Insert:45,KC_Delete:46,KC_0:48,KC_1:49,KC_2:50,KC_3:51,KC_4:52,KC_5:53,KC_6:54,KC_7:55,KC_8:56,KC_9:57,KC_A:65,KC_B:66,KC_C:67,KC_D:68,KC_E:69,KC_F:70,KC_G:71,KC_H:72,KC_I:73,KC_J:74,KC_K:75,KC_L:76,KC_M:77,KC_N:78,KC_O:79,KC_P:80,KC_Q:81,KC_R:82,KC_S:83,KC_T:84,KC_U:85,KC_V:86,KC_W:87,KC_X:88,KC_Y:89,KC_Z:90,KC_LWin:91,KC_RWin:92,KC_Select:93,KC_Num0:96,KC_Num1:97,KC_Num2:98,KC_Num3:99,KC_Num4:100,
KC_Num5:101,KC_Num6:102,KC_Num7:103,KC_Num8:104,KC_Num9:105,KC_NumAsterisk:106,KC_NumPlus:107,KC_NumMinus:109,KC_NumPeriod:110,KC_NumSlash:111,KC_F1:112,KC_F2:113,KC_F3:114,KC_F4:115,KC_F5:116,KC_F6:117,KC_F7:118,KC_F8:119,KC_F9:120,KC_F10:121,KC_F11:122,KC_F12:123,KC_NumLock:144,KC_ScrollLock:145,KC_SemiColon:186,KC_Equal:187,KC_Comma:188,KC_Dash:189,KC_Period:190,KC_FSlash:191,KC_BSlash:220,KC_Grave:192,KC_LBracket:219,KC_RBracket:221,KC_Apos:222},min:function(b,c){var d=b;a.alg.each(arguments,
function(a){d="undefined"===typeof d?a:d;d=d>a?a:d});return d},max:function(b,c){var d=b;a.alg.each(arguments,function(a){d="undefined"===typeof d?a:d;d=d<a?a:d});return d}};a&&Object.defineProperty(a,"alg",{value:b});return b}function g(a){function b(a,d,q){var f=a=a||[];b.fn.isPrototypeOf(a)||("string"===typeof f&&(a=-1===(f.match(/(^\\\<|\<)/g)||[]).indexOf("<")?r.querySelectorAll(f):e(f)),c(a)&&(a=[a]),a=Array.prototype.slice.call(a,0),a=Object.create(b.fn,{_element:{value:a}}),a.each(function(a){a.__jspyder||
(a.__jspyder=l())}));a.use(d,q);return a}function c(b){return a.alg.bool("object"===typeof HTMLElement&&b instanceof HTMLElement||b&&"object"===typeof b&&1===b.nodeType&&"string"===typeof b.nodeName)}function d(a){return c(a)?a.className.replace(/(^\s+)|(\s(?=\s))|(\s+$)/g,"").split(" "):[]}function e(a){var b=r.createElement("div"),c=[];b.innerHTML=a;for(a=0;a<b.children.length;a++)c.push(b.children[a]);return c}if(a.dom)return a.dom;b.fn={_element:[],get count(){return this._element.length},each:function(b,
c){a.alg.arrEach(this._element,b,c);return this},use:function(b,c){a.alg.use(this,b,c);return this},setCss:function(c,d){if(c&&"object"===typeof c){var e=a.alg.each;this.each(function(a,c,k,h){e(h,function(a,b,c,k){k.style[b]=a},a);"function"===typeof d&&b(a,d,[h])},c)}return this},getCss:function(c,d){if(c&&"object"===typeof c){var e=Object.create(c),h=a.alg.each;this.each(function(a,c,k,e){k=getComputedStyle(a);var q=a.style;e=+c?e.others:e.first;h(e,function(a,b,c,k){c[b]=k.style[b]||k.cStyle[b]},
{style:q,cStyle:k});"function"===typeof d&&b(a,d,[e])},{first:c,others:e})}return this},exportCss:function(a){a=a||{};this.getCss(a);return a},getPosition:function(a){this.each(function(c){var d=c.getBoundingClientRect();b(c).use(a,[d])});return this},exportPosition:function(){var a=null;this.at(0).use(function(){a=this._element[0].getBoundingClientRect()});return a},getOffsetPosition:function(c){this.each(function(d){for(var e=d.parentNode,h={top:0,left:0,bottom:0,right:0,x:0,y:0,height:0,width:0};e&&
"static"===getComputedStyle(e).position;)e=e.parentNode;if(e){var f=d.getBoundingClientRect(),g=e.getBoundingClientRect();a.each(h,function(a,b,c){c[b]=g[b]-f[b]})}b(e).use(c,[h])});return this},exportOffsetPosition:function(){var a=null;this.getOffsetPosition(function(b){a||(a=b)});return a},getAttrs:function(c,d){if(c&&"object"===typeof c){var e=Object.create(c),h=a.alg.each;this.each(function(a,c,k,e){e=c?e.others:e.first;h(e,function(b,c,d){d[c]=a.getAttribute(c)});"function"===typeof d&&b(a,
d,[e])},{first:c,others:e})}return this},exportAttrs:function(a){a=a||{};this.getAttrs(a);return a},setAttrs:function(c,d){if(c&&"object"===typeof c){var e=Object.create(c),h=a.alg.each;this.each(function(a,c,k,e){e=+c?e.others:e.first;h(e,function(a,b,c,d){null===a||"undefined"===typeof a?d.removeAttribute(b):d.setAttribute(b,a)},a);"function"===typeof d&&b(a,d,[e])},{first:c,others:e})}return this},parents:function(a){this.each(function(c,d,e){b(c.parentNode,a,[c])});return this},children:function(a,
c){this.each(function(d,e,h){for(d=d.firstElementChild;d;)b(d,a,[d,c]),d=d.nextElementSibling});return this},at:function(c,d){c=a.alg.uint(c);return b(this._element[c]||null,d)},element:function(a,b){this.at(a,function(){var a=this._element[0];a&&"function"===typeof b&&b.apply(a,[this])});return this},attach:function(a,c){var d=this;b(a).element(0,function(a){var e=r.createDocumentFragment();d.each(b.fn._append,e);this.appendChild(e);a.use(c,d)});return this},attachStart:function(a,c){var d=this;
b(a).element(0,function(a){var e=r.createDocumentFragment();d.each(b.fn._append,e);this.parentNode&&this.parentNode.insertBefore(e,a);a.use(c,d)});return this},attachEnd:function(a,c){var d=this;b(a).element(0,function(a){var e=r.createDocumentFragment();d.each(b.fn._append,e);this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling);a.use(c,d)});return this},append:function(a){this.element(0,function(){var c=r.createDocumentFragment();b(a).each(b.fn._append,c);this.appendChild(c)});return this},
_append:function(a,b,c,d){d.appendChild(a)},appendBefore:function(a){this.element(0,function(){var c=r.createDocumentFragment();b(a).each(b.fn._append,c);this.parentNode&&this.parentNode.insertBefore(c,this)});return this},appendAfter:function(a){this.element(0,function(){var c=r.createDocumentFragment();b(a).each(b.fn._append,c);this.parentNode&&this.parentNode.insertBefore(c,this.nextSibling)});return this},prepend:function(a){this.element(0,function(){var c=r.createDocumentFragment();b(a).each(function(a,
b,c,d){d.appendChild(a)},c);this.insertBefore(c,this.firstChild)});return this},remove:function(){this.each(function(a){a.parentNode&&a.parentNode.removeChild(a)});return this},setClasses:function(b){this.each(function(b,c,e,k){a.alg.each(k,function(a,b,c,e){"toggle"===a&&(a=-1===d(e).indexOf(b));c=d(e);var k=c.indexOf(b),q=!1;a&&-1===k?(c.push(b),q=!0):a||-1===k||(c.splice(k,1),q=!0);q&&(e.className=c.join(" "))},b)},b);return this},getClasses:function(c,e){this.each(function(c,k,h,f){f=a.alg.number(k)?
f.second:f.first;a.alg.each(f,function(a,b,c,e){a=e.classes;e=-1!==d(e.el).indexOf(b);a[b]=e},{el:c,classes:f});b(c,e,[f])},{first:c,second:Object.create(c)});return this},exportClasses:function(a){a=a||{};this.getClasses(a);return a},on:function(b,c){b=(b||"").split(/\s+/);a.alg.each(b,function(b,d,e,k){a.alg.each(k._element,function(a){a.addEventListener(b,c);a.__jspyder.fetch("js-events-"+b)?a.__jspyder.fetch("js-events-"+b).push(c):a.__jspyder.stash("js-events-"+b,[c])})},this);return this},off:function(b,
c){b=(b||"").split(/\s+/);var d=this;a.alg.each(b,function(b){a.alg.each(d._element,function(a){var d=a.__jspyder.fetch("js-events-"+b),e=-1;a.removeEventListener(b,c);if(d){for(;0<=(e=d.indexOf(c));)d[e]=null;d.sort().splice(0,d.indexOf(null))}})})},trigger:function(a){a=(a||"").toString().split(/\s+/);for(var b,c=0;c<a.length;c++)a[c]&&(b=this._eventConstructor(a[c],!0,!0),this.each(function(a){a.dispatchEvent(b)}));return this},_eventConstructor:function(a,c,d){b.fn._eventConstructor="function"===
typeof window.Event?function(a,b,c){return new Event(a,{bubbles:b,cancelable:c})}:function(a,b,c){var d=window.document.createEvent("Event");d.initEvent(a,b,c);return d};return b.fn._eventConstructor.apply(this,arguments)},setHtml:function(a){this.each(function(b){b.innerHTML=a||""});return this},getHtml:function(a){"function"===typeof a&&this.each(function(b){a.call(b,b.innerHTML||"")});return this},exportHtml:function(){var a=null;this.getHtml(function(b){a||(a=b)});return a},getText:function(b){if("function"===
typeof b){var c="undefined"===typeof r.documentElement.textContent?"innerText":"textContent";this.each(function(d){b.call(d,a.alg.string(d[c]))})}return this},exportText:function(){var a=null;this.getText(function(b){a||(a=b)});return a},setText:function(b){b=a.alg.string(b);fn="undefined"===typeof r.documentElement.textContent?"innerText":"textContent";this.each(function(a){a[fn]=b});return this},find:function(c){var d=b(),e=d._element;this.each(function(d){c&&(d=d.querySelectorAll(c),a.alg.joinArray(e,
b(d)._element))});return d},filter:function(a){var c=b(),d=c._element;this.each(function(c){b.fn._matches(c,a)&&d.push(c)});return c},_matches:function(a,c){var d="";a.matches?d="matches":a.matchesSelector?d="matchesSelector":a.msMatchesSelector?d="msMatchesSelector":a.mozMatchesSelector?d="mozMatchesSelector":a.webkitMatchesSelector?d="webkitMatchesSelector":a.oMatchesSelector?d="oMatchesSelector":b.fn._matches=function(a,b){for(var c=(a.document||a.ownerDocument).querySelectorAll(b),d=c.length;0<=
--d&&c.item(d)!==a;);return-1<d};b.fn._matches=function(a,b){return d&&a[d](b)};return this._matches(a,c)},and:function(a){b(a,this._and,[this._element]);return this},_and:function(b){a.alg.joinArray(b,this._element)},template:function(a){this.each(this._template,{self:this,fields:a});return this},_template:function(a,b,c,d){d.self._template_parse(a,d.fields)},_template_parse:function(a,b){var c=Object.keys(b),d,e,h;for(d=0;d<c.length;d++)e=c[d],h=b[e],this._template_insert(a,"${"+e+"}",h);return a},
_template_insert:function(a,b,c){a=a.childNodes;var d,e;for(e=0;e<a.length;e++)d=a[e],3===d.nodeType?this._template_replace(d,b,c):this._template_insert(d,b,c);return!0},_template_replace:function(a,c,d){var e=a.data.indexOf(c),h=a.parentNode,f;if(-1===e)return!1;f=a.splitText(e);f.data=f.data.substr(c.length);b(d).each(function(a){h.insertBefore(a,f)});return!0},setValue:function(a,b){return this.each(function(b){"undefined"!==typeof b.value&&"LI"!==b.tagName?b.value=a:b.setAttribute("value",a)}).use(b)},
getValue:function(a){var b=this;return b.each(function(c){var d="undefined"!==typeof c.value?c.value:c.getAttribute("value");"LI"===c.tagName&&(d=c.getAttribute("value"));"undefined"!==d&&b.use(a,[d])})},exportValue:function(){var a=null;this.getValue(function(b){a=b});return a},getProps:function(b,c){this.each(function(c){a.alg.each(b,function(a,b,d){d[b]=c[b]})});this.use(c,[b]);return this},exportProps:function(a){a=a||{};this.getProps(a);return a},setProps:function(b){this.each(function(c){a.alg.each(b,
function(a,b){c[b]=a})});return this}};b.doc=b(r.documentElement);a&&Object.defineProperty(a,"dom",{value:b});return b}function n(a){function b(d,e,k){d=c.fetch(d);var f=null;d&&"function"===typeof d&&(f=d.apply(a,e));"function"===typeof k&&k.call(this,f);return this}var c=l();b.register=function(a,b){"string"==typeof a&&("function"!==typeof b&&null!==b||c.stash(a,b));return this};b.registerSet=function(c){c&&"object"===typeof c&&a.alg.each(c,function(a,c){b.register(c,a)});return this};a.extend("lib",
b)}function l(){var a={};return{fetch:function(b,c){var d={key:b,value:a[b]};"function"===typeof c&&c(d);return d.value},stash:function(b,c){return a[b]=c}}}var p=c.jspyder,r=c.document||window.document;p||(p=b(c));c[d]||(c[d]=p);return p})(window,"js");jspyder.extend.fn("ajax",function(){function c(a,b,d){var g=Object.create(c.fn);g.data="object"===typeof b&&b?b:{};g.url="string"===typeof a?a:g.url;g.fn="function"===typeof d?d:g.fn;"function"===typeof d&&d.apply(g);return g}function d(a,c,d,g,n){if(!c)return this;var l=new XMLHttpRequest;l.onreadystatechange=function(){4===this.readyState&&"function"===typeof g&&b.alg.use(b,g,[this,n]);return null};l.open(a,c,!0);d||(d={});d.contentType&&l.setRequestHeader("Content-Type",d.contentType);d.cache||
l.setRequestHeader("Cache-Control","no-cache");l.send();return this}var b=this;c.fn={data:{},url:"",fn:function(){},get:function(a,b){a="function"===typeof a?a:this.fn;d("GET",this.url,this.data,a,b);return this},head:function(a,b){a="function"===typeof a?a:this.fn;d("HEAD",this.url,this.data,a,b);return this},post:function(a,b){a="function"===typeof a?a:this.fn;d("POST",this.url,this.data,a,b);return this}};return c});jspyder.extend.fn("canvas",function(){function c(a){a=a||{};var d=b.dom(a.canvas||"<canvas></canvas>"),f=a.css,g={height:b.alg.number(a.height,150),width:b.alg.number(a.width,300)};a.canvas||d.setCss(f).setAttrs(g);return Object.create(c.fn,{canvas:{value:d},queue:{value:[]},context:{value:d._element[0]&&d._element[0].getContext&&d._element[0].getContext("2d")}})}function d(a){a=a||{};a.fill=b.alg.string(a.fill,"#FFF");a.border=b.alg.string(a.border,"transparent");a.borderWidth=b.alg.number(a.borderWidth,
0);a.borderTopWidth=b.alg.number(a.borderTopWidth,a.borderWidth);a.borderRightWidth=b.alg.number(a.borderRightWidth,a.borderWidth);a.borderBottomWidth=b.alg.number(a.borderBottomWidth,a.borderWidth);a.borderLeftWidth=b.alg.number(a.borderLeftWidth,a.borderWidth);a.x=b.alg.number(a.x,0);a.y=b.alg.number(a.y,0);a.height=b.alg.number(a.height,0);a.width=b.alg.number(a.width,0);return a}var b=this;c.fn={canvas:null,context:null,queue:null,attach:function(){this.canvas&&this.canvas.attach(arguments);return this},
remove:function(){this.canvas&&this.canvas.remove();return this},getSize:function(a){b.alg.use(this,a,[this.exportSize()]);return this},exportSize:function(){var a={height:0,width:0,x:0,y:0},b=this.canvas&&this.canvas._element&&this.canvas._element[0],c;b&&(c=b.getBoundingClientRect(),a.width=b.width,a.height=b.height,a.x=c.x,a.y=c.y);return a},exportImageUrl:function(a){var b="";this.canvas&&this.canvas.element(0,function(){b=this.toDataURL("image/"+a)});return b},getImageUrl:function(a,c){b.alg.use(this,
c,[this.exportImageUrl(a)]);return this},exportImage:function(a){return b.dom("<img></img>").setAttrs({src:this.exportImageUrl(a)})},getImage:function(a,c){b.alg.use(this,c,[this.exportImage(a)]);return this},clear:function(){var a=this;this.getSize(function(b){a.context.clearRect(0,0,b.width,b.height)});return this},render:function(){this.clear();if(this.context){var a=this;b.alg.each(this.queue,function(c){b.alg.use(a,c)})}return this},draw:function(a,c){var d=this.cmd[a],g;d&&(g=function(){b.alg.use(this,
d,[c])},"function"===typeof g&&(g.settings=c,g.type=a,this.queue&&this.queue.push(g)));return this},cmd:{rectangle:function(a){a=d(a);this.context.fillStyle=a.border;this.context.fillRect(a.x,a.y,a.width,a.height);this.context.fillStyle=a.fill;this.context.fillRect(a.x+a.borderLeftWidth,a.y+a.borderTopWidth,a.width-(a.borderRightWidth+a.borderLeftWidth),a.height-(a.borderBottomWidth+a.borderTopWidth))},arc:function(a){a=d(a);a.radius=b.alg.number(a.radius,0);a.anticlockwise=b.alg.bool(a.anticlockwise,
!1);var c=b.alg.deg2rad(a.angle,0),f=b.alg.deg2rad(a.degrees,360)+c;this.context.beginPath();this.context.arc(a.x,a.y,a.radius,c,f,a.anticlockwise);a.fromcenter&&this.context.lineTo(a.x,a.y);a.closepath&&this.context.closePath();this.context.strokeStyle=a.border;this.context.stroke();this.context.fillStyle=a.fill;this.context.fill()},circle:function(a){a=d(a);a.degrees=360;b.alg.use(this,this.cmd.arc,[a])},text:function(a){a=a||{};a.size=b.alg.number(a.size,16);a.font=b.alg.string(a.font,"Arial");
a.text=b.alg.string(a.text,"");a.x=b.alg.string(a.x,0);a.y=b.alg.string(a.y,0);a.outline=b.alg.string(a.outline,"transparent");a.fill=b.alg.string(a.fill,"black");a.textalign=b.alg.string(a.textalign,"start");this.context.textAlign=a.textalign;this.context.font=a.size+"px "+a.font;this.context.fillStyle=a.fill;this.context.fillText(a.text,a.x,a.y);this.context.strokeStyle=a.outline;this.context.strokeText(a.text,a.x,a.y)},line:function(a){a=a||{};a.x=b.alg.number(a.x,0);a.y=b.alg.number(a.y,0);a.width=
b.alg.number(a.width,0);a.height=b.alg.number(a.height,0);a.color=b.alg.string(a.color,"black");a.thickness=b.alg.number(a.thickness,1);this.context.strokeStyle=a.color;this.context.lineWidth=a.thickness;this.context.beginPath();this.context.moveTo(a.x,a.y);this.context.lineTo(a.x+a.width,a.y+a.height);this.context.stroke()},pie:function(a){a=d(a);a.radius=b.alg.number(a.radius,0);a.angle=b.alg.number(a.angle,-90);a.anticlockwise=b.alg.bool(a.anticlockwise,!1);a.closepath=!0;a.degrees=360;var c=this,
f=0,g=0;b.alg.use(c,c.cmd.arc,[a]);b.alg.each(a.sections,function(a){f+=b.alg.number(a.value,0)});b.alg.each(a.sections,function(d){var l=b.alg.number(d.value,0)/f*360;d=b.alg.mergeObj({},a,{angle:g+a.angle,degrees:l,fill:d.fill,fromcenter:!0,closepath:!0});g+=l;b.alg.use(c,c.cmd.arc,[d])})},barchart:function(a){a=a||{};var c=a.sections=a.sections||[],d=this.exportSize(),g=a.borderWidth=b.alg.number(a.borderWidth,1),n=a.width=b.alg.number(a.width,d.width),l=a.height=b.alg.number(a.height,d.height),
p=a.x=b.alg.number(a.x,0),d=a.y=b.alg.number(a.y,0),r=a.fill=b.alg.string(a.fill,"white"),t=a.border=b.alg.string(a.border,"black"),u=a.lineColor=b.alg.string(a.lineColor,"rgba(0, 0, 0, 0.3)"),v=a.labels=a.labels||[],m=a.labelSize=b.alg.number(a.labelSize,16),h=a.min=b.alg.number(a.min,Infinity),k=a.max=b.alg.number(a.max,-Infinity),y=b.alg.bindFn(this,a.format||function(a){return a}),q=this,z,w;a=1.5*m;q.cmd.rectangle.call(this,{width:n,height:l,x:p,y:d,fill:r,borderWidth:g,border:t});n-=2*g;l-=
2*g;p+=g;d+=g;l-=a;b.alg.arrEach(c,function(a){var c=-1;b.alg.arrEach(a.values,function(a){c++;h=b.alg.min(h,a);k=b.alg.max(k,a)});z=b.alg.max(++c,z)});k=1.1*b.alg.magnitude(k);b.alg.iterate(0,5,function(a){q.cmd.line.call(q,{x:p,y:l*(5-a)/5,width:n+p,height:0,color:u});q.cmd.text.call(q,{x:m/3,y:l*(5-a)/5-m/3,size:m,font:"Arial",text:y(a/5*k|0),textalign:"left"});q.cmd.text.call(q,{x:n-m/3,y:l*(5-a)/5-m/3,size:m,font:"Arial",text:y(a/5*k|0),textalign:"right"})});n-=50;p+=50;w=n/((c.length+1)*z);
var A={x:p,y:d,height:l-d,width:n-p,vertWidth:(n-p)/z};b.alg.iterate(0,z+1,function(a){q.cmd.line.call(q,{x:A.x+A.vertWidth*a,y:A.y,width:0,height:A.height,color:u});q.cmd.text.call(q,{text:v[a],font:"Arial",size:m,x:A.x+A.vertWidth*(a+a+1)/2,y:A.height+m,textalign:"center"})});b.alg.arrEach(c,function(a,d){var h=a.fill=b.alg.string(a.fill,"black"),f=a.border=b.alg.string(a.border,h),g=a.borderWidth=b.alg.number(a.borderWidth,1);b.alg.arrEach(a&&a.values,function(a,y){var p=l*(b.alg.number(a)/(k||
1));q.cmd.rectangle.call(q,{x:A.x+(w/c.length+d*w+y*A.vertWidth),y:A.y+(A.height-A.y-p),width:w,height:p,fill:h,border:f,borderWidth:g})})})},linechart:function(a){a=a||{};var c=a.sections=a.sections||[],d=this.exportSize(),g=a.borderWidth=b.alg.number(a.borderWidth,1),n=a.width=b.alg.number(a.width,d.width),l=a.height=b.alg.number(a.height,d.height),p=a.x=b.alg.number(a.x,0),d=a.y=b.alg.number(a.y,0),r=a.fill=b.alg.string(a.fill,"white"),t=a.border=b.alg.string(a.border,"black"),u=a.labels=a.labels||
[],v=a.labelSize=b.alg.number(a.labelSize,16),m=a.linecolor=b.alg.string(a.linecolor,"rgba(0, 0, 0, 0.3)"),h=b.alg.number(a.min,Infinity),k=b.alg.number(a.max,-Infinity),y=b.alg.bindFn(this,a.format||function(a){return a|0}),q=this,z;a=1.5*v;q.cmd.rectangle.call(this,{width:n,height:l,x:p,y:d,fill:r,borderWidth:g,border:t});n-=2*g;l-=2*g;p+=g;d+=g;l-=a;b.alg.arrEach(c,function(a){var c=-1;b.alg.arrEach(a.values,function(a){c++;h=b.alg.min(h,a);k=b.alg.max(k,a)});z=b.alg.max(++c,z)});k=1.1*b.alg.magnitude(k);
b.alg.iterate(0,5,function(a){q.cmd.line.call(q,{x:p,y:l*(5-a)/5,width:n+p,height:0,color:m});q.cmd.text.call(q,{x:v/3,y:l*(5-a)/5-v/3,size:v,font:"Arial",text:y(a/5*k),textalign:"left"});q.cmd.text.call(q,{x:n-v/3,y:l*(5-a)/5-v/3,size:v,font:"Arial",text:y(a/5*k),textalign:"right"})});var n=n-50,p=p+50,w={x:p,y:d,height:l-d,width:n-p,vertWidth:(n-p)/(z-1)};b.alg.iterate(0,z,function(a){var b=w.x+w.vertWidth*a;q.cmd.line.call(q,{x:b,y:w.y,width:0,height:w.height,color:m});q.cmd.text.call(q,{text:u[a],
font:"Arial",size:v,x:b,y:w.height+v,textalign:"center"})});b.alg.arrEach(c,function(a,c){var d=a.fill=b.alg.string(a.fill,"transparent"),e=a.border=b.alg.string(a.border,"black"),h=a.borderWidth=b.alg.number(a.borderWidth,1),f=a.dotfill=b.alg.string(a.dotfill,d),g=a.dotBorder=b.alg.string(a.dotBorder,e),y=a.dotBorderWidth=b.alg.string(a.dotBorderWidth,h),p=a.dotRadius=b.alg.number(a.dotRadius,4);b.alg.arrEach(a&&a.values,function(a,c,d){d=w.height-(w.y+w.height*b.alg.number(d[c-1])/(k||1));a=w.height-
(w.y+w.height*b.alg.number(a)/(k||1));var n=w.x+w.vertWidth*(c-1),l=w.x+w.vertWidth*c;c&&q.cmd.line.call(q,{x:n,y:d,width:w.vertWidth,height:a-d,color:e,thickness:h});q.cmd.circle.call(q,{y:a,x:l,radius:p,fill:f,border:g,thickness:y});q.cmd.circle.call(q,{y:d,x:n,radius:p,fill:f,border:g,thickness:y})})})}}};return c});jspyder.extend.fn("date",function(){function c(a,b,d){return Object.create(c.fn).setDate(a,b,d)}function d(a,b){var c=[],d=null,f=null,g={},p={};e.alg.arrEach(a,function(a,d){var e=a[b];e&&(c.push(e),g[e]=d,p[d]=e)});c.sort(function(a,b){return b.length-a.length});d="("+c.join("|")+")";f=new RegExp(d,"g");return{string:d,regexp:f,values:g,lookup:p}}function b(a,b){a=e.alg.string(a,"");var c=e.alg.string(b),d={y:0,m:0,d:1,h:0,n:0,s:0,x:0,a:0};e.alg.arrEach(c.match(f),function(b){var c=m[b];if(!c)return b;
var k=c.values,c=(a.match(c.regexp)||[0])[0],f=c.length,g=a.indexOf(c);a=a.substring(g+f);switch(b){case "yy":case "YY":c="20"+c;case "yyyy":case "YYYY":d.y=e.alg.number(c);break;case "MMMM":case "MMM":case "mmmm":case "mmm":c=k[c]+1;case "MM":case "mm":case "M":case "m":d.m=e.alg.number(c)-1;break;case "ddth":case "dth":c=c.substr(0,c.length-2);case "dd":case "d":d.d=e.alg.number(c)||1;break;case "hh":case "h":case "HH":case "H":d.h=e.alg.number(c,0);break;case "am":case "AM":d.a="pm"===c||"PM"===
c?12:0;break;case "nn":case "n":d.n=e.alg.number(c,0);break;case "ss":case "s":d.s=e.alg.number(c,0);break;case "xxx":d.x=e.alg.number(c,0);break;case "xx":d.x=10*e.alg.number(c,0);break;case "x":d.x=100*e.alg.number(c,0)}});return new Date(d.y,d.m,d.d,d.h+d.a,d.n,d.s,d.x)}function a(a,b,c){var d=c?a.getUTCFullYear():a.getFullYear(),g=c?a.getUTCMonth():a.getMonth(),p=c?a.getUTCDate():a.getDate(),n=c?a.getUTCHours():a.getHours(),l=c?a.getUTCMinutes():a.getMinutes(),t=c?a.getUTCSeconds():a.getSeconds(),
r=c?a.getUTCDay():a.getDay(),u=c?a.getUTCMilliseconds():a.getMilliseconds(),v="",C=b;e.alg.arrEach(b.match(f),function(a){var b=m[a]||/\[[^\\]*\]/g.test(a);if(!b)return a;var c=a.length,k=C.indexOf(a),h="";v+=C.substring(0,k);C=C.substring(k+c);switch(a){case "YY":case "yy":h=e.alg.string(d%100);break;case "YYYY":case "yyyy":h=e.alg.string(d,"");break;case "MMMM":case "mmmm":case "MMM":case "mmm":case "MM":case "mm":case "M":case "m":h=b.lookup[g];break;case "dth":case "ddth":case "dd":case "d":h=
b.lookup[p-1];break;case "DDDD":case "dddd":case "DDD":case "ddd":case "DD":case "D":h=b.lookup[r];break;case "am":case "AM":h=b.lookup[n];break;case "HH":case "H":case "hh":case "h":h=b.lookup[n];break;case "nn":case "n":h=b.lookup[l];break;case "ss":case "s":h=b.lookup[t];break;case "xxx":h=(e.alg.string(u)+"00").substr(0,3);break;case "xx":h=(e.alg.string(u)+"0").substr(0,2);break;case "x":h=e.alg.string(u).substr(0,1);break;default:h=a.substring(1,a.length-1)}v+=e.alg.string(h,"")});return v+
C}var e=this;c.fn=c.prototype={_value:null,_format:"",_useUTC:!1,clone:function(){return c(new Date(this._value),this._format,this._useUTC)},utcOffset:function(){return this._value.getTimezoneOffset()},isDst:function(){var a=this.utcOffset(),b=this.clone();return a>b.setMonth(1).utcOffset()||a>b.setMonth(6).utcOffset()},useUTC:function(a){this._useUTC=e.alg.bool(a,!0);return this},isUTC:function(){return this._useUTC},useLocal:function(a){this._useUTC=!e.alg.bool(a,!0);return this},setDate:function(a,
d,f){this._value="undefined"===typeof a?new Date:c.fn.isPrototypeOf(a)?a._value:a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)?new Date(a):"string"===typeof a?b(a,d):"number"===typeof a?new Date(a):new Date(NaN);this._format=e.alg.string(d,"");this._useUTC=e.alg.bool(f,!1);return this},asDate:function(){return this._value},asString:function(b,c,d){return this.isValid()?(b=e.alg.string(b,this._format||g),c=e.alg.bool(c,this._useUTC),a(this._value,b,c)):e.alg.string(d,"")},toString:function(){return Date.prototype.toString.apply(this._value,
arguments)},getTime:function(a,b,c,d,f,g,p){var n=this._value;a=e.alg.bool(a,!0)*n.getFullYear();b=e.alg.bool(b,!0)*n.getMonth();c=e.alg.bool(c,!0)*n.getDate();d=e.alg.bool(d,!0)*n.getHours();f=e.alg.bool(f,!0)*n.getMinutes();g=e.alg.bool(g,!0)*n.getSeconds();p=e.alg.bool(p,!0)*n.getMilliseconds();return Date.prototype.getTime.call(new Date(a,b,c,d,f,g,p))},isValid:function(){return this._value&&!isNaN(this._value.getYear())},addDays:function(a){this._value.setDate(this._value.getDate()+e.alg.number(a));
return this},setDay:function(a){a=e.alg.number(a);this._value.setDate(a);return this},getDay:function(a){e.alg.use(this,a,[this.exportDay()]);return this},exportDay:function(){return this._value.getDate()},exportDayList:function(a){a=e.alg.string(a,"d");for(var b=this.exportDayCount(),c=this.clone(),d=1,f=[];d<=b;)c.setDay(d),f.push(c.asString(a)),d++;return f},getDayList:function(a,b){e.alg.use(this,b,[this.exportDayList(a)]);return this},exportDayCount:function(){return e.alg.number(this.clone().addMonths(1).setDay(0).asString("d"))},
getDayCount:function(a){e.alg.use(this,a,[this.exportDayCount()]);return this},exportWeekdayList:function(a){a=e.alg.string(a,"dddd");for(var b=this.exportWeekdayCount(),c=0,d=null,f=[];c<b;)d=r[c],f.push("undefined"===typeof d[a]?a:d[a]),c++;return f},getWeekdayList:function(a,b){e.alg.use(this,b,[this.exportWeekdayList(a)]);return this},exportWeekdayCount:function(){return e.alg.number(r.length,0)},getWeekdayCount:function(a){e.alg.use(this,a,[this.exportWeekdayCount()]);return this},exportWeekdayOffset:function(){var a=
{str:this.clone().setDay(1).asString("dddd"),found:0};e.alg.arrEach(this.exportWeekdayList("dddd"),this._getWeekdayOffset,a);return e.alg.number(a.found,0)},_getWeekdayOffset:function(a,b,c,d){a===d.str&&(d.found=b,this.stop())},getWeekdayOffset:function(a){e.alg.use(this,a,[this.exportWeekdayOffset()]);return this},addMonths:function(a){this._value.setMonth(this._value.getMonth()+e.alg.number(a));return this},setMonth:function(a){this._value.setMonth(e.alg.number(a)-1);return this},exportMonth:function(){return this._value.getMonth()+
1},getMonth:function(a){e.alg.use(this,a,[this.exportMonth()]);return this},exportMonthList:function(a){a={a:[],f:e.alg.string(a,"mmmm"),c:this.clone()};e.alg.arrEach(l,this._getMonthList_each,a);return a.a},_getMonthList_each:function(a,b,c,d){d.c.setMonth(b+1);d.a.push(d.c.asString(d.f))},getMonthList:function(a,b){e.alg.use(this,b,[this.exportMonthList(a)]);return this},exportMonthCount:function(){return l.length},getMonthCount:function(a){e.alg.use(this,a,[this.exportMonthCount()]);return this},
addYears:function(a){this._value.setFullYear(this._value.getFullYear()+e.alg.number(a));return this},setYear:function(a){this._value.setFullYear(e.alg.number(a));return this},exportYear:function(){return this._value.getFullYear()},getYear:function(a){e.alg.use(this,a,[this.exportYear()]);return this},addSeconds:function(a){this._value.setSeconds(this._value.getSeconds()+e.alg.number(a));return this},setSeconds:function(a){this._value.setSeconds(e.alg.number(a));return this},exportSecond:function(){return this._value.getSecond()},
getSecond:function(a){e.alg.use(this,a,[this.exportSecond()]);return this},addMinutes:function(a){this._value.setMinutes(this._value.getMinutes()+e.alg.number(a));return this},setMinute:function(a){this._value.setMinutes(e.alg.number(a));return this},exportMinute:function(){return this._value.getMinutes()},getMinute:function(a){e.alg.use(this,a,[this.exportMinute()])},addHours:function(a){this._value.setHours(this._value.getHours()+e.alg.number(a));return this},setHour:function(a){this._value.setHours(e.alg.number(a));
return this},exportHour:function(){return this._value.getHours()},getHour:function(a){e.alg.use(this,a,[this.exportHour()]);return this}};var f=/(\[[^\]]*\]|YYYY|YY|yyyy|yy|MMMM|MMM|MM|M|mmmm|mmm|mm|m|dddd|ddd|ddth|dth|dd|d|DDDD|DDD|DD|D|AM|am|HH|H|hh|h|nn|n|ss|s|xxx|xx|x)/g,g="ddd mmm d yyyy hh:mm:ss",n=[{YY:"\\d{2}",YYYY:"\\d{4}",yy:"\\d{2}",yyyy:"\\d{4}"}],l=[{m:"1",mm:"01",mmm:"Jan",mmmm:"January",M:"1",MM:"01",MMM:"JAN",MMMM:"JANUARY"},{m:"2",mm:"02",mmm:"Feb",mmmm:"February",M:"2",MM:"02",MMM:"FEB",
MMMM:"FEBRUARY"},{m:"3",mm:"03",mmm:"Mar",mmmm:"March",M:"3",MM:"03",MMM:"MAR",MMMM:"MARCH"},{m:"4",mm:"04",mmm:"Apr",mmmm:"April",M:"4",MM:"04",MMM:"APR",MMMM:"APRIL"},{m:"5",mm:"05",mmm:"May",mmmm:"May",M:"5",MM:"05",MMM:"MAY",MMMM:"MAY"},{m:"6",mm:"06",mmm:"Jun",mmmm:"June",M:"6",MM:"06",MMM:"JUN",MMMM:"JUNE"},{m:"7",mm:"07",mmm:"Jul",mmmm:"July",M:"7",MM:"07",MMM:"JUL",MMMM:"JULY"},{m:"8",mm:"08",mmm:"Aug",mmmm:"August",M:"8",MM:"08",MMM:"AUG",MMMM:"AUGUST"},{m:"9",mm:"09",mmm:"Sep",mmmm:"September",
M:"9",MM:"09",MMM:"SEP",MMMM:"SEPTEMBER"},{m:"10",mm:"10",mmm:"Oct",mmmm:"October",M:"10",MM:"10",MMM:"OCT",MMMM:"OCTOBER"},{m:"11",mm:"11",mmm:"Nov",mmmm:"November",M:"11",MM:"11",MMM:"NOV",MMMM:"NOVEMBER"},{m:"12",mm:"12",mmm:"Dec",mmmm:"December",M:"12",MM:"12",MMM:"DEC",MMMM:"DECEMBER"}],p=[{d:"1",dd:"01",dth:"1st",ddth:"01st"},{d:"2",dd:"02",dth:"2nd",ddth:"02nd"},{d:"3",dd:"03",dth:"3rd",ddth:"03th"},{d:"4",dd:"04",dth:"4th",ddth:"04th"},{d:"5",dd:"05",dth:"5th",ddth:"05th"},{d:"6",dd:"06",
dth:"6th",ddth:"06th"},{d:"7",dd:"07",dth:"7th",ddth:"07th"},{d:"8",dd:"08",dth:"8th",ddth:"08th"},{d:"9",dd:"09",dth:"9th",ddth:"09rd"},{d:"10",dd:"10",dth:"10th",ddth:"10th"},{d:"11",dd:"11",dth:"11th",ddth:"11st"},{d:"12",dd:"12",dth:"12th",ddth:"12th"},{d:"13",dd:"13",dth:"13th",ddth:"13th"},{d:"14",dd:"14",dth:"14th",ddth:"14th"},{d:"15",dd:"15",dth:"15th",ddth:"15th"},{d:"16",dd:"16",dth:"16th",ddth:"16th"},{d:"17",dd:"17",dth:"17th",ddth:"17th"},{d:"18",dd:"18",dth:"18th",ddth:"18th"},{d:"19",
dd:"19",dth:"19th",ddth:"19th"},{d:"20",dd:"20",dth:"20th",ddth:"20th"},{d:"21",dd:"21",dth:"21st",ddth:"21th"},{d:"22",dd:"22",dth:"22nd",ddth:"22nd"},{d:"23",dd:"23",dth:"23rd",ddth:"23th"},{d:"24",dd:"24",dth:"24th",ddth:"24th"},{d:"25",dd:"25",dth:"25th",ddth:"25th"},{d:"26",dd:"26",dth:"26th",ddth:"26th"},{d:"27",dd:"27",dth:"27th",ddth:"27th"},{d:"28",dd:"28",dth:"28th",ddth:"28th"},{d:"29",dd:"29",dth:"29th",ddth:"29rd"},{d:"30",dd:"30",dth:"30th",ddth:"30th"},{d:"31",dd:"31",dth:"31st",ddth:"31st"}],
r=[{D:"S",DD:"Su",DDD:"SUN",DDDD:"SUNDAY",ddd:"Sun",dddd:"Sunday"},{D:"M",DD:"Mo",DDD:"MON",DDDD:"MONDAY",ddd:"Mon",dddd:"Monday"},{D:"T",DD:"Tu",DDD:"TUE",DDDD:"TUESDAY",ddd:"Tue",dddd:"Tuesday"},{D:"W",DD:"We",DDD:"WED",DDDD:"WEDNESDAY",ddd:"Wed",dddd:"Wednesday"},{D:"T",DD:"Th",DDD:"THU",DDDD:"THURSDAY",ddd:"Thu",dddd:"Thursday"},{D:"F",DD:"Fr",DDD:"FRI",DDDD:"FRIDAY",ddd:"Fri",dddd:"Friday"},{D:"S",DD:"Sa",DDD:"SAT",DDDD:"SATURDAY",ddd:"Sat",dddd:"Saturday"}],t=[{h:"12",hh:"12",H:"0",HH:"00",
AM:"AM",am:"am"},{h:"1",hh:"01",H:"1",HH:"01",AM:"AM",am:"am"},{h:"2",hh:"02",H:"2",HH:"02",AM:"AM",am:"am"},{h:"3",hh:"03",H:"3",HH:"03",AM:"AM",am:"am"},{h:"4",hh:"04",H:"4",HH:"04",AM:"AM",am:"am"},{h:"5",hh:"05",H:"5",HH:"05",AM:"AM",am:"am"},{h:"6",hh:"06",H:"6",HH:"06",AM:"AM",am:"am"},{h:"7",hh:"07",H:"7",HH:"07",AM:"AM",am:"am"},{h:"8",hh:"08",H:"8",HH:"08",AM:"AM",am:"am"},{h:"9",hh:"09",H:"9",HH:"09",AM:"AM",am:"am"},{h:"10",hh:"10",H:"10",HH:"10",AM:"AM",am:"am"},{h:"11",hh:"11",H:"11",
HH:"11",AM:"AM",am:"am"},{h:"12",hh:"12",H:"12",HH:"12",AM:"PM",am:"pm"},{h:"1",hh:"01",H:"13",HH:"13",AM:"PM",am:"pm"},{h:"2",hh:"02",H:"14",HH:"14",AM:"PM",am:"pm"},{h:"3",hh:"03",H:"15",HH:"15",AM:"PM",am:"pm"},{h:"4",hh:"04",H:"16",HH:"16",AM:"PM",am:"pm"},{h:"5",hh:"05",H:"17",HH:"17",AM:"PM",am:"pm"},{h:"6",hh:"06",H:"18",HH:"18",AM:"PM",am:"pm"},{h:"7",hh:"07",H:"19",HH:"19",AM:"PM",am:"pm"},{h:"8",hh:"08",H:"20",HH:"20",AM:"PM",am:"pm"},{h:"9",hh:"09",H:"21",HH:"21",AM:"PM",am:"pm"},{h:"10",
hh:"10",H:"22",HH:"22",AM:"PM",am:"pm"},{h:"11",hh:"11",H:"23",HH:"23",AM:"PM",am:"pm"}],u=[{n:"0",nn:"00"},{n:"1",nn:"01"},{n:"2",nn:"02"},{n:"3",nn:"03"},{n:"4",nn:"04"},{n:"5",nn:"05"},{n:"6",nn:"06"},{n:"7",nn:"07"},{n:"8",nn:"08"},{n:"9",nn:"09"},{n:"10",nn:"10"},{n:"11",nn:"11"},{n:"12",nn:"12"},{n:"13",nn:"13"},{n:"14",nn:"14"},{n:"15",nn:"15"},{n:"16",nn:"16"},{n:"17",nn:"17"},{n:"18",nn:"18"},{n:"19",nn:"19"},{n:"20",nn:"20"},{n:"21",nn:"21"},{n:"22",nn:"22"},{n:"23",nn:"23"},{n:"24",nn:"24"},
{n:"25",nn:"25"},{n:"26",nn:"26"},{n:"27",nn:"27"},{n:"28",nn:"28"},{n:"29",nn:"29"},{n:"30",nn:"30"},{n:"31",nn:"31"},{n:"32",nn:"32"},{n:"33",nn:"33"},{n:"34",nn:"34"},{n:"35",nn:"35"},{n:"36",nn:"36"},{n:"37",nn:"37"},{n:"38",nn:"38"},{n:"39",nn:"39"},{n:"40",nn:"40"},{n:"41",nn:"41"},{n:"42",nn:"42"},{n:"43",nn:"43"},{n:"44",nn:"44"},{n:"45",nn:"45"},{n:"46",nn:"46"},{n:"47",nn:"47"},{n:"48",nn:"48"},{n:"49",nn:"49"},{n:"50",nn:"50"},{n:"51",nn:"51"},{n:"52",nn:"52"},{n:"53",nn:"53"},{n:"54",
nn:"54"},{n:"55",nn:"55"},{n:"56",nn:"56"},{n:"57",nn:"57"},{n:"58",nn:"58"},{n:"59",nn:"59"}],v=[{s:"0",ss:"00"},{s:"1",ss:"01"},{s:"2",ss:"02"},{s:"3",ss:"03"},{s:"4",ss:"04"},{s:"5",ss:"05"},{s:"6",ss:"06"},{s:"7",ss:"07"},{s:"8",ss:"08"},{s:"9",ss:"09"},{s:"10",ss:"10"},{s:"11",ss:"11"},{s:"12",ss:"12"},{s:"13",ss:"13"},{s:"14",ss:"14"},{s:"15",ss:"15"},{s:"16",ss:"16"},{s:"17",ss:"17"},{s:"18",ss:"18"},{s:"19",ss:"19"},{s:"20",ss:"20"},{s:"21",ss:"21"},{s:"22",ss:"22"},{s:"23",ss:"23"},{s:"24",
ss:"24"},{s:"25",ss:"25"},{s:"26",ss:"26"},{s:"27",ss:"27"},{s:"28",ss:"28"},{s:"29",ss:"29"},{s:"30",ss:"30"},{s:"31",ss:"31"},{s:"32",ss:"32"},{s:"33",ss:"33"},{s:"34",ss:"34"},{s:"35",ss:"35"},{s:"36",ss:"36"},{s:"37",ss:"37"},{s:"38",ss:"38"},{s:"39",ss:"39"},{s:"40",ss:"40"},{s:"41",ss:"41"},{s:"42",ss:"42"},{s:"43",ss:"43"},{s:"44",ss:"44"},{s:"45",ss:"45"},{s:"46",ss:"46"},{s:"47",ss:"47"},{s:"48",ss:"48"},{s:"49",ss:"49"},{s:"50",ss:"50"},{s:"51",ss:"51"},{s:"52",ss:"52"},{s:"53",ss:"53"},
{s:"54",ss:"54"},{s:"55",ss:"55"},{s:"56",ss:"56"},{s:"57",ss:"57"},{s:"58",ss:"58"},{s:"59",ss:"59"}],m={yy:d(n,"yy"),yyyy:d(n,"yyyy"),YY:d(n,"YY"),YYYY:d(n,"YYYY"),m:d(l,"m"),mm:d(l,"mm"),mmm:d(l,"mmm"),mmmm:d(l,"mmmm"),M:d(l,"M"),MM:d(l,"MM"),MMM:d(l,"MMM"),MMMM:d(l,"MMMM"),d:d(p,"d"),dd:d(p,"dd"),dth:d(p,"dth"),ddth:d(p,"ddth"),D:d(r,"D"),DD:d(r,"DD"),DDD:d(r,"DDD"),DDDD:d(r,"DDDD"),ddd:d(r,"ddd"),dddd:d(r,"dddd"),am:d(t,"am"),AM:d(t,"AM"),h:d(t,"h"),hh:d(t,"hh"),H:d(t,"H"),HH:d(t,"HH"),n:d(u,
"n"),nn:d(u,"nn"),s:d(v,"s"),ss:d(v,"ss"),xxx:!0,xx:!0,x:!0};return c});jspyder.extend.fn("dialog",function(){function c(b){b=b||{};var a=d.dom(c.fn._template),e=Object.create(c.fn,{_element:{value:a},_buttonDefs:{value:[]}});e.setDimensions(b.width,b.height);a.find("i.button-close").on("click",function(a){e.remove()});b.noclose&&a.find("i.button-close").remove();b.title?e.setTitle(b.title):b.titleHtml&&e.setTitleHtml(b.titleHtml);b.body?e.setBody(b.body):b.bodyHtml&&e.setBodyHtml(b.bodyHtml);b.buttons&&e.setButtons(b.buttons);b.parent&&e.attach(b.parent);return e}var d=
this;c.alert=function(b){var a=c({titleHtml:d.alg.string(b.title,"Alert"),bodyHtml:d.alg.string(b.message,""),noclose:!0,parent:b.parent||document.body,height:b.height,width:b.width,buttons:[{text:"OK",value:"OK",click:function(c){a.remove();"function"===typeof b.callback&&b.callback()}}]});return a};c.confirm=function(b){var a=c({titleHtml:d.alg.string(b.title,"Alert"),bodyHtml:d.alg.string(b.message,""),noclose:!0,parent:b.parent||document.body,height:b.height,width:b.width,buttons:[{text:"OK",
value:"OK",click:function(c){a.remove();"function"===typeof b.callback&&b.callback(!0)}},{text:"Cancel",value:"Cancel",click:function(c){a.remove();"function"===typeof b.callback&&b.callback(!1)}}]});return a};c.query=function(b){var a=c({titleHtml:d.alg.string(b.title,"Alert"),bodyHtml:d.alg.string(b.message,""),noclose:!0,parent:b.parent||document.body,height:b.height,width:b.width,buttons:[{text:"Yes",value:"Yes",click:function(c){a.remove();"function"===typeof b.callback&&b.callback(!0)}},{text:"No",
value:"No",click:function(c){a.remove();"function"===typeof b.callback&&b.callback(!1)}}]});return a};c.fn={_element:null,_buttonDefs:null,_template:'<div class="js-dialog-background"><div class="js-dialog"><div class="js-dialog-header"><span class="title-container"></span><span class="dialog-buttons"><i class="button-close close"></i></span></div><div class="js-dialog-body"><div class="body-container"></div></div><div class="js-dialog-footer"><div class="footer-container"></div></div></div></div>',
_height:237.2,_width:498,_buttonFactory:function(b){b=["<div>",b,"</div>"].join("");return d.dom(b)},setBody:function(b){this._element&&this._element.find(".body-container").setHtml("").append(b);return this},setBodyHtml:function(b){this._element&&this._element.find(".body-container").setHtml(b);return this},setTitle:function(b){this._element&&this._element.find(".title-container").setHtml("").append(b);return this},setTitleHtml:function(b){this._element&&this._element.find(".title-container").setHtml(b);
return this},setButtons:function(b){if(this._element){var a=this._element.find(".footer-container").setHtml(""),c=d.form();d.alg.each(b,function(b,g){b=d.alg.mergeObj({},b,{type:"button"});c.addField("button-"+g,b);a.append(c.exportField("button-"+g))})}return this},setDimensions:function(b,a){return this.setHeight(a).setWidth(b)},setHeight:function(b){this._element&&(b=d.alg.number(b,this._height)+"px",this._element.find(".js-dialog-body").setCss({"max-height":b}));return this},setWidth:function(b){this._element&&
(b=d.alg.number(b,this._width)+"px",this._element.find(".js-dialog-body").setCss({width:b}));return this},attach:function(b){this._element&&this._element.attach(b);return this},remove:function(){this._element&&this._element.remove();return this}};return c});js.extend.fn("download",function(){function c(a){var b=Object.create(c.fn);a=a||{};b.setName(a.name).setType(a.type).setData(a.data).setCharset(a.charset);return b}function d(c,d,e){d=a.alg.string(d,f);c=a.alg.string(c,"download.txt");if(r.test(e))return t?t(v(e),c):b(c,e);e=e instanceof l?e:new l([e],{type:d});if(t)return t(e,c);if(g)return"Chrome"===a.env.browser.name&&d!==f&&(e=p.call(e,0,e.size,f)),b(c,g.createObjectURL(e));if("string"===typeof e||e instanceof String)return b(c,"data:"+d+u(e));
d=new FileReader;d.onload=function(a){b(c,this.result)};d.readAsDataURL(e);return!0}function b(b,c){var d={download:null},e={href:c,download:b},k=a.dom("<a></a>").getProps(d),g="data:"+c.replace(m,f);null!==d.download?k.setAttrs(e).on("send-click",function(a){this.click();k.remove();n(c)}).attach(document.body).trigger("send-click"):"Safari"===a.env.browser.name?window.open(g)||(location.href=g,n(c)):a.dom("<iframe></iframe>").setCss({position:"fixed",left:"-9000000px",width:"1em",height:"1em"}).setProps({src:g}).on("load",
function(a){this.remove();n(c)}).attach(document.body);return!0}var a=window.jspyder;c.fn={save:function(a){a=a||{};d(a.name||this._name,a.type||this._type,a.data||this._data);return this},saveText:function(a){a=a||{};y(a.data||this._data,a.name||this._name,a.charset||this._charset);return this},saveMime:function(a){a=a||{};var b=(a.name||this._name).split("."),c=a.data||this._data,d=a.type||this._type;a=a.charset||this._charset;var e=".txt";1<b.length&&(e=b.pop());b=b.join("");k(c,b,e,d,a);return this},
setName:function(b){this._name=a.alg.string(b,"download");return this},getName:function(){return this._name},setType:function(b){this._type=a.alg.string(b,f);return this},getType:function(){return this._type},setData:function(a){this._data=a||"";return this},getData:function(){return this._data},setCharset:function(a){this._charset=a||"UTF-8";return this},getCharset:function(){return this._charset}};var e=window,f="application/octet-stream",g=window.URL||window.webkitURL||window,n=function(b){setTimeout(a.alg.bindFn(g,
g.revokeObjectURL,[b]),3E5)},l=e.Blob||e.MozBlob||e.WebKitBlob||null,p=l&&(l.prototype.slice||l.prototype.webkitSlice),r=/^data\:[\w+\-]+\/[\w+\-]+[,;]/,t=e.navigator.msSaveOrOpenBlob||e.navigator.msSaveBlob?function(){var b=e.navigator;return a.alg.use(b,b.msSaveOrOpenBlob||b.msSaveBlob,arguments)}:null,u=function(a){var b=e.btoa;u=e.btoa?function(a){return";base64,"+b(a)}:function(a){return","+encodeURIComponent(a)};return u(a)},v=function(b,c){var d=b.split(/[:;,]/),e=d[1],k=("base64"===d[2]?atob:
decodeURIComponent)(d.pop()),d=k.length,f=new Uint8Array(d);a.alg.iterate(0,d,function(a){f[a]=k.charCodeAt(a)});return new l([f],{type:e})},m=/^data:([\w\/\-\+]+)/,h={"UTF-8":"","UTF-16":"\ufeff","UTF-32":"\x00\ufeff","UTF-7":"+/v8","UTF-1":"\u00f7dL"},k=function(b,c,e,f,g){k=window.Blob?function(b,c,e,k,f){f=a.alg.string(f,"UTF-8");c=a.alg.string(c,"download");b=b||"";(e=a.alg.string(e,""))&&(c+="."+e);b=new window.Blob([(h[f]||"")+b],{type:k+";charset="+f});d(c,k,b)}:"IE"===a.env.browser&&9>=a.env.browserVersion?
function(b,c,d,e,k){k=a.alg.string(k,"UTF-8");c=a.alg.string(c,"download");b=b||"";a.dialog.alert({title:"Alert",message:["Because you are using Internet Explorer ",a.env.browserVersion,', your download "',c,".",d,'" has been changed to "',c,'.txt".  It is recommended that this value be changed in the save menu, or after the file has been downloaded.'].join("")});y(b,c,k)}:function(b,c,d,e,k){k=a.alg.string(k,"UTF-8");c=a.alg.string(c,"download");y(b||"",c+"."+d,k)};return k.apply(this,arguments)},
y=function(b,c,e){b=b.replace(/\r?\n/g,"\r\n");y=window.Blob?function(b,c,e){e=a.alg.string(e,"UTF-8");c=a.alg.string(c,"download");b=new l([b||""],{type:"text/plain;charset="+e});d(c,"text/text",b)}:function(b,c,d){d=a.alg.string(d,"UTF-8");c=a.alg.string(c,"download");b=b||"";var e="",k=window.frames.saveTxtWindow;if(!k&&(k=document.createElement("iframe"),k.id="saveTxtWindow",k.style.display="none",document.body.insertBefore(k,null),k=window.frames.saveTxtWindow,!k&&(k=window.open("","_temp","width=100,height=100"),
!k)))return window.alert("Sorry, download file could not be created."),!1;e=k.document;e.open("text/html","replace");e.charset=d;/\.htm(l)?$/i.test(c)?(e.close(),e.body.innerHTML="\r\n"+b+"\r\n"):(/\.txt$/i.test(c)||(c+=".txt"),e.write(b),e.close());e=e.execCommand("SaveAs",null,c);k.close();return e};return y.apply(this,arguments)};return c});jspyder.extend.fn("dtype",function(){function c(a,b){var d=Object.create(c.fn);d.obj=a;f.alg.use(d,a);return d}function d(a,b,c){throw new TypeError("Attempted to assign "+typeof b+"("+b+") to "+c+' "'+a+'"');}function b(a,b){throw new TypeError("Attempted to set a value to a constant "+b+' "'+a+'"');}function a(a,c,e,f,g,u,v,m,h,k){e={};var y="function"===typeof m?function(a){g=f(m(a))}:function(a){g=f(a)},q="function"===typeof k?function(b){typeof b===c||d(a,b,c);y(b)}:function(b){k(b)||d(a,b,_jsType);
y(b)},z=function(d){b(a,c)},w="function"===typeof h?function(){return h(f(g))}:function(){return f(g)};y(g);e.get=w;e.enumerable=!0;e.set=u?z:v?q:y;return e}function e(a,b,c){Object.defineProperty(a,b,c);return a}var f=this,g=f.alg;c.fn={"byte":f.alg.use(c,function(){g.byte();var b=g["byte"];return function(c,d,f,g){var u=this.obj;d=a(c,"number","byte",b,d,g,f);e(u,c,d);return this}}),ubyte:f.alg.use(c,function(){g.ubyte();var b=g.ubyte;return function(c,d,f,g){var u=this.obj;d=a(c,"number","unsigned byte",
b,d,g,f);e(u,c,d);return this}}),"short":f.alg.use(c,function(){g.short();var b=g["short"];return function(c,d,f,g){var u=this.obj;d=a(c,"number","short",b,d,g,f);e(u,c,d);return this}}),ushort:f.alg.use(c,function(){g.short();return function(b,c,d,f){var g=this.obj;c=a(b,"number","unsigned short",ushort,c,f,d);e(g,b,c);return this}}),"int":f.alg.use(c,function(){g.int();var b=g["int"];return function(c,d,f,g){var u=this.obj;d=a(c,"number","integer",b,d,g,f);e(u,c,d);return this}}),uint:f.alg.use(c,
function(){g.uint();return function(b,c,d,f){var g=this.obj;c=a(b,"number","unsigned integer",uint,c,f,d);e(g,b,c);return this}}),"float":f.alg.use(c,function(){g.float();var b=g["float"];return function(c,d,f,g){var u=this.obj;d=a(c,"number","float",b,d,g,f);e(u,c,d);return this}}),"double":f.alg.use(c,function(){g.double();var b=g["double"];return function(c,d,f,g){var u=this.obj;d=a(c,"number","double",b,d,g,f);e(u,c,d);return this}}),fixed:f.alg.use(c,function(){function b(a){a=g.int(a);a=Math.pow(10,
a);return function(b){return c(b*a)/a}}g.int();var c=g.int;return function(c,d,f,g,l){var m=b(f);f=this.obj;d=a(c,"number","fixed",m,d,l,g);e(f,c,d);return this}}),ufixed:f.alg.use(c,function(){function b(a){a=g.int(a);a=Math.pow(10,a);return function(b){return c(b*a)/a}}g.int();var c=g.int;return function(c,d,f,g,l){var m=b(f);f=this.obj;d=a(c,"number","fixed",m,d,l,g);e(f,c,d);return this}}),currency:function(a,b,c,d){return this.fixed(a,b,2,c,d)},string:f.alg.use(c,function(){g.string();var b=
g.string;return function(c,d,f,g){var u=this.obj;d=a(c,"string","string",b,d,g,f);e(u,c,d);return this}}),uchar:f.alg.use(c,function(){g.string();g.ushort();var b=g.string,c=g.ushort,d=function(a){if("number"===typeof a)return c(a);a=b(a);return a.length?a.charCodeAt(0):0},f=function(a){return"string"===typeof a&&1===a.length||"number"===typeof a};return function(b,c,g,n){var h=this.obj;c=a(b,null,"uchar",d,c,n,g,null,null,f);e(h,b,c);return this}}),bool:f.alg.use(c,function(){g.bool();var b=g.bool;
return function(c,d,f,g){var u=this.obj;d=a(c,"boolean","bool",b,d,g,f);e(u,c,d);return this}}),bit:f.alg.use(c,function(){g.bool();var b=g.bool,c=function(a){return+b(a)},d=function(a){return"number"===typeof a&&(1===a||0===a)||"boolean"===typeof a};return function(b,f,g,n){var m=this.obj;f=a(b,"number","bit",c,f,n,g,null,null,d);e(m,b,f);return this}}),"enum":f.alg.use(c,function(){g.makeEnum();var a=g.makeEnum,c=function(a,c,e,g,n){function l(c){b(a,"enum")}function h(b){"number"!==typeof b&&d(a,
b,"enum");k(b)}function k(a){a=f.alg.number(a)|0;var b=0;f.alg.arrEach(bitValues,function(c){(a&c)===c&&(b|=c);a<c&&this.stop()});e=b}var y={},q={valueOf:function(){return e}};e=f.alg.number(e);bitValues=[];f.alg.each(c,function(c,k){if("valueOf"!==k){var h=function(b){"boolean"!==typeof b&&"number"!==typeof b&&d(a+"."+k,b,"number/boolean");q(b)},q=function(a){e=f.alg.number(a?e|c:e-(e&c))|0},l=function(c){b(a+"."+k,"number")};bitValues.push(c);y[k]={enumerable:!0,get:function(){return f.alg.number(e&
c)|0},set:n?l:g?h:q}}});f.alg.sortArrayNum(bitValues,!0);Object.defineProperties(q,y);return{enumerable:!0,get:function(){return q},set:n?l:g?h:k}};return function(b,d,f,g,v){var m=this.obj;d=c(b,Array.isArray(f)?a(f):f,d,g,v);e(m,b,d);return this}})};f.alg.use(c.fn,function(){this.int8=this["byte"];this.uint8=this.ubyte;this.int16=this["short"];this.uint16=this.ushort;this.int32=this["int"];this.uint32=this.uint});return c});jspyder.extend.fn("form",function(){function c(b,a){var e=Object.create(c.fn,{_dom:{value:d.dom("<form></form>")},_template:{value:{}}});b&&(b.success&&(e._success=b.success),b.failure&&(e._failure=b.failure),b.reset&&(e._reset=b.reset),b.fields&&e.addFields(b.fields));d.alg.use(this,a);return e}var d=this;c.fn={_success:function(b,a){return this},_failure:function(b,a){return this},_reset:function(){return this},_dom:null,_fields:null,each:function(b,a){d.alg.each(this._fields,b,a);return this},
addFields:function(b){for(var a in b)this.addField(a,b[a]);return this},addField:function(b,a){b=d.alg.string(b,"");a=d.alg.object(a,{});var e=Object.create(c.fn.fieldTemplate),f=null;d.alg.mergeObj(e,a,{name:b,"default":a.default,value:a.value,values:d.alg.sliceArray(a.values)});f=this.buildControl(e);this._fields||(this._fields={});this._fields[b]={type:e.type,field:f,validate:e.validate,exportValue:e.exportValue,getValue:e.getValue,setValue:e.setValue,ignore:e.ignore,config:e};this.resetFieldValue(b);
this.bindEvents(f,e);return this},bindEvents:function(b,a){var c=this;d.alg.each(a&&a.events,function(a,g){b.on(g,function(b){d.alg.use(this,a,[b,c])})});return this},registerControl:function(b,a){c.fn.templates[b]=a;return this},registerControlFn:function(b,a){this.registerControl(b,d.alg.use(this,a));return this},buildControl:function(b,a){var c=(this.templates[b.type]||this.templates.input).apply(this,[b]),f=d.alg.string(b.name),g=d.alg.string(b.text),n=!d.alg.bool(b.nolabel,a);return this.buildLabel(n&&
f,n&&g,b.class,b.tooltip).and(c)},buildLabel:function(b,a,c,f){b=b&&a?["<label ",b?'for="'+b+'" ':"",c?'class="'+c+'"':"",f?'title="'+f+'"':"",">",a,"</label>"].join(""):"";return d.dom(b)},getField:function(b,a){var c=this.exportField(b);d.alg.use(this,a,[c]);return this},exportField:function(b){return(b=this.exportFieldData(b))?b.field:null},getFieldData:function(b,a){var c=this.exportFieldData(b);d.alg.use(this,a,[c]);return this},exportFieldData:function(b){return this._fields[b]||null},resetFieldValue:function(b){var a=
this.exportFieldData(b),c=a.config.default,a=a.config.value;this.setFieldValue(b,"undefined"!==typeof a?a:c);return this},resetFieldValues:function(){this.each(this._resetFieldValues,this)},_resetFieldValues:function(b,a,c,d){d.resetFieldValue(a)},setFieldValue:function(b,a){var c=this.exportFieldData(b),f=this.exportField(b);f&&(c&&c.setValue?d.alg.use(f,c.setValue,[c,a]):f.setValue(a));return this},getFieldValue:function(b,a){var c=[this.exportFieldValue(b)];d.alg.use(this,a,c);return this},exportFieldValue:function(b){var a=
this.exportFieldData(b);b=this.exportField(b);var c=null;b&&(a&&a.exportValue?c=d.alg.use(b,a.exportValue,[a]):a&&a.getValue?d.alg.use(b,a.getValue,[a,function(a){c=a}]):c=b.exportValue());return c},templates:{},values:function(b){var a,c,f=function(a){};for(c in this._fields)a=this._fields[c].field,a.getValue(f);d.alg.use(this,b,[valid,invalid]);return this},fieldTemplate:{type:"input",values:[]},submit:function(b,a){b="function"===typeof b?b:this._success;a="function"===typeof a?a:this._failure;
this.validate(function(c,f){d.alg.use(this,f?a:b,[c,f])});return this},reset:function(b){this.resetFieldValues();d.alg.use(this,"function"===typeof b?b:this._reset);return this},validate:function(b){var a=this,c={},f=null;this.each(function(b,d){var l=!0,p=a.exportFieldValue(d);if(!b.ignore){switch(typeof b.validate){case "function":l=b.validate(a);break;case "boolean":l=b.validate}b.config.required&&!p&&(l=!1);(l?c:f||(f={}))[d]=p}});d.alg.use(this,b,[c,f]);return this},attach:function(b,a){var c=
this._dom,f=this._fields,g;for(g in f);d.alg.use(c,b,[this,c,a]);return this},compile:function(b,a,c){return this._compiler(b,a,c,"compile")},compileExplicit:function(b,a,c){return this._compiler(b,a,c,"compileExplicit")},compileDom:function(b,a,c){if((b=d.dom(b))&&b.getHtml){var f=this;b.getHtml(function(d){f._compiler(d,a,c,b)})}return b},_compiler:function(b,a,c,f){var g=null;if("string"!==typeof f)g=f;else d.template(a)[f](b,null,function(a){g=d.dom(a)});this._dom=g;var n={};d.alg.each(this._fields,
function(a,b){n[b]=a.field});g.template(n||{});d.alg.use(this,c,[g]);return g}};c.registerControl=c.fn.registerControl;c.registerControlFn=c.fn.registerControlFn;c.registerControlFn("input",function(){function b(a,b){this.setValue(d.alg.string(b))}return function(a){var c=d.alg.string(a.name),f=d.alg.string(a.class),g=d.alg.string(a.type,"text"),c=['<input class="',f,'" name="',c,'"',a.readonly?' readonly="readonly"':"",' data-type="',g,'"></input>'].join("");a.setValue=b;return d.dom(c)}}).registerControlFn("date",
function(){function b(a){var c=Object.create(b.fn);c.today=d.date();c.date=d.date(a.value,a.format);c.format=d.alg.string(a.format,c.format);return c}b.fn={dom:null,title:null,tiles:null,prev:null,next:null,input:null,today:null,date:null,DOCDOM:d.dom(document.documentElement),navMonth:!1,titleMonth:"mmm yyyy",titleYear:"yyyy",format:"yyyy-mm-dd",clear:function(){this.dom&&this.dom.remove();this.input=this.next=this.prev=this.tiles=this.title=this.dom=null;this.navMonth=!1;this.today=d.date();return this},
load:function(){var a=d.dom(this.calendarHtml),b=this;this.today=d.date();this.dom=a;this.title=a.find(".date-picker-title");this.tiles=a.find(".calendar-tiles");this.prev=a.find(".date-picker-prev");this.next=a.find(".date-picker-next");this.prev.on("click",function(a){b.prevNextClick(-1)});this.next.on("click",function(a){b.prevNextClick(1)});this.setTitle();this.monthlistInit();a.on("click",this.preventClose);return this},setTitle:function(a){var b=this;b.title.setHtml(this.date.asString(this.navMonth?
this.titleMonth:this.titleYear));this.input.getValue(function(c){(a||c)&&this.setValue(b.date.asString(this.format))});return this},setTiles:function(a){this.tiles.setHtml(a);return this},enableClose:function(){this.pause=!1},preventClose:function(){this.pause=!0},prevNextClick:function(a){this.date[this.navMonth?"addMonths":"addYears"](a);this.setTitle();this.navMonth?this.monthClick(this):this.monthlistInit();this.preventClose()},monthlistInit:function(){function a(c){b.date.setMonth(c);b.monthClick(b)}
var b=this;this.months="";d.alg.arrEach(this.date.exportMonthList("mmm"),this.monthlistBuilder,this);this.setTiles(b.months);this.tiles.find(".month").on("click",function(b){d.dom(this).getValue(a)})},monthlistBuilder:function(a,b,c,d){c=d.today.exportYear()===d.date.exportYear();var l=b+1===d.today.exportMonth();d.months+=['<div class="month ',c&&l?"today":"",'" value="',b+1,'">',a,"</div>"].join("")},monthClick:function(){var a=this;a.today=d.date();var b=a.date.exportWeekdayList("DD"),c=a.date.exportDayList("d"),
n=0,l={html:"",wlen:b.length,offset:a.date.exportWeekdayOffset(),calStruct:a,today:a.today.exportMonth()===a.date.exportMonth()&&d.date().exportDay()};for(d.alg.arrEach(b,a.buildWeekdays,l);n<l.offset;)this.buildNumberedDays("",n-l.offset,null,l),n++;d.alg.arrEach(c,this.buildNumberedDays,l);a.navMonth=!0;a.setTiles(l.html);a.tiles.find(".date").on("click",function(b){d.dom(this).getValue(function(b){a.date.setDay(b);a.setTitle(!0);d.dom(a.input).trigger("change")});a.enableClose()});a.setTitle();
a.preventClose();d.dom(a.input).trigger("change")},buildWeekdays:function(a,b,c,d){d.html+=['<div class="date-title date-title-index-',b+1,'" style="width:',100/d.wlen,'%">',a,"</div>"].join("")},buildNumberedDays:function(a,b,c,n){var l=n.calStruct.today.exportYear()===n.calStruct.date.exportYear(),p=n.calStruct.today.exportMonth()===n.calStruct.date.exportMonth(),r=n.calStruct.today.exportDay()===b+1;n.html+=['<div class="date ',l&&p&&r?"today":"",'" value="',b+1,'" style="width:',100/n.wlen,"%;",
d.alg.bool(c)?"":"visibility: hidden;",'">',a,"</div>"].join("")},calendarHtml:'<div class="js-control js-control-date-picker"><div class="date-picker-header"><i class="chevron-left date-picker-prev"></i><h4 class="date-picker-title">${YEAR}</h4><i class="chevron-right date-picker-next"></i></div><div class="calendar-tiles"></div></div>'};var a={type:"input"};return function(c){var f=this.buildControl(d.alg.mergeObj({},c,a),!0),g=b(c);f.filter("input").on("click",function(a){a={readonly:null};d.dom(this).getAttrs(a);
a.readonly||(a=this.value||c.value||c.default||new Date,g.clear(),g.input=d.dom(this),g.date.setDate(a,g.format),g.load().preventClose(),d.dom(this.parentNode).append(g.dom),g.DOCDOM.on("click",function p(a){if(g.pause)return g.enableClose();g.clear();g.DOCDOM.off("click",p)}))});c.exportValue=function(){return f.exportValue()?g.date.asDate():null};c.setValue=function(a,b){g.date.setDate(b||NaN,g.format);this.setValue(g.date.asString(g.format))};return f}}).registerControlFn("button",function(){function b(a,
b){return function(c){var g={readonly:null};d.dom(this).getAttrs(g);g.readonly||d.alg.use(this,b,[c,a])}}return function(a){a.nolabel=!0;var c=d.alg.string(a.class,""),f=d.alg.string(a.icon,""),g=d.alg.string(a.text,""),n=d.alg.string(a.name,""),l=d.alg.string(a.value,""),c=['<div class="js-control js-control-button ',c,'"',a.readonly?' readonly="true"':"",' name="',n,'">','<i class="'+f+'"></i>','<span class="button-text" data-buttontext="'+g+'"></span>',"</div>"].join("");return d.dom(c).setValue(l).on("click",
b(this,a.click))}}).registerControlFn("buttonset",function(){var b={type:"button"};return function(a){for(var c=d.dom(),f=0;f<a.buttons.length;f++){var g=d.alg.mergeObj({readonly:a.readonly},a.buttons[f],b);g.class+=" js-buttonset";c.and(this.buildControl(g,!0))}return c}}).registerControlFn("submit",function(){function b(a){return function(b){b={readonly:null};d.dom(this).getAttrs(b);b.readonly||a.submit()}}var a={type:"button",nolabel:!0};return function(c){c=this.buildControl(d.alg.mergeObj(c,
a),!0);c.on("click",b(this));return c}}).registerControlFn("reset",function(){function b(a){return function(b){b={readonly:null};d.dom(this).getAttrs(b);b.readonly||a.reset()}}var a={type:"button",nolabel:!0};return function(c){c=this.buildControl(d.alg.mergeObj(c,a),!0);c.on("click",b(this));return c}}).registerControlFn("dropdown",function(){function b(b){return function(c){c=d.dom(this);var e={readonly:null};c.getAttrs(e);e.readonly||a(c,b)}}function a(a,b){function c(b){a.setValue(b)}function e(b){a.find(".dropdown-text").setHtml(b)}
for(var r=b.values,t=d.dom('<ul class="dropdown-selection"></ul>'),u=null,v=u="",v="",m=!0,h=0;h<r.length;)u=r[h],v=d.alg.string(u.text,u.value),u=d.alg.string(u.value,u.text),v=['<li class="item" value="',u,'" title="',v,'">',v,"</li>"].join(""),t.append(v),h++;t.on("click",function(a){a.target.parentNode===this&&d.dom(a.target).getValue(c).getHtml(e);f.trigger("click");a.stopPropagation&&a.stopPropagation();a.stopImmediatePropagation&&a.stopImmediatePropagation()}).attach(a);f.on("click",function y(b){if(m)return m=
!1;t&&t.remove();a=t=null;f.off("click",y)})}function c(a,b){b=d.alg.string(b);var e=this;d.alg.each(a.config.values,function(a){var c=d.alg.string(a.value,a.text);a=d.alg.string(a.text,a.value);b===c&&(e.setValue(c).find(".dropdown-text").setHtml(a),this.stop())})}var f=d.dom(document.documentElement);return function(a){var f=d.alg.string(a.name,""),l=d.alg.string(a.class,""),p=d.alg.string(a.value,""),r=d.alg.string(a.default,""),f=['<div name="',f,'" tabindex="0"',a.readonly?' readonly="true"':
"",' class="input js-control js-control-dropdown ',l,'"><i class="dropdown-arrow arrow-drop-down"></i><span class="dropdown-text">',p||r||"&nbsp;","</span></div>"].join(""),f=d.dom(f);f.on("click",b(a));a.setValue=c;return f}}).registerControlFn("textarea",function(){function b(a,b){b=d.alg.string(b,"");this.setValue(b)}return function(a){var c=d.alg.string(a.name,""),f=d.alg.string(a.class,""),c=['<textarea name="',c,'"',a.readonly?' readonly="true"':"",' class="input ',f,'"></textarea>'].join("");
a.setValue=b;return d.dom(c)}}).registerControlFn("textarea-autosize",function(){function b(a,b){b=d.alg.string(b,"");this.setValue(b)}function a(a){a={readonly:null};d.dom(this).getAttrs(a);if(!a.readonly){div=document.createElement("div");a={"font-family":null,"font-size":null,"font-weight":null,"padding-left":null,"padding-right":null,"padding-bottom":null,"padding-top":null,"border-left":null,"border-right":null,"border-top":null,"border-bottom":null,"line-height":null,"word-wrap":null};div.style.position=
"fixed";div.style.left="-65535px";div.style["white-space"]="pre-wrap";div.style["white-space"]="-moz-pre-wrap";div.style["white-space"]="-pre-wrap";div.style["white-space"]="-o-pre-wrap";div.style.width=div.style["min-width"]=div.style["max-width"]=this.clientWidth+"px";document.body.appendChild(div);var b=d.dom(this).getCss(a);d.dom(div).setText(this.value).setCss(a).getPosition(function(a){b.setCss({height:a.height+20+"px"})}).remove()}}return function(c){var f=d.alg.string(c.name,""),g=d.alg.string(c.class,
""),f=['<textarea name="',f,'" class="input js-control js-control-autosize ',g,'"></textarea>'].join("");c.setValue=b;c=d.dom(f);c.on("input",a);return c}}).registerControlFn("radio",function(){function b(a){var b=d.alg.string(a.text,""),c=d.alg.string(a.value,""),e=d.alg.string(a.name,""),p=d.alg.string(a.class,"");a=['<input value="',c,'" name="',e,'" type="radio"',a.readonly?' readonly="true"':"",' class="',p,'"></input>'].join("");return d.dom(a).and(d.form.fn.buildLabel(e,b,p))}function a(a){return a.config["data-value"]||
null}function c(a,b){this.find("input[type=radio]").each(function(a){var c={checked:null},e=null;d.dom(a).getProps(c).getAttrs({value:""},function(a){e=c.checked;b&&b.indexOf&&(c.checked=-1<b.indexOf(a.value))}).setProps(c).trigger(c.checked!==e?"change":"")});return this}return function(f){var g=d.alg.string(f.name,""),n=d.alg.string(f.class,""),l=f.values||[],p=null,p=null,r=d.dom(),t;f["data-values"]={};for(t=0;t<l.length;t++)p=d.alg.mergeObj({name:g,"class":n,readonly:f.readonly},l[t]),p.class=
n+d.alg.string(l[t].class),p=d.dom("<div></div>").append(b(p)),r.and(p);var u=this;r.find("input").on("change",function(a){a={readonly:null};var b=d.dom(this);b.getAttrs(a);a.readonly?u.setFieldValue(g,u.exportFieldValue(g)):b.getValue(function(a){f["data-value"]=a})});f.exportValue=a;f.setValue=c;return r}}).registerControlFn("checkbox",function(){function b(a){var b=[],c;a=a.config["data-values"]=a.config["data-values"]||{};for(c in a)a[c]&&b.push(c.substring(4));return b}function a(a,b){this.find("input[type=checkbox]").each(function(a){var c=
{checked:null},e=null;d.dom(a).getProps(c).getAttrs({value:""},function(a){e=c.checked;b&&b.indexOf&&(c.checked=-1<b.indexOf(a.value))}).setProps(c).trigger(c.checked!==e?"change":"")});return this}function c(a){var b=d.alg.string(a.text,""),e=d.alg.string(a.value,""),l=d.alg.string(a.name,""),p=d.alg.string(a.class,"");a=['<input value="',e,'" name="',l,'" type="checkbox"',a.readonly?' readonly="true"':"",' class="',p,'"></input>'].join("");return d.dom(a).and(d.form.fn.buildLabel(l,b,p))}return function(f){var g=
d.alg.string(f.name,""),n=d.alg.string(f.class,""),l=f.values||[],p=null,p=null,r=d.dom(),t;f["data-values"]={};for(t=0;t<l.length;t++)p=d.alg.mergeObj({name:g,readonly:f.readonly},l[t]),p.class=n+d.alg.string(l[t].class),p=d.dom("<div></div>").append(c(p)),r.and(p);r.find("input").on("change",function(a){var b=this.checked;a=d.dom(this);var c={readonly:null};a.getAttrs(c);c.readonly?this.checked=!b:a.getValue(function(a){f["data-values"]["val-"+d.alg.string(a)]=b})});f.exportValue=b;f.setValue=a;
return r}}).registerControlFn("toggles",function(){function b(a){var b=[];this.filter(".js-buttonset").each(function(a){d.dom(a).getAttrs({"data-value":null,"data-checked":null},function(a){a["data-checked"]&&b.push(a["data-value"])})});return b}function a(a,b){this.filter(".js-buttonset").each(function(a){var c={"data-value":"","data-checked":null},e=null;d.dom(a).getAttrs(c,function(a){e=a["data-checked"];b&&b.indexOf&&(a["data-checked"]=-1<b.indexOf(a["data-value"])?!0:null)}).setAttrs(c).trigger(c["data-checked"]!==
e?"change":"")});return this}function c(a){var b=d.alg.string(a.text,""),e=d.alg.string(a.value,""),l=d.alg.string(a.class,"");return d.form.fn.buildControl({type:"button",text:b,class:l+" js-buttonset",readonly:a.readonly,click:function(a,b){d.dom(this).getAttrs({"data-checked":!1,readonly:!1},function(a){a.readonly||(a["data-checked"]=d.alg.bool(a["data-checked"])?null:!0,this.setAttrs(a))})}}).setAttrs({"data-checked":null,"data-value":e})}return function(f){var g=d.alg.string(f.name,""),n=d.alg.string(f.class,
""),l=f.values||[],p=null,p=null,r=d.dom(),t;f["data-values"]={};for(t=0;t<l.length;t++)p=d.alg.mergeObj({name:g,readonly:f.readonly},l[t]),p.class=n+" "+d.alg.string(l[t].class),p=d.dom(c(p)),r.and(p);f.exportValue=b;f.setValue=a;return r}}).registerControlFn("toggles-radio",function(){function b(a){var b=null;this.filter(".js-buttonset[data-checked]").at(0).getAttrs({"data-value":null,"data-checked":null},function(a){b=a["data-value"]});return b}function a(a,b){this.filter('.js-buttonset[data-checked]:not([data-value="'+
b+'"])').setAttrs({"data-checked":null}).trigger("change");this.filter('.js-buttonset[data-value="'+b+'"]:not([data-checked])').setAttrs({"data-checked":!0}).trigger("change");return this}var c={type:"toggles",nolabel:!0};return function(f){var g=d.alg.mergeObj({},f,c),g=this.buildControl(g,!0),n=this;g.on("click",function(a){var b=d.dom(this);d.alg.each(f.values,function(a){b.getAttrs({"data-value":null,readonly:null},function(a){a.readonly||n.setFieldValue(f.name,a["data-value"])})})});f.exportValue=
b;f.setValue=a;return g}}).registerControlFn("toggles-bitwise",function(){function b(a){var b=d.alg.use(this,c,arguments),f=0;d.alg.each(b,function(a){f|=d.alg.number(a)});return f}function a(a,b){b=d.alg.number(b,0);this.filter(".js-buttonset").each(function(a){var c={"data-value":"","data-checked":null},e=null;d.dom(a).getAttrs(c,function(a){e=a["data-checked"];a["data-value"]=d.alg.number(a["data-value"],0);a["data-checked"]=b===a["data-value"]||b&a["data-value"]?!0:null}).setAttrs(c).trigger(c["data-checked"]!==
e?"change":"")});return this}var c=null,f={type:"toggles",nolabel:!0};return function(g){var n=d.alg.mergeObj({},g,f),l=this.buildControl(n,!0);g["data-values"]=n["data-values"];c=c||n.exportValue;g.exportValue=b;g.setValue=a;return l}}).registerControlFn("checkbox-bitwise",function(){function b(a){var b=d.alg.use(this,c,arguments),f=0;d.alg.each(b,function(a){f|=d.alg.number(a)});return f}function a(a,b){b=d.alg.number(b,0);this.find("input[type=checkbox]").each(function(a){var c={checked:null},
e=null;d.dom(a).getProps(c).getAttrs({value:""},function(a){e=c.checked;a.value=d.alg.number(a.value,0);c.checked=b===a.value||b&a.value}).setProps(c).trigger(c.checked!==e?"change":"")});return this}var c=null,f={type:"checkbox",nolabel:!0};return function(g){var n=d.alg.mergeObj({},g,f),l=this.buildControl(n,!0);g["data-values"]=n["data-values"];c=c||n.exportValue;g.exportValue=b;g.setValue=a;return l}}).registerControlFn("hidden",function(){var b={nolabel:!0,type:"input"},a={display:"none"};return function(c){var f=
d.alg.mergeObj({},c,b),g=this.buildControl(f,!0).setCss(a);c.setValue=f.setValue;return g}}).registerControlFn("autocomplete",function(){function b(b,c,e){function g(a){d.dom(this).getAttrs({"data-value":null},function(a){b.setFieldValue(e.name,a["data-value"])})}var l=d.dom('<ul class="js-control js-autocomplete-search"></ul>');c.on("keydown",function(a){var b={readonly:null};d.dom(this).getAttrs(b);if(!b.readonly)switch(b=!1,a.keyCode){case d.alg.keycodes.KC_UpArrow:b=!0;case d.alg.keycodes.KC_DownArrow:var c=
-1;l.find(".search-item").each(function(a,b){var e={selected:!1};d.dom(a).getClasses(e);e.selected&&(c=b)});l.find(".search-item").setClasses({selected:!1}).at(c+(b?-1:1)).setClasses({selected:!0});break;case d.alg.keycodes.KC_Tab:case d.alg.keycodes.KC_Enter:l.find(".search-item.selected").trigger("mousedown")}}).on("blur",function(a){a={readonly:null};d.dom(this).getAttrs(a);a.readonly||(""===this.value?d.dom(this).setAttrs({"data-value":""}):e.strict&&((a=f(e,this.value,!0))?(this.value=a.text,
d.dom(this).setAttrs({"data-value":a.value})):(this.value="",d.dom(this).setAttrs({"data-value":""}))),m.hide())});var m={show:function(b){var c=e.values||[],f=d.alg.number(e.minlen,3),q={match:[],regexp:new RegExp(d.alg.escapeString(b),"i"),depth:d.alg.number(e.length,5)};b.length>=f?(d.alg.arrEach(c,a,q),b={width:0},this.getCss(b),l.setHtml(q.match.join("")).attachEnd(this).setCss(b).find(".search-item").on("mousedown",g)):l.remove()},hide:function(){l.remove()},getFirst:function(){}};return m}
function a(a,b,c,e){b=d.alg.string(a.value);a=d.alg.string(a.text,b);e.regexp.test(a)&&e.match.push('<li class="search-item" data-value="'+b+'" title="'+a+'">'+a+"</li>");e.match.length>=e.depth&&this.stop()}function c(a,b,e,f){b=d.alg.string(a.value);a=d.alg.string(a.text,b);f.find.test(f.searchText?a:b)&&(f.match={value:b,text:a},this.stop())}function f(a,b,f){b={match:null,find:new RegExp("^"+b+"$"),searchText:f};d.alg.arrEach(a.values,c,b);return b.match}function g(a,b){var c=a.field,e=d.alg.bool(a.config.strict),
g="",m={};(g=f(a.config,b,!1))?(m["data-value"]=g.value,g=g.text):e?g=m["data-value"]="":(m["data-value"]=d.alg.string(b,""),g=d.alg.string(b,""));c.setAttrs(m).setValue(g)}function n(a,b){var c="";a.field.getAttrs({"data-value":null},function(a){c=a["data-value"]});c||a.config.strict||a.field.getProps({value:null},function(a){c=a.value});return c}var l={type:"input"};return function(a){var c=d.alg.mergeObj({},a,l),e=this.buildControl(c,!0),f=null;a.setValue=g;a.exportValue=n;f=b(this,e,a);e.on("focus input",
function(a){a={readonly:null};d.dom(this).getAttrs(a);a.readonly||e.getValue(f.show)});return e}}).registerControlFn("number",function(){function b(a,b){b=d.alg.string(b,"");a.field.filter("input").getAttrs({"data-focus":!1},function(f){if(f["data-focus"])b=c(b,a.config.acc);else{var p=b;f=a.config.tsep;var r=a.config.dec,t=a.config.acc;""===d.alg.string(p,"")?b=p:(p=d.alg.number(p,0),f=d.alg.string(f,","),r=d.alg.string(r,"."),"undefined"!==typeof t&&(p=p.toFixed(t)),p=d.alg.string(p,"").split("."),
t=[],t[0]=(p[0]||"").replace(/\B(?=(\d{3})+(?!\d))/g,f),p[1]&&t.push(p[1]),b=t.join(r))}this.setValue(b)})}function a(a,b){b=this.filter("input").exportValue();b=b.replace(/([^\d\.])/g,"");return c(b)}function c(a,b){a=d.alg.string(a,"");var e=null;a=a.replace(/([^\-\d\.]+)/g,"");(e=a.split("."))?(e[0]=d.alg.number(e[0],0),e[1]=d.alg.string(e[1],"0"),a=d.alg.number(e[0]+"."+e[1],0)):a=0;"undefined"!==typeof b&&(a=a.toFixed(b));return a}var f={type:"input"};return function(c){var e=d.alg.mergeObj({},
c,f,{"class":d.alg.string(c.class,"")+" data-number"}),e=this.buildControl(e,!0),l=this;c.setValue=b;c.exportValue=a;e.filter("input").on("blur",function(a){a=d.dom(this).setAttrs({"data-focus":null});l.setFieldValue(c.name,a.exportValue())}).on("focus",function(a){a={readonly:null};d.dom(this).getAttrs(a);a.readonly||(a=d.dom(this).setAttrs({"data-focus":!0}),l.setFieldValue(c.name,a.exportValue()))});return e}}).registerControlFn("currency",function(){var b={type:"number"};return function(a){var c=
d.alg.mergeObj({},a,b,{"class":d.alg.string(a.class,"")+" data-currency"}),f=this.buildControl(c,!0),g='<div class="js-control js-control-currency-prefix">'+d.alg.string(a.prefix,"$")+"</div>";Object.defineProperty(a,"acc",{get:function(){return c.acc},set:function(a){c.acc=a}});a.setValue=c.setValue;a.exportValue=c.exportValue;a.acc=d.alg.number(a.acc,2);return d.dom(g).and(f)}});return c});js.extend.fn("sp",function(){function c(){}function d(a,b,c,d){h.alg.use(this,b,[c,d,a]);this._dirtyRows.length=0;this.pull()}function b(a,b,c,d){h.alg.use(this,b,[c,d,a])}function a(a,b,c,d){a=a.getEnumerator();var f=h.alg.each,g=this._columns,m=null,l=m=null;for(this.clearData();a.moveNext();)l={},m=a.get_current(),m={item:m,id:m.get_id(),_row:l},f(g,e,m),this._rows.push(l);b(c,d)}function e(a,b,c,d){b=d.id;var e=d._row,g=!1;c=Object.create(a,{rowID:{value:b},dirty:{get:function(){return g}},value:{get:function(){return"function"===
typeof this.macro?this.macro(e):m},set:function(b){a.internal&&(m=b,g=!0,0>a.list._dirtyRows.indexOf(e)&&a.list._dirtyRows.push(e))}}});var m=a.default;if(a.internal)try{m=d.item.get_item(a.internal),a.rowIDs[b]=m,a.values[m]||(a.values[m]=[]),a.values[m].push(b)}catch(l){h.log.warn("Could not load data from column name "+a.internal)}m=f(a,m);e[a.name]=c}function f(a,b){switch(a.type){case "bitflag":case "number":b=h.alg.number(b);break;case "string":case "text":b=h.alg.string(b)}return b}function g(a,
b,c,d){b(c,d)}function n(a,b,c,d){if(a&&d&&d.filterArray&&d.filterArray.length){b=d.filterArray;d=d.exclude;var e,f,g,m;f=!1;for(c=0;!f&&c<b.length;c++)(e=b[c])&&e.column&&"undefined"!==typeof a[e.column]&&(g=a[e.column].value,m=!0,f||"undefined"===typeof e.gt||(e.gt&&"object"===typeof e.gt?(h.alg.each(e.gt,function(a){(m=m&&!(g>a))||this.stop()}),f=m):f=!(g>e.gt)),f||"undefined"===typeof e.geq||(e.geq&&"object"===typeof e.geq?(h.alg.each(e.geq,function(a){(m=m&&!(g>=a))||this.stop()}),f=m):f=!(g>=
e.geq)),f||"undefined"===typeof e.leq||(e.leq&&"object"===typeof e.leq?(h.alg.each(e.leq,function(a){(m=m&&!(g<=a))||this.stop()}),f=m):f=!(g<=e.leq)),f||"undefined"===typeof e.lt||(e.lt&&"object"===typeof e.lt?(h.alg.each(e.lt,function(a){(m=m&&!(g<a))||this.stop()}),f=m):f=!(g<e.lt)),f||"undefined"===typeof e.eq||(e.eq&&"object"===typeof e.eq?(h.alg.each(e.eq,function(a){(m=m&&g!=a)||this.stop()}),f=m):f=g!=e.eq),f||"undefined"===typeof e.seq||(e.seq&&"object"===typeof e.seq?(h.alg.each(e.seq,function(a){(m=
m&&g!==a)||this.stop()}),f=m):f=g!==e.seq),f||"undefined"===typeof e.neq||(e.neq&&"object"===typeof e.neq?(h.alg.each(e.neq,function(a){(m=m&&g==a)||this.stop()}),f=m):f=g==e.neq),f||"undefined"===typeof e.snq||(e.snq&&"object"===typeof e.snq?(h.alg.each(e.snq,function(a){(m=m&&g===a)||this.stop()}),f=m):f=g===e.snq),f||"undefined"===typeof e.and||(e.and&&"object"===typeof e.and?(h.alg.each(e.and,function(a){(m=m&&(g&a)!==a)||this.stop()}),f=m):f=(g&e.and)!==e.and),f||"undefined"===typeof e.not||
(e.not&&"object"===typeof e.not?(h.alg.each(e.not,function(a){(m=m&&0!==(g&a))||this.stop()}),f=m):f=0!==(g&e.not)),f||"undefined"===typeof e.test||(e.test instanceof RegExp?f=!e.test.test(g):e.test&&"object"===typeof e.test&&(h.alg.each(e.test,function(a){(m=m&&!a.test(g))||this.stop()}),f=m)));(!d&&f||d&&!f)&&this.drop();return this}}function l(a,b,c,d,e){function f(a,b,c){var d=[];h.alg.arrEach(b,function(b){d.push(g(a[b][c]))});return d.join("")}function g(a){return['<ss:Cell><ss:Data ss:Type="String">',
a,"</ss:Data></ss:Cell>"].join("")}return['<?xml version="1.0"?><?mso-application progid="Excel.Sheet"?>',['<ss:Workbook xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"><ss:Styles><ss:Style ss:ID="1"><ss:Font ss:Bold="1" /></ss:Style></ss:Styles>',['<ss:Worksheet ss:Name="',a,'"><ss:Table>',function(a,c){var d=[];d.push('<ss:Row ss:StyleID="1">');h.alg.arrEach(c,function(a){d.push(g(b.exportColumn(a).text))});d.push("</ss:Row>");h.alg.arrEach(a,function(a){d.push("<ss:Row>");d.push(f(a,c,
"value"));d.push("</ss:Row>")});return d.join("")}(c,d),"</ss:Table></ss:Worksheet>"].join(""),"</ss:Workbook>"].join("")].join("")}function p(a,b,c){return["\ufeff",function(a,b){var c=[];h.alg.arrEach(b,function(b){c.push(['"',a.exportColumn(b).text||" ",'"'].join(""))});return c.join(",")}(a,c),"\r\n",function(a,b){function c(a,b,d,k){k.row&&e.push(['"',(k.row[a]||{})[k.type]||"",'"'].join(""))}var d=[],e=null;h.alg.arrEach(a,function(a,k){e=[];h.alg.arrEach(b,c,{row:a,type:"value",r:[]});d.push(e.join(","))});
return d.join("\r\n")}(b,c)].join("")}function r(a,b,c,d){this._email=this._user.get_email();this._username=this._user.get_loginName();this._userid=this._user.get_id();h.alg.use(this,b,[c,d])}function t(a,b,c,d){h.alg.use(this,b,[c,d])}function u(a,b,c,d,e,f,g){b=b.getEnumerator();for(var m=null;b.moveNext();)if(m=b.get_current(),m[a]()===c){Object.defineProperties(this,{_group:{value:m},_id:{value:m.get_id()},_name:{value:m.get_title()}});h.alg.use(this,d,[m]);return}h.alg.use(this,e,[f,g])}function v(a,
b,c,d,e){for(var f=!1,g=this._group.get_users().getEnumerator(),m=null;g.moveNext();)if(m=g.get_current(),m.get_id()===a.get_id()){f=!0;break}h.alg.use(this,f?b:c,[d,e])}function m(a,b,c,d){h.alg.use(this,b,[c,d])}var h=window.jspyder;c.getContext=function(a,b){h.alg.use(c.exportContext(a),b);return c};c.exportContext=function(a){return a?new window.SP.ClientContext(a):window.SP.ClientContext.get_current()};c.list=function(a,b){window.SP||h.log.warn("Ensure that MicrosoftAjax.js, sp.runtime.js, and sp.js have been loaded before using JSpyder SharePoint Interface");
var d=Object.create(c.list.fn);a&&(a.url&&(d._url=a.url),a.name&&(d._name=a.name),"function"===typeof a.success&&(d._success=a.success),"function"===typeof a.failure&&(d._failure=a.failure),a.caml&&(d._caml=a.caml));d._columns={};d._rows=[];d._dirtyRows=[];h.alg.use(d,b);return d};c.list.fn={_url:"",_name:"",_success:function(){},_failure:function(){},_caml:"<View><Query><Where><Geq><FieldRef Name='ID' /><Value Type='Number'>1</Value></Geq></Where></Query><RowLimit>10000</RowLimit></View>",_columns:{},
_rows:[],_dirtyRows:[],get length(){return this._rows.length},addColumn:function(a,b){var d=Object.create(c.column.fn,{list:{value:this},name:{value:a}});h.alg.mergeObj(d,b);"undefined"===typeof b["default"]&&"number"===d.type&&(d["default"]=0);this._columns[a]=d;return this},addColumns:function(a){h.alg.each(a,function(a,b,c,d){d.addColumn(b,a)},this);return this},exportColumn:function(a){return this._columns[a]?this._columns[a]:Object.create(c.column.fn,{list:{value:this},name:{value:a}})},getColumn:function(a,
b){var c=this._columns[a];c&&h.alg.use(this,b,[c]);return this},exportRow:function(a){return this._rows[h.alg.number(a,0)]||null},getRow:function(a,b){var c=this.exportRow(a);c&&h.alg.use(this,b,[c]);return this},exportRowById:function(a){for(var b=null,c=null,d=0;c=this.exportRow(d++);)if(c.ID.value===a){b=c;break}return b},getRowById:function(a,b){var c=this.exportRowById(a);c&&h.alg.use(this,b,[c]);return this},eachDirtyRow:function(a,b){var c=this._dirtyRows;"function"===typeof a&&h.alg.each(c,
a,b);return this},exportRowCount:function(a){return this._rows.length},getRowCount:function(a,b){var c=this.exportRowCount(a);h.alg.use(this,b,[c]);return this},pull:function(b,d){var e=c.exportContext(this._url),f=e.get_web().get_lists().getByTitle(this._name),m=new window.SP.CamlQuery,l="function"===typeof b?b:this._success,n="function"===typeof d?d:this._failure;m.set_viewXml(this.caml);f=f.getItems(m);e.load(f);e.executeQueryAsync(h.alg.bindFn(this,a,[f,l]),h.alg.bindFn(this,g,[f,n]));return this},
query:function(a){var b=c.query(this).reset();return a instanceof Array?b.filters(a):b.filter(a)},clearData:function(){for(this._rows=[];this._dirtyRows.pop(););h.alg.each(this._columns,function(a){a.rowIDs={};a.values={}});return this},push:function(a,e){var f=c.exportContext(this._url),g=f.get_web().get_lists().getByTitle(this._name),g={clientContext:f,items:[],list:g,self:this};this.eachDirtyRow(this._pushLoopDirtyRows,g);f.executeQueryAsync(h.alg.bindFn(this,d,[g.items,a]),h.alg.bindFn(this,b,
[g.items,e]));return this},_pushLoopDirtyRows:function(a,b,c,d){b=a.ID.value;c=c=null;0>b?(c=new window.SP.ListItemCreationInformation,c=d.list.addItem(c),d.newrow=!0):(c=d.list.getItemById(b),d.newrow=!1);d.listItem=c;h.alg.each(a,d.self._pushLoopDirtyRowColumns,d);d.items.push(c);c.update();d.clientContext.load(c)},_pushLoopDirtyRowColumns:function(a,b,c,d){a.internal&&a.dirty&&"ID"!==a.internal&&d.listItem.set_item(a.internal,a.value)},updateRow:function(a,b){return this.getRowById(a,function(a){h.alg.each(a,
this._updateRowEach,h.alg.cloneObj(b))})},_updateRowEach:function(a,b,c,d){b=d[a.name];c=b!==a.value;"undefined"!==typeof b&&c&&(a.value=b)},createRow:function(a){var b=this._columns;a={row:{},rowID:-1,values:h.alg.mergeObj({},a)};h.alg.each(b,this._createRowEach,a);a.row.ID.value=a.rowID;this._dirtyRows.push(a.row);return this},_createRowEach:function(a,b,c,d){var e=d.row;b=d.values[a.name];d=Object.create(a,{rowID:{value:d.rowID},dirty:{get:function(){return null!==f}},value:{get:function(){return"function"===
typeof this.macro?this.macro(e):f},set:function(b){a.internal&&(f=b)}}});var f="undefined"!==typeof b?b:a.default||null;e[a.name]=d},getPermissions:function(a,b){var d=c.exportContext(this._url),e=d.get_web(),f={currentUser:e.get_currentUser(),web:e};d.load(f.currentUser);d.load(e,"EffectiveBasePermissions");d.executeQueryAsync(h.alg.bindFn(this,this._getPermissionsSuccess,[f,a]),h.alg.bindFn(this,this._getPermissionsSuccess,[null,b]));return this},_getPermissionsSuccess:function(a,b,c,d){var e=this._permissions=
{};if(a){var f=a.web.get_effectiveBasePermissions();h.alg.each(new window.SP.PermissionKind,function(a,b){e[b]=h.alg.bool(f.has(a))});h.alg.use(this,b,[this._permissions])}else h.alg.use(this,b,[c,d])}};c.query=function(a){return Object.create(c.query.fn,{_list:{value:a}})};c.query.fn={_list:null,_rows:null,get length(){return this._rows.length},row:function(a){return this._rows[h.alg.number(a)]},reset:function(){this._rows=this._list._rows.slice(0);return this},filter:function(a){a&&h.alg.arrEach(this._rows,
n,{filterArray:[a],exclude:!1});return this},filters:function(a){h.alg.arrEach(this._rows,n,{filterArray:a,exclude:!1});return this},excludes:function(a){h.alg.arrEach(this._rows,n,{filterArray:a,exclude:!0});return this},_cleanRows:function(){this._rows.sort();var a=this._rows.indexOf(null);-1<a&&this._rows.splice(a);return this},data:function(a){h.alg.use(this,a,[this._rows]);return this},sort:function(a,b){h.alg.sortArrayObj(this._rows,b,a,"value");return this},each:function(a){h.alg.arrEach(this._rows,
a,this);return this},sum:function(a,b){this.data(function(d){h.alg.each(a,c.query.fn._sum).alg.each(d,c.query.fn._sumRows,a).alg.use(this,b,[a])});return this},_sum:function(a,b,c){c[b]=a.value||a.default},_sumRows:function(a,b,d,e){h.alg.each(e,c.query.fn._sumColumns,a)},_sumColumns:function(a,b,c,d){if(d=d[b]){var e=d&&d.value;switch(d.type){case "number":c[b]=h.alg.number(e)+h.alg.number(a);break;case "bitflag":c[b]=a&h.alg.number(e);break;default:c[b]=e}}},getValues:function(a,b){h.alg.use(this,
b,[this.exportValues(a)]);return this},exportValues:function(a){function b(a,c,d,e){a[e[c].value]=!0}h.alg.each(a,function(a,b,c){c[b]={}});this.each(function(c){h.alg.each(a,b,c)});h.alg.each(a,function(a,b,c){c[b]=Object.keys(a).sort()});return a},clone:function(){var a=c.query(this._list);a._rows=this._rows.slice(0);return a},toExcelString:function(a,b){return l(a,this._list,this._rows,b)},toCsvString:function(a){return p(this._list,this._rows,a)}};c.column=function(){};c.column.fn={internal:"",
text:"",type:"string",default:"",valueOf:function(){return this.value}};c.user=function(a,b,d){a=a||{};var e=c.exportContext(a.url),f=e.get_web(),g=f.get_siteUserInfoList(),m=null,m=a.userid?g.getById(a.userid):a.login?g.getByLoginName(a.login):a.email?g.getByEmail(a.email):f.get_currentUser(),f=Object.create(h.sp.user.fn,{_user:{value:m}});e.load(m);e.executeQueryAsync(h.alg.bindFn(f,r,[a,b]),h.alg.bindFn(f,t,[a,d]));return f};c.user.getById=function(a,b){return c.user({userid:a,url:b})};c.user.getByLogin=
function(a,b){return c.user({login:a,url:b})};c.user.getByEmail=function(a,b){return c.user({email:a,url:b})};c.user.fn={_user:null,_email:null,_userid:null,_username:null,_url:null,isMemberOfGroup:function(a,b){var d=h.alg.bindFn(this,b,[!0]),e=h.alg.bindFn(this,b,[!1]),f=this._user;c.group(a,function(){this.isMember(f,d,e)},e);return this}};c.group=function(a,b,d){a=a||{};var e=c.exportContext(a.url),f=e.get_web().get_siteGroups(),g=null;if(a&&a.isPrototypeOf(c.group.fn))g=a;else{e.load(f);var g=
Object.create(c.group.fn,{_url:{value:h.alg.string(a.url,"")}}),m=h.alg.bindFn(g,d);a=a.name?h.alg.bindFn(g,u,["get_title",f,a.name,b,d]):a.groupid?h.alg.bindFn(g,u,["get_id",f,a.groupid,b,d]):m;e.executeQueryAsync(a,m)}return g};c.group.fn={_url:null,_group:null,isMember:function(a,b,d){var e=null,e=c.exportContext(this._url);e.get_web();e.load(a);e.load(this._group,"Users");e.executeQueryAsync(h.alg.bindFn(this,v,[a,b,d]),h.alg.bindFn(this,m,[a,d]));return this}};return c});jspyder.extend.fn("template",function(){function c(a){a&&"object"===typeof a||(a={});var b="";return Object.create(c.fn,{_data:{get:function(){return a}},_compiled:{get:function(){return b}},_setData:{value:function(b,c){b===f&&(a=c)}},_setCompiled:{value:function(a,c){a===f&&(b=c)}}})}function d(a,b){for(var c={data:b,tmp:a,lib:e},f=null,q="",z=0,w;f=v.exec(c.tmp);){z=f.index;f=f[0];w=f.length;q+=c.tmp.substring(0,z);c.tmp=c.tmp.substring(z+w);if(u.test(f)){var z=c,A=void 0;w=[];for(var B=void 0,
D=A=void 0,E=void 0,A=f.match(t)[0].substring(1),f=f.substring(f.indexOf("(")+1,f.lastIndexOf(")"));B=g.exec(f);)E=B[0].length,D=B.length,B=B[D-1],f=f.substring(E),B.search(u)?B.search(l)?B.search(n)?B.search(r)?B.search(p)?w.push(d(B,z.data)):w.push(+B):w.push(d(B,z.data)):w.push(B.substring(1,B.length-1)):w.push(d(B.substring(1,B.length-1),z.data)):w.push(d(B,z.data));(B=z.lib.fetch(A))?(A=B.apply(z.data,w),"undefined"!==typeof A&&null!==A&&(f=A)):f="@"+A+"("+w.join(", ")+")"}r.test(f)&&(z=c.data[f.substring(2,
f.length-1)],f="undefined"===typeof z?f:null!==z?z:"");q+=f}return q+=c.tmp}var b=this;if(!b)return console.error("Attempted to load module js-template without loading JSpyder"),null;var a=b.createRegistry(),e=b.createRegistry(),f=(4294967295*Math.random()|0).toString(32),g=/\s*(`(?:[^`\\]|\\.)*`|"(?:[^"\\]|\\.)*"|\d+(?:\.\d+)?|\$\{\D[a-z0-9_]*\})(?:\s*,\s*(?!\)))?/i,n=/"(?:[^"\\]|\\.)*"/i,l=/`(?:[^`\\]|\\.)*`/i,p=/\d+(?:\.\d+)?/,r=/\$\{\D[a-z0-9_]*\}/i,t=/\@\D[a-z0-9_]*/i,u=/\@\D[a-z0-9_]*\((?:\s*(`(?:[^`\\]|\\.)*`|"(?:[^"\\]|\\.)*"|\d+(?:\.\d+)?|\$\{\D[a-z0-9_]*\})(?:\s*,\s*(?!\)))?)*\)/i,
v=/(\@\D[a-z0-9_]*\((?:\s*(`(?:[^`\\]|\\.)*`|"(?:[^"\\]|\\.)*"|\d+(?:\.\d+)?|\$\{\D[a-z0-9_]*\})(?:\s*,\s*(?!\)))?)*\)|\$\{\D[a-z0-9_]*\})/i;c.fn={compile:function(b,c,d){b=a.fetch(b);return this.compileExplicit(b,c,d)},compileExplicit:function(a,c,e){"function"!==typeof c||e||(e=c,c=null);"undefined"===typeof a&&(a="");var g=Object.create(this._data);b.alg.each(c||{},function(a,b,c,d){d[b]=a},g);a=d(a,g);this._setCompiled(f,a);"function"===typeof e&&e.apply(this,[a]);return this},output:function(){return this._compiled},
storeTemplate:function(c,d){d=b.alg.string(d,"");d=d.replace(/\<\!\-\-[^\<]+\-\-\>/g,"").replace(/\<([^\s\>]+)([^\>]+)\/\>/i,"<$1 $2></$1>");a.stash(c,d);return this},storeTemplateXml:function(a,d){a=b.alg.string(a);if(b.ajax){var e={xmls:new XMLSerializer,fn:d};b.ajax(a).get(c.fn._storeTemplateXml_ajax,e)}else b.log.error("Attempted to call jspyder.template.storeTemplateXml() without loading jspyder.ajax module!");return this},_storeTemplateXml_ajax:function(a,d){c.fn._storeTemplateXml_ajax="IE"===
b.env.browser.name&&9>=b.env.browser.version?function(a,d){var e=c.fn._storeTemplateXml_parseXml(a.responseText);b.dom(e.firstChild).children(c.fn._storeTemplateXml_children,d);b.alg.run(d.fn)}:function(a,d){b.dom(a.responseXML.firstChild).children(c.fn._storeTemplateXml_children,d);b.alg.run(d.fn)};return c.fn._storeTemplateXml_ajax.apply(this,arguments)},_storeTemplateXml_parseXml:function(a){try{if("undefined"!=typeof DOMParser){var c=(new DOMParser).parseFromString(a,"text/xml");return c}if("undefined"!=
typeof ActiveXObject)return c=new ActiveXObject("Microsoft.XMLDOM"),c.loadXML(a),c;var d="data:text/xml;charset=utf-8,"+encodeURIComponent(a),e=new XMLHttpRequest;e.open("GET",d,!1);e.send(null);return e.responseXML}catch(f){b.log.error("There was a problem parsing the xml: "+f.message)}return"<templates></templates>"},_storeTemplateXml_children:function(a,b){c.fn.storeTemplate(a.getAttribute("name"),b.xmls.serializeToString(a).replace(/\<[\/]?template[^\>]*\>/g,""))},getTemplate:function(b,c){a.fetch(b,
c);return this},register:function(a,b){"function"===typeof b&&e.stash(a,b);return this},registerSet:function(a){var c=this;b.alg.each(a,function(a,b){c.register(b,a)});return this}};c.storeTemplate=c.fn.storeTempate;c.storeTemplateXml=c.fn.storeTemplateXml;c.getTemplate=c.fn.getTemplate;c.compile=c.fn.compile;c.compileExplicit=c.fn.compileExplicit;c.register=c.fn.register;c.registerSet=c.fn.registerSet;c.registerSet({each:function(a,d,e){a=this[a]||{};var f=Object.create(this),g="",l=c(a);b.alg.each(a,
function(a,b,c,m){f[d]=a;g+=l.compileExplicit(e,f).output()},this);return g},insert_template:function(a){for(var d="",e=Object.create(this),f=1;f<arguments.length;++f)e[arguments[f]]=e[arguments[++f]];e.arguments=b.alg.sliceArray(arguments,1);c(e).compile(a,function(a){d=a});return d},arguments:function(a){a=b.alg.number(a);return this.arguments?this.arguments[a]||"":""},iif:function(a,b,d){var e=c(this);"string"===typeof a&&(a=e.compileExplicit(a).output());return a?e.compileExplicit(b).output():
e.compileExplicit(d).output()},map_size:function(a){return(a=this[a])&&a.length?a.length:"undefined"===typeof a?0:1},add:function(a,c){return b.alg.number(b.alg.number(a)+b.alg.number(c))},"var":function(a,b){if(1===arguments.length)return this[a]||"";this[a]=b;return""},map:function(a){for(var b={},c=1;c<arguments.length;c+=2)b[arguments[c]]=arguments[c+1];this[a]=b;return""},map_item:function(a,b){return(a=this[a])?a[b]:b},js_registry:function(a){a=b.registry.fetch(a);return null===a||"undefined"===
typeof a?"":a},js_log:function(a){console.log(a)},concat:function(a){for(var b=1;b<arguments.length;b++)a+=arguments[b];return a},html:function(a){b.dom("<div>"+a+"</div>").getText(function(b){a=b});return a},escape:function(a){var c=[];a=a.split(/\r?\n/);b.alg.arrEach(a,function(a){var d=[];b.alg.iterate(0,a.length,function(b){d.push("&#",a.charCodeAt(b),";")});c.push(d.join(""))});return c.join("<br />")},tag:function(a,c){a=b.alg.string(a,"br");c=b.alg.string(c,"");var d=/^(area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)\b/i.test(a);
return"<"+a+" "+c+(d?" /":"></"+a)+">"}});return b.template=c});
